(function(Gt,re){typeof exports=="object"&&typeof module!="undefined"?re(exports):typeof define=="function"&&define.amd?define(["exports"],re):(Gt=typeof globalThis!="undefined"?globalThis:Gt||self,re(Gt.TbComp={}))})(this,function(Gt){"use strict";(()=>{var rt={9705:(h,u,o)=>{var c=o(1540);function s(f){var d=[1/0,1/0,-1/0,-1/0];return c.coordEach(f,function(x){d[0]>x[0]&&(d[0]=x[0]),d[1]>x[1]&&(d[1]=x[1]),d[2]<x[0]&&(d[2]=x[0]),d[3]<x[1]&&(d[3]=x[1])}),d}s.default=s,u.Z=s},4102:(h,u)=>{function o(P,S,B){B===void 0&&(B={});var m={type:"Feature"};return(B.id===0||B.id)&&(m.id=B.id),B.bbox&&(m.bbox=B.bbox),m.properties=S||{},m.geometry=P,m}function c(P,S,B){if(B===void 0&&(B={}),!P)throw new Error("coordinates is required");if(!Array.isArray(P))throw new Error("coordinates must be an Array");if(P.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!I(P[0])||!I(P[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:P},S,B)}function s(P,S,B){B===void 0&&(B={});for(var m=0,w=P;m<w.length;m++){var O=w[m];if(O.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var F=0;F<O[O.length-1].length;F++)if(O[O.length-1][F]!==O[0][F])throw new Error("First and last Position are not equivalent.")}return o({type:"Polygon",coordinates:P},S,B)}function f(P,S,B){if(B===void 0&&(B={}),P.length<2)throw new Error("coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:P},S,B)}function d(P,S){S===void 0&&(S={});var B={type:"FeatureCollection"};return S.id&&(B.id=S.id),S.bbox&&(B.bbox=S.bbox),B.features=P,B}function x(P,S,B){return B===void 0&&(B={}),o({type:"MultiLineString",coordinates:P},S,B)}function T(P,S,B){return B===void 0&&(B={}),o({type:"MultiPoint",coordinates:P},S,B)}function A(P,S,B){return B===void 0&&(B={}),o({type:"MultiPolygon",coordinates:P},S,B)}function U(P,S){S===void 0&&(S="kilometers");var B=u.factors[S];if(!B)throw new Error(S+" units is invalid");return P*B}function R(P,S){S===void 0&&(S="kilometers");var B=u.factors[S];if(!B)throw new Error(S+" units is invalid");return P/B}function E(P){return 180*(P%(2*Math.PI))/Math.PI}function I(P){return!isNaN(P)&&P!==null&&!Array.isArray(P)}Object.defineProperty(u,"__esModule",{value:!0}),u.earthRadius=63710088e-1,u.factors={centimeters:100*u.earthRadius,centimetres:100*u.earthRadius,degrees:u.earthRadius/111325,feet:3.28084*u.earthRadius,inches:39.37*u.earthRadius,kilometers:u.earthRadius/1e3,kilometres:u.earthRadius/1e3,meters:u.earthRadius,metres:u.earthRadius,miles:u.earthRadius/1609.344,millimeters:1e3*u.earthRadius,millimetres:1e3*u.earthRadius,nauticalmiles:u.earthRadius/1852,radians:1,yards:1.0936*u.earthRadius},u.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/u.earthRadius,yards:1.0936133},u.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},u.feature=o,u.geometry=function(P,S,B){switch(P){case"Point":return c(S).geometry;case"LineString":return f(S).geometry;case"Polygon":return s(S).geometry;case"MultiPoint":return T(S).geometry;case"MultiLineString":return x(S).geometry;case"MultiPolygon":return A(S).geometry;default:throw new Error(P+" is invalid")}},u.point=c,u.points=function(P,S,B){return B===void 0&&(B={}),d(P.map(function(m){return c(m,S)}),B)},u.polygon=s,u.polygons=function(P,S,B){return B===void 0&&(B={}),d(P.map(function(m){return s(m,S)}),B)},u.lineString=f,u.lineStrings=function(P,S,B){return B===void 0&&(B={}),d(P.map(function(m){return f(m,S)}),B)},u.featureCollection=d,u.multiLineString=x,u.multiPoint=T,u.multiPolygon=A,u.geometryCollection=function(P,S,B){return B===void 0&&(B={}),o({type:"GeometryCollection",geometries:P},S,B)},u.round=function(P,S){if(S===void 0&&(S=0),S&&!(S>=0))throw new Error("precision must be a positive number");var B=Math.pow(10,S||0);return Math.round(P*B)/B},u.radiansToLength=U,u.lengthToRadians=R,u.lengthToDegrees=function(P,S){return E(R(P,S))},u.bearingToAzimuth=function(P){var S=P%360;return S<0&&(S+=360),S},u.radiansToDegrees=E,u.degreesToRadians=function(P){return P%360*Math.PI/180},u.convertLength=function(P,S,B){if(S===void 0&&(S="kilometers"),B===void 0&&(B="kilometers"),!(P>=0))throw new Error("length must be a positive number");return U(R(P,S),B)},u.convertArea=function(P,S,B){if(S===void 0&&(S="meters"),B===void 0&&(B="kilometers"),!(P>=0))throw new Error("area must be a positive number");var m=u.areaFactors[S];if(!m)throw new Error("invalid original units");var w=u.areaFactors[B];if(!w)throw new Error("invalid final units");return P/m*w},u.isNumber=I,u.isObject=function(P){return!!P&&P.constructor===Object},u.validateBBox=function(P){if(!P)throw new Error("bbox is required");if(!Array.isArray(P))throw new Error("bbox must be an Array");if(P.length!==4&&P.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");P.forEach(function(S){if(!I(S))throw new Error("bbox must only contain numbers")})},u.validateId=function(P){if(!P)throw new Error("id is required");if(["string","number"].indexOf(typeof P)===-1)throw new Error("id must be a number or a string")}},1540:(h,u,o)=>{Object.defineProperty(u,"__esModule",{value:!0});var c=o(4102);function s(R,E,I){if(R!==null)for(var P,S,B,m,w,O,F,q,H=0,J=0,Q=R.type,Z=Q==="FeatureCollection",$=Q==="Feature",ct=Z?R.features.length:1,tt=0;tt<ct;tt++){w=(q=!!(F=Z?R.features[tt].geometry:$?R.geometry:R)&&F.type==="GeometryCollection")?F.geometries.length:1;for(var ht=0;ht<w;ht++){var _t=0,pt=0;if((m=q?F.geometries[ht]:F)!==null){O=m.coordinates;var vt=m.type;switch(H=!I||vt!=="Polygon"&&vt!=="MultiPolygon"?0:1,vt){case null:break;case"Point":if(E(O,J,tt,_t,pt)===!1)return!1;J++,_t++;break;case"LineString":case"MultiPoint":for(P=0;P<O.length;P++){if(E(O[P],J,tt,_t,pt)===!1)return!1;J++,vt==="MultiPoint"&&_t++}vt==="LineString"&&_t++;break;case"Polygon":case"MultiLineString":for(P=0;P<O.length;P++){for(S=0;S<O[P].length-H;S++){if(E(O[P][S],J,tt,_t,pt)===!1)return!1;J++}vt==="MultiLineString"&&_t++,vt==="Polygon"&&pt++}vt==="Polygon"&&_t++;break;case"MultiPolygon":for(P=0;P<O.length;P++){for(pt=0,S=0;S<O[P].length;S++){for(B=0;B<O[P][S].length-H;B++){if(E(O[P][S][B],J,tt,_t,pt)===!1)return!1;J++}pt++}_t++}break;case"GeometryCollection":for(P=0;P<m.geometries.length;P++)if(s(m.geometries[P],E,I)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function f(R,E){var I;switch(R.type){case"FeatureCollection":for(I=0;I<R.features.length&&E(R.features[I].properties,I)!==!1;I++);break;case"Feature":E(R.properties,0)}}function d(R,E){if(R.type==="Feature")E(R,0);else if(R.type==="FeatureCollection")for(var I=0;I<R.features.length&&E(R.features[I],I)!==!1;I++);}function x(R,E){var I,P,S,B,m,w,O,F,q,H,J=0,Q=R.type==="FeatureCollection",Z=R.type==="Feature",$=Q?R.features.length:1;for(I=0;I<$;I++){for(w=Q?R.features[I].geometry:Z?R.geometry:R,F=Q?R.features[I].properties:Z?R.properties:{},q=Q?R.features[I].bbox:Z?R.bbox:void 0,H=Q?R.features[I].id:Z?R.id:void 0,m=(O=!!w&&w.type==="GeometryCollection")?w.geometries.length:1,S=0;S<m;S++)if((B=O?w.geometries[S]:w)!==null)switch(B.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(E(B,J,F,q,H)===!1)return!1;break;case"GeometryCollection":for(P=0;P<B.geometries.length;P++)if(E(B.geometries[P],J,F,q,H)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(E(null,J,F,q,H)===!1)return!1;J++}}function T(R,E){x(R,function(I,P,S,B,m){var w,O=I===null?null:I.type;switch(O){case null:case"Point":case"LineString":case"Polygon":return E(c.feature(I,S,{bbox:B,id:m}),P,0)!==!1&&void 0}switch(O){case"MultiPoint":w="Point";break;case"MultiLineString":w="LineString";break;case"MultiPolygon":w="Polygon"}for(var F=0;F<I.coordinates.length;F++){var q={type:w,coordinates:I.coordinates[F]};if(E(c.feature(q,S),P,F)===!1)return!1}})}function A(R,E){T(R,function(I,P,S){var B=0;if(I.geometry){var m=I.geometry.type;if(m!=="Point"&&m!=="MultiPoint"){var w,O=0,F=0,q=0;return s(I,function(H,J,Q,Z,$){if(w===void 0||P>O||Z>F||$>q)return w=H,O=P,F=Z,q=$,void(B=0);var ct=c.lineString([w,H],I.properties);if(E(ct,P,S,$,B)===!1)return!1;B++,w=H})!==!1&&void 0}}})}function U(R,E){if(!R)throw new Error("geojson is required");T(R,function(I,P,S){if(I.geometry!==null){var B=I.geometry.type,m=I.geometry.coordinates;switch(B){case"LineString":if(E(I,P,S,0,0)===!1)return!1;break;case"Polygon":for(var w=0;w<m.length;w++)if(E(c.lineString(m[w],I.properties),P,S,w)===!1)return!1}}})}u.coordAll=function(R){var E=[];return s(R,function(I){E.push(I)}),E},u.coordEach=s,u.coordReduce=function(R,E,I,P){var S=I;return s(R,function(B,m,w,O,F){S=m===0&&I===void 0?B:E(S,B,m,w,O,F)},P),S},u.featureEach=d,u.featureReduce=function(R,E,I){var P=I;return d(R,function(S,B){P=B===0&&I===void 0?S:E(P,S,B)}),P},u.findPoint=function(R,E){if(E=E||{},!c.isObject(E))throw new Error("options is invalid");var I,P=E.featureIndex||0,S=E.multiFeatureIndex||0,B=E.geometryIndex||0,m=E.coordIndex||0,w=E.properties;switch(R.type){case"FeatureCollection":P<0&&(P=R.features.length+P),w=w||R.features[P].properties,I=R.features[P].geometry;break;case"Feature":w=w||R.properties,I=R.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":I=R;break;default:throw new Error("geojson is invalid")}if(I===null)return null;var O=I.coordinates;switch(I.type){case"Point":return c.point(O,w,E);case"MultiPoint":return S<0&&(S=O.length+S),c.point(O[S],w,E);case"LineString":return m<0&&(m=O.length+m),c.point(O[m],w,E);case"Polygon":return B<0&&(B=O.length+B),m<0&&(m=O[B].length+m),c.point(O[B][m],w,E);case"MultiLineString":return S<0&&(S=O.length+S),m<0&&(m=O[S].length+m),c.point(O[S][m],w,E);case"MultiPolygon":return S<0&&(S=O.length+S),B<0&&(B=O[S].length+B),m<0&&(m=O[S][B].length-m),c.point(O[S][B][m],w,E)}throw new Error("geojson is invalid")},u.findSegment=function(R,E){if(E=E||{},!c.isObject(E))throw new Error("options is invalid");var I,P=E.featureIndex||0,S=E.multiFeatureIndex||0,B=E.geometryIndex||0,m=E.segmentIndex||0,w=E.properties;switch(R.type){case"FeatureCollection":P<0&&(P=R.features.length+P),w=w||R.features[P].properties,I=R.features[P].geometry;break;case"Feature":w=w||R.properties,I=R.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":I=R;break;default:throw new Error("geojson is invalid")}if(I===null)return null;var O=I.coordinates;switch(I.type){case"Point":case"MultiPoint":return null;case"LineString":return m<0&&(m=O.length+m-1),c.lineString([O[m],O[m+1]],w,E);case"Polygon":return B<0&&(B=O.length+B),m<0&&(m=O[B].length+m-1),c.lineString([O[B][m],O[B][m+1]],w,E);case"MultiLineString":return S<0&&(S=O.length+S),m<0&&(m=O[S].length+m-1),c.lineString([O[S][m],O[S][m+1]],w,E);case"MultiPolygon":return S<0&&(S=O.length+S),B<0&&(B=O[S].length+B),m<0&&(m=O[S][B].length-m-1),c.lineString([O[S][B][m],O[S][B][m+1]],w,E)}throw new Error("geojson is invalid")},u.flattenEach=T,u.flattenReduce=function(R,E,I){var P=I;return T(R,function(S,B,m){P=B===0&&m===0&&I===void 0?S:E(P,S,B,m)}),P},u.geomEach=x,u.geomReduce=function(R,E,I){var P=I;return x(R,function(S,B,m,w,O){P=B===0&&I===void 0?S:E(P,S,B,m,w,O)}),P},u.lineEach=U,u.lineReduce=function(R,E,I){var P=I;return U(R,function(S,B,m,w){P=B===0&&I===void 0?S:E(P,S,B,m,w)}),P},u.propEach=f,u.propReduce=function(R,E,I){var P=I;return f(R,function(S,B){P=B===0&&I===void 0?S:E(P,S,B)}),P},u.segmentEach=A,u.segmentReduce=function(R,E,I){var P=I,S=!1;return A(R,function(B,m,w,O,F){P=S===!1&&I===void 0?B:E(P,B,m,w,O,F),S=!0}),P}},5975:(h,u,o)=>{o(7107);var c=o(2492),s=o.n(c);const f=JSON.parse('{"tooltips":{"placeMarker":"Click to place marker","firstVertex":"Click to place first vertex","continueLine":"Click to continue drawing","finishLine":"Click any existing marker to finish","finishPoly":"Click first marker to finish","finishRect":"Click to finish","startCircle":"Click to place circle center","finishCircle":"Click to finish circle","placeCircleMarker":"Click to place circle marker","placeText":"Click to place text"},"actions":{"finish":"Finish","cancel":"Cancel","removeLastVertex":"Remove Last Vertex"},"buttonTitles":{"drawMarkerButton":"Draw Marker","drawPolyButton":"Draw Polygons","drawLineButton":"Draw Polyline","drawCircleButton":"Draw Circle","drawRectButton":"Draw Rectangle","editButton":"Edit Layers","dragButton":"Drag Layers","cutButton":"Cut Layers","deleteButton":"Remove Layers","drawCircleMarkerButton":"Draw Circle Marker","snappingButton":"Snap dragged marker to other layers and vertices","pinningButton":"Pin shared vertices together","rotateButton":"Rotate Layers","drawTextButton":"Draw Text","scaleButton":"Scale Layers","autoTracingButton":"Auto trace Line"},"measurements":{"totalLength":"Length","segmentLength":"Segment length","area":"Area","radius":"Radius","perimeter":"Perimeter","height":"Height","width":"Width","coordinates":"Position","coordinatesMarker":"Position Marker"}}'),d=JSON.parse('{"tooltips":{"placeMarker":"Platziere den Marker mit Klick","firstVertex":"Platziere den ersten Marker mit Klick","continueLine":"Klicke, um weiter zu zeichnen","finishLine":"Beende mit Klick auf existierenden Marker","finishPoly":"Beende mit Klick auf ersten Marker","finishRect":"Beende mit Klick","startCircle":"Platziere das Kreiszentrum mit Klick","finishCircle":"Beende den Kreis mit Klick","placeCircleMarker":"Platziere den Kreismarker mit Klick","placeText":"Platziere den Text mit Klick"},"actions":{"finish":"Beenden","cancel":"Abbrechen","removeLastVertex":"Letzten Vertex l\xF6schen"},"buttonTitles":{"drawMarkerButton":"Marker zeichnen","drawPolyButton":"Polygon zeichnen","drawLineButton":"Polyline zeichnen","drawCircleButton":"Kreis zeichnen","drawRectButton":"Rechteck zeichnen","editButton":"Layer editieren","dragButton":"Layer bewegen","cutButton":"Layer schneiden","deleteButton":"Layer l\xF6schen","drawCircleMarkerButton":"Kreismarker zeichnen","snappingButton":"Bewegter Layer an andere Layer oder Vertexe einhacken","pinningButton":"Vertexe an der gleichen Position verkn\xFCpfen","rotateButton":"Layer drehen","drawTextButton":"Text zeichnen","scaleButton":"Layer skalieren","autoTracingButton":"Linie automatisch nachzeichen"},"measurements":{"totalLength":"L\xE4nge","segmentLength":"Segment L\xE4nge","area":"Fl\xE4che","radius":"Radius","perimeter":"Umfang","height":"H\xF6he","width":"Breite","coordinates":"Position","coordinatesMarker":"Position Marker"}}'),x=JSON.parse(`{"tooltips":{"placeMarker":"Clicca per posizionare un Marker","firstVertex":"Clicca per posizionare il primo vertice","continueLine":"Clicca per continuare a disegnare","finishLine":"Clicca qualsiasi marker esistente per terminare","finishPoly":"Clicca il primo marker per terminare","finishRect":"Clicca per terminare","startCircle":"Clicca per posizionare il punto centrale del cerchio","finishCircle":"Clicca per terminare il cerchio","placeCircleMarker":"Clicca per posizionare un Marker del cherchio"},"actions":{"finish":"Termina","cancel":"Annulla","removeLastVertex":"Rimuovi l'ultimo vertice"},"buttonTitles":{"drawMarkerButton":"Disegna Marker","drawPolyButton":"Disegna Poligoni","drawLineButton":"Disegna Polilinea","drawCircleButton":"Disegna Cerchio","drawRectButton":"Disegna Rettangolo","editButton":"Modifica Livelli","dragButton":"Sposta Livelli","cutButton":"Ritaglia Livelli","deleteButton":"Elimina Livelli","drawCircleMarkerButton":"Disegna Marker del Cerchio","snappingButton":"Snap ha trascinato il pennarello su altri strati e vertici","pinningButton":"Pin condiviso vertici insieme"}}`),T=JSON.parse('{"tooltips":{"placeMarker":"Klik untuk menempatkan marker","firstVertex":"Klik untuk menempatkan vertex pertama","continueLine":"Klik untuk meneruskan digitasi","finishLine":"Klik pada sembarang marker yang ada untuk mengakhiri","finishPoly":"Klik marker pertama untuk mengakhiri","finishRect":"Klik untuk mengakhiri","startCircle":"Klik untuk menempatkan titik pusat lingkaran","finishCircle":"Klik untuk mengakhiri lingkaran","placeCircleMarker":"Klik untuk menempatkan penanda lingkarann"},"actions":{"finish":"Selesai","cancel":"Batal","removeLastVertex":"Hilangkan Vertex Terakhir"},"buttonTitles":{"drawMarkerButton":"Digitasi Marker","drawPolyButton":"Digitasi Polygon","drawLineButton":"Digitasi Polyline","drawCircleButton":"Digitasi Lingkaran","drawRectButton":"Digitasi Segi Empat","editButton":"Edit Layer","dragButton":"Geser Layer","cutButton":"Potong Layer","deleteButton":"Hilangkan Layer","drawCircleMarkerButton":"Digitasi Penanda Lingkaran","snappingButton":"Jepretkan penanda yang ditarik ke lapisan dan simpul lain","pinningButton":"Sematkan simpul bersama bersama"}}'),A=JSON.parse('{"tooltips":{"placeMarker":"Adaug\u0103 un punct","firstVertex":"Apas\u0103 aici pentru a ad\u0103uga primul Vertex","continueLine":"Apas\u0103 aici pentru a continua desenul","finishLine":"Apas\u0103 pe orice obiect pentru a finisa desenul","finishPoly":"Apas\u0103 pe primul obiect pentru a finisa","finishRect":"Apas\u0103 pentru a finisa","startCircle":"Apas\u0103 pentru a desena un cerc","finishCircle":"Apas\u0103 pentru a finisa un cerc","placeCircleMarker":"Adaug\u0103 un punct"},"actions":{"finish":"Termin\u0103","cancel":"Anuleaz\u0103","removeLastVertex":"\u0218terge ultimul Vertex"},"buttonTitles":{"drawMarkerButton":"Adaug\u0103 o bulin\u0103","drawPolyButton":"Deseneaz\u0103 un poligon","drawLineButton":"Deseneaz\u0103 o linie","drawCircleButton":"Deseneaz\u0103 un cerc","drawRectButton":"Deseneaz\u0103 un dreptunghi","editButton":"Editeaz\u0103 straturile","dragButton":"Mut\u0103 straturile","cutButton":"Taie straturile","deleteButton":"\u0218terge straturile","drawCircleMarkerButton":"Deseneaz\u0103 marcatorul cercului","snappingButton":"Fixa\u021Bi marcatorul glisat pe alte straturi \u0219i v\xE2rfuri","pinningButton":"Fixa\u021Bi v\xE2rfurile partajate \xEEmpreun\u0103"}}'),U=JSON.parse('{"tooltips":{"placeMarker":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","firstVertex":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043F\u0435\u0440\u0432\u044B\u0439 \u043E\u0431\u044A\u0435\u043A\u0442","continueLine":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C \u0440\u0438\u0441\u043E\u0432\u0430\u043D\u0438\u0435","finishLine":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u043B\u044E\u0431\u043E\u0439 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043B\u044F \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0438\u044F","finishPoly":"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u0435\u0440\u0432\u0443\u044E \u0442\u043E\u0447\u043A\u0443, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u044C","finishRect":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u044C","startCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0446\u0435\u043D\u0442\u0440 \u043A\u0440\u0443\u0433\u0430","finishCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u0434\u0430\u0442\u044C \u0440\u0430\u0434\u0438\u0443\u0441","placeCircleMarker":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u043E\u0439 \u043C\u0430\u0440\u043A\u0435\u0440"},"actions":{"finish":"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C","cancel":"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C","removeLastVertex":"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"},"buttonTitles":{"drawMarkerButton":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0430\u0440\u043A\u0435\u0440","drawPolyButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043F\u043E\u043B\u0438\u0433\u043E\u043D","drawLineButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043A\u0440\u0438\u0432\u0443\u044E","drawCircleButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043A\u0440\u0443\u0433","drawRectButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u044F\u043C\u043E\u0443\u0433\u043E\u043B\u044C\u043D\u0438\u043A","editButton":"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u043B\u043E\u0439","dragButton":"\u041F\u0435\u0440\u0435\u043D\u0435\u0441\u0442\u0438 \u0441\u043B\u043E\u0439","cutButton":"\u0412\u044B\u0440\u0435\u0437\u0430\u0442\u044C \u0441\u043B\u043E\u0439","deleteButton":"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0441\u043B\u043E\u0439","drawCircleMarkerButton":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u0440\u0443\u0433\u043E\u0432\u043E\u0439 \u043C\u0430\u0440\u043A\u0435\u0440","snappingButton":"\u041F\u0440\u0438\u0432\u044F\u0437\u0430\u0442\u044C \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u0435\u043C\u044B\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u043A \u0434\u0440\u0443\u0433\u0438\u043C \u0441\u043B\u043E\u044F\u043C \u0438 \u0432\u0435\u0440\u0448\u0438\u043D\u0430\u043C","pinningButton":"\u0421\u0432\u044F\u0437\u0430\u0442\u044C \u043E\u0431\u0449\u0438\u0435 \u0442\u043E\u0447\u043A\u0438 \u0432\u043C\u0435\u0441\u0442\u0435"}}'),R=JSON.parse('{"tooltips":{"placeMarker":"Presiona para colocar un marcador","firstVertex":"Presiona para colocar el primer v\xE9rtice","continueLine":"Presiona para continuar dibujando","finishLine":"Presiona cualquier marcador existente para finalizar","finishPoly":"Presiona el primer marcador para finalizar","finishRect":"Presiona para finalizar","startCircle":"Presiona para colocar el centro del c\xEDrculo","finishCircle":"Presiona para finalizar el c\xEDrculo","placeCircleMarker":"Presiona para colocar un marcador de c\xEDrculo"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Eliminar \xFAltimo v\xE9rtice"},"buttonTitles":{"drawMarkerButton":"Dibujar Marcador","drawPolyButton":"Dibujar Pol\xEDgono","drawLineButton":"Dibujar L\xEDnea","drawCircleButton":"Dibujar C\xEDrculo","drawRectButton":"Dibujar Rect\xE1ngulo","editButton":"Editar Capas","dragButton":"Arrastrar Capas","cutButton":"Cortar Capas","deleteButton":"Eliminar Capas","drawCircleMarkerButton":"Dibujar Marcador de C\xEDrculo","snappingButton":"El marcador de Snap arrastrado a otras capas y v\xE9rtices","pinningButton":"Fijar juntos los v\xE9rtices compartidos"}}'),E=JSON.parse('{"tooltips":{"placeMarker":"Klik om een marker te plaatsen","firstVertex":"Klik om het eerste punt te plaatsen","continueLine":"Klik om te blijven tekenen","finishLine":"Klik op een bestaand punt om te be\xEBindigen","finishPoly":"Klik op het eerst punt om te be\xEBindigen","finishRect":"Klik om te be\xEBindigen","startCircle":"Klik om het middelpunt te plaatsen","finishCircle":"Klik om de cirkel te be\xEBindigen","placeCircleMarker":"Klik om een marker te plaatsen"},"actions":{"finish":"Bewaar","cancel":"Annuleer","removeLastVertex":"Verwijder laatste punt"},"buttonTitles":{"drawMarkerButton":"Plaats Marker","drawPolyButton":"Teken een vlak","drawLineButton":"Teken een lijn","drawCircleButton":"Teken een cirkel","drawRectButton":"Teken een vierkant","editButton":"Bewerk","dragButton":"Verplaats","cutButton":"Knip","deleteButton":"Verwijder","drawCircleMarkerButton":"Plaats Marker","snappingButton":"Snap gesleepte marker naar andere lagen en hoekpunten","pinningButton":"Speld gedeelde hoekpunten samen"}}'),I=JSON.parse(`{"tooltips":{"placeMarker":"Cliquez pour placer un marqueur","firstVertex":"Cliquez pour placer le premier sommet","continueLine":"Cliquez pour continuer \xE0 dessiner","finishLine":"Cliquez sur n'importe quel marqueur pour terminer","finishPoly":"Cliquez sur le premier marqueur pour terminer","finishRect":"Cliquez pour terminer","startCircle":"Cliquez pour placer le centre du cercle","finishCircle":"Cliquez pour finir le cercle","placeCircleMarker":"Cliquez pour placer le marqueur circulaire"},"actions":{"finish":"Terminer","cancel":"Annuler","removeLastVertex":"Retirer le dernier sommet"},"buttonTitles":{"drawMarkerButton":"Placer des marqueurs","drawPolyButton":"Dessiner des polygones","drawLineButton":"Dessiner des polylignes","drawCircleButton":"Dessiner un cercle","drawRectButton":"Dessiner un rectangle","editButton":"\xC9diter des calques","dragButton":"D\xE9placer des calques","cutButton":"Couper des calques","deleteButton":"Supprimer des calques","drawCircleMarkerButton":"Dessiner un marqueur circulaire","snappingButton":"Glisser le marqueur vers d'autres couches et sommets","pinningButton":"\xC9pingler ensemble les sommets partag\xE9s","rotateButton":"Tourner des calques"}}`),P=JSON.parse('{"tooltips":{"placeMarker":"\u5355\u51FB\u653E\u7F6E\u6807\u8BB0","firstVertex":"\u5355\u51FB\u653E\u7F6E\u9996\u4E2A\u9876\u70B9","continueLine":"\u5355\u51FB\u7EE7\u7EED\u7ED8\u5236","finishLine":"\u5355\u51FB\u4EFB\u4F55\u5B58\u5728\u7684\u6807\u8BB0\u4EE5\u5B8C\u6210","finishPoly":"\u5355\u51FB\u7B2C\u4E00\u4E2A\u6807\u8BB0\u4EE5\u5B8C\u6210","finishRect":"\u5355\u51FB\u5B8C\u6210","startCircle":"\u5355\u51FB\u653E\u7F6E\u5706\u5FC3","finishCircle":"\u5355\u51FB\u5B8C\u6210\u5706\u5F62","placeCircleMarker":"\u70B9\u51FB\u653E\u7F6E\u5706\u5F62\u6807\u8BB0"},"actions":{"finish":"\u5B8C\u6210","cancel":"\u53D6\u6D88","removeLastVertex":"\u79FB\u9664\u6700\u540E\u7684\u9876\u70B9"},"buttonTitles":{"drawMarkerButton":"\u7ED8\u5236\u6807\u8BB0","drawPolyButton":"\u7ED8\u5236\u591A\u8FB9\u5F62","drawLineButton":"\u7ED8\u5236\u7EBF\u6BB5","drawCircleButton":"\u7ED8\u5236\u5706\u5F62","drawRectButton":"\u7ED8\u5236\u957F\u65B9\u5F62","editButton":"\u7F16\u8F91\u56FE\u5C42","dragButton":"\u62D6\u62FD\u56FE\u5C42","cutButton":"\u526A\u5207\u56FE\u5C42","deleteButton":"\u5220\u9664\u56FE\u5C42","drawCircleMarkerButton":"\u753B\u5706\u5708\u6807\u8BB0","snappingButton":"\u5C06\u62D6\u52A8\u7684\u6807\u8BB0\u6355\u6349\u5230\u5176\u4ED6\u56FE\u5C42\u548C\u9876\u70B9","pinningButton":"\u5C06\u5171\u4EAB\u9876\u70B9\u56FA\u5B9A\u5728\u4E00\u8D77"}}'),S=JSON.parse('{"tooltips":{"placeMarker":"\u55AE\u64CA\u653E\u7F6E\u6A19\u8A18","firstVertex":"\u55AE\u64CA\u653E\u7F6E\u7B2C\u4E00\u500B\u9802\u9EDE","continueLine":"\u55AE\u64CA\u7E7C\u7E8C\u7E6A\u88FD","finishLine":"\u55AE\u64CA\u4EFB\u4F55\u5B58\u5728\u7684\u6A19\u8A18\u4EE5\u5B8C\u6210","finishPoly":"\u55AE\u64CA\u7B2C\u4E00\u500B\u6A19\u8A18\u4EE5\u5B8C\u6210","finishRect":"\u55AE\u64CA\u5B8C\u6210","startCircle":"\u55AE\u64CA\u653E\u7F6E\u5713\u5FC3","finishCircle":"\u55AE\u64CA\u5B8C\u6210\u5713\u5F62","placeCircleMarker":"\u9EDE\u64CA\u653E\u7F6E\u5713\u5F62\u6A19\u8A18"},"actions":{"finish":"\u5B8C\u6210","cancel":"\u53D6\u6D88","removeLastVertex":"\u79FB\u9664\u6700\u5F8C\u4E00\u500B\u9802\u9EDE"},"buttonTitles":{"drawMarkerButton":"\u653E\u7F6E\u6A19\u8A18","drawPolyButton":"\u7E6A\u88FD\u591A\u908A\u5F62","drawLineButton":"\u7E6A\u88FD\u7DDA\u6BB5","drawCircleButton":"\u7E6A\u88FD\u5713\u5F62","drawRectButton":"\u7E6A\u88FD\u65B9\u5F62","editButton":"\u7DE8\u8F2F\u5716\u5F62","dragButton":"\u79FB\u52D5\u5716\u5F62","cutButton":"\u88C1\u5207\u5716\u5F62","deleteButton":"\u522A\u9664\u5716\u5F62","drawCircleMarkerButton":"\u756B\u5713\u5708\u6A19\u8A18","snappingButton":"\u5C07\u62D6\u52D5\u7684\u6A19\u8A18\u5C0D\u9F4A\u5230\u5176\u4ED6\u5716\u5C64\u548C\u9802\u9EDE","pinningButton":"\u5C07\u5171\u4EAB\u9802\u9EDE\u56FA\u5B9A\u5728\u4E00\u8D77"}}'),B={en:f,de:d,it:x,id:T,ro:A,ru:U,es:R,nl:E,fr:I,pt_br:JSON.parse('{"tooltips":{"placeMarker":"Clique para posicionar o marcador","firstVertex":"Clique para posicionar o primeiro v\xE9rtice","continueLine":"Clique para continuar desenhando","finishLine":"Clique em qualquer marcador existente para finalizar","finishPoly":"Clique no primeiro ponto para fechar o pol\xEDgono","finishRect":"Clique para finalizar","startCircle":"Clique para posicionar o centro do c\xEDrculo","finishCircle":"Clique para fechar o c\xEDrculo","placeCircleMarker":"Clique para posicionar o marcador circular"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Remover \xFAltimo v\xE9rtice"},"buttonTitles":{"drawMarkerButton":"Desenhar um marcador","drawPolyButton":"Desenhar um pol\xEDgono","drawLineButton":"Desenhar uma polilinha","drawCircleButton":"Desenhar um c\xEDrculo","drawRectButton":"Desenhar um ret\xE2ngulo","editButton":"Editar camada(s)","dragButton":"Mover camada(s)","cutButton":"Recortar camada(s)","deleteButton":"Remover camada(s)","drawCircleMarkerButton":"Marcador de c\xEDrculos de desenho","snappingButton":"Marcador arrastado para outras camadas e v\xE9rtices","pinningButton":"V\xE9rtices compartilhados de pinos juntos"}}'),zh:P,zh_tw:S,pl:JSON.parse('{"tooltips":{"placeMarker":"Kliknij, aby ustawi\u0107 znacznik","firstVertex":"Kliknij, aby ustawi\u0107 pierwszy punkt","continueLine":"Kliknij, aby kontynuowa\u0107 rysowanie","finishLine":"Kliknij dowolny punkt, aby zako\u0144czy\u0107","finishPoly":"Kliknij pierwszy punkt, aby zako\u0144czy\u0107","finishRect":"Kliknij, aby zako\u0144czy\u0107","startCircle":"Kliknij, aby ustawi\u0107 \u015Brodek ko\u0142a","finishCircle":"Kliknij, aby zako\u0144czy\u0107 rysowanie ko\u0142a","placeCircleMarker":"Kliknij, aby ustawi\u0107 okr\u0105g\u0142y znacznik"},"actions":{"finish":"Zako\u0144cz","cancel":"Anuluj","removeLastVertex":"Usu\u0144 ostatni punkt"},"buttonTitles":{"drawMarkerButton":"Narysuj znacznik","drawPolyButton":"Narysuj wielok\u0105t","drawLineButton":"Narysuj \u015Bcie\u017Ck\u0119","drawCircleButton":"Narysuj ko\u0142o","drawRectButton":"Narysuj prostok\u0105t","editButton":"Edytuj","dragButton":"Przesu\u0144","cutButton":"Wytnij","deleteButton":"Usu\u0144","drawCircleMarkerButton":"Narysuj okr\u0105g\u0142y znacznik","snappingButton":"Snap przeci\u0105gni\u0119ty marker na inne warstwy i wierzcho\u0142ki","pinningButton":"Sworze\u0144 wsp\xF3lne wierzcho\u0142ki razem"}}'),sv:JSON.parse('{"tooltips":{"placeMarker":"Klicka f\xF6r att placera mark\xF6r","firstVertex":"Klicka f\xF6r att placera f\xF6rsta h\xF6rnet","continueLine":"Klicka f\xF6r att forts\xE4tta rita","finishLine":"Klicka p\xE5 en existerande punkt f\xF6r att slutf\xF6ra","finishPoly":"Klicka p\xE5 den f\xF6rsta punkten f\xF6r att slutf\xF6ra","finishRect":"Klicka f\xF6r att slutf\xF6ra","startCircle":"Klicka f\xF6r att placera cirkelns centrum","finishCircle":"Klicka f\xF6r att slutf\xF6ra cirkeln","placeCircleMarker":"Klicka f\xF6r att placera cirkelmark\xF6r"},"actions":{"finish":"Slutf\xF6r","cancel":"Avbryt","removeLastVertex":"Ta bort sista h\xF6rnet"},"buttonTitles":{"drawMarkerButton":"Rita Mark\xF6r","drawPolyButton":"Rita Polygoner","drawLineButton":"Rita Linje","drawCircleButton":"Rita Cirkel","drawRectButton":"Rita Rektangel","editButton":"Redigera Lager","dragButton":"Dra Lager","cutButton":"Klipp i Lager","deleteButton":"Ta bort Lager","drawCircleMarkerButton":"Rita Cirkelmark\xF6r","snappingButton":"Sn\xE4pp dra mark\xF6ren till andra lager och h\xF6rn","pinningButton":"F\xE4st delade h\xF6rn tillsammans"}}'),el:JSON.parse('{"tooltips":{"placeMarker":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","firstVertex":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u03C4\u03BF \u03C0\u03C1\u03CE\u03C4\u03BF \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF","continueLine":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C3\u03C5\u03BD\u03B5\u03C7\u03AF\u03C3\u03B5\u03C4\u03B5 \u03BD\u03B1 \u03C3\u03C7\u03B5\u03B4\u03B9\u03AC\u03B6\u03B5\u03C4\u03B5","finishLine":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03C3\u03B5 \u03BF\u03C0\u03BF\u03B9\u03BF\u03BD\u03B4\u03AE\u03C0\u03BF\u03C4\u03B5 \u03C5\u03C0\u03AC\u03C1\u03C7\u03BF\u03BD \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BF\u03BB\u03BF\u03BA\u03BB\u03B7\u03C1\u03C9\u03B8\u03B5\u03AF","finishPoly":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03C3\u03C4\u03BF \u03C0\u03C1\u03CE\u03C4\u03BF \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03B5\u03BB\u03B5\u03B9\u03CE\u03C3\u03B5\u03C4\u03B5","finishRect":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03B5\u03BB\u03B5\u03B9\u03CE\u03C3\u03B5\u03C4\u03B5","startCircle":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u03BA\u03AD\u03BD\u03C4\u03C1\u03BF \u039A\u03CD\u03BA\u03BB\u03BF\u03C5","finishCircle":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BF\u03BB\u03BF\u03BA\u03BB\u03B7\u03C1\u03CE\u03C3\u03B5\u03C4\u03B5 \u03C4\u03BF\u03BD \u039A\u03CD\u03BA\u03BB\u03BF","placeCircleMarker":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u039A\u03C5\u03BA\u03BB\u03B9\u03BA\u03CC \u0394\u03B5\u03AF\u03BA\u03C4\u03B7"},"actions":{"finish":"\u03A4\u03AD\u03BB\u03BF\u03C2","cancel":"\u0391\u03BA\u03CD\u03C1\u03C9\u03C3\u03B7","removeLastVertex":"\u039A\u03B1\u03C4\u03AC\u03C1\u03B3\u03B7\u03C3\u03B7 \u03C4\u03B5\u03BB\u03B5\u03C5\u03C4\u03B1\u03AF\u03BF\u03C5 \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF\u03C5"},"buttonTitles":{"drawMarkerButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","drawPolyButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u03A0\u03BF\u03BB\u03C5\u03B3\u03CE\u03BD\u03BF\u03C5","drawLineButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u0393\u03C1\u03B1\u03BC\u03BC\u03AE\u03C2","drawCircleButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039A\u03CD\u03BA\u03BB\u03BF\u03C5","drawRectButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039F\u03C1\u03B8\u03BF\u03B3\u03C9\u03BD\u03AF\u03BF\u03C5","editButton":"\u0395\u03C0\u03B5\u03BE\u03B5\u03C1\u03B3\u03B1\u03C3\u03AF\u03B1 \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","dragButton":"\u039C\u03B5\u03C4\u03B1\u03C6\u03BF\u03C1\u03AC \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","cutButton":"\u0391\u03C0\u03BF\u03BA\u03BF\u03C0\u03AE \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","deleteButton":"\u039A\u03B1\u03C4\u03AC\u03C1\u03B3\u03B7\u03C3\u03B7 \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","drawCircleMarkerButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039A\u03C5\u03BA\u03BB\u03B9\u03BA\u03BF\u03CD \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","snappingButton":"\u03A0\u03C1\u03BF\u03C3\u03BA\u03CC\u03BB\u03BB\u03B7\u03C3\u03B7 \u03C4\u03BF\u03C5 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7 \u03BC\u03B5\u03C4\u03B1\u03C6\u03BF\u03C1\u03AC\u03C2 \u03C3\u03B5 \u03AC\u03BB\u03BB\u03B1 \u0395\u03C0\u03AF\u03C0\u03B5\u03B4\u03B1 \u03BA\u03B1\u03B9 \u039A\u03BF\u03C1\u03C5\u03C6\u03AD\u03C2","pinningButton":"\u03A0\u03B5\u03C1\u03B9\u03BA\u03BF\u03C0\u03AE \u03BA\u03BF\u03B9\u03BD\u03CE\u03BD \u03BA\u03BF\u03C1\u03C5\u03C6\u03CE\u03BD \u03BC\u03B1\u03B6\u03AF"}}'),hu:JSON.parse('{"tooltips":{"placeMarker":"Kattintson a jel\xF6l\u0151 elhelyez\xE9s\xE9hez","firstVertex":"Kattintson az els\u0151 pont elhelyez\xE9s\xE9hez","continueLine":"Kattintson a k\xF6vetkez\u0151 pont elhelyez\xE9s\xE9hez","finishLine":"A befejez\xE9shez kattintson egy megl\xE9v\u0151 pontra","finishPoly":"A befejez\xE9shez kattintson az els\u0151 pontra","finishRect":"Kattintson a befejez\xE9shez","startCircle":"Kattintson a k\xF6r k\xF6z\xE9ppontj\xE1nak elhelyez\xE9s\xE9hez","finishCircle":"Kattintson a k\xF6r befejez\xE9s\xE9hez","placeCircleMarker":"Kattintson a k\xF6rjel\xF6l\u0151 elhelyez\xE9s\xE9hez"},"actions":{"finish":"Befejez\xE9s","cancel":"M\xE9gse","removeLastVertex":"Utols\xF3 pont elt\xE1vol\xEDt\xE1sa"},"buttonTitles":{"drawMarkerButton":"Jel\xF6l\u0151 rajzol\xE1sa","drawPolyButton":"Poligon rajzol\xE1sa","drawLineButton":"Vonal rajzol\xE1sa","drawCircleButton":"K\xF6r rajzol\xE1sa","drawRectButton":"N\xE9gyzet rajzol\xE1sa","editButton":"Elemek szerkeszt\xE9se","dragButton":"Elemek mozgat\xE1sa","cutButton":"Elemek v\xE1g\xE1sa","deleteButton":"Elemek t\xF6rl\xE9se","drawCircleMarkerButton":"K\xF6r jel\xF6l\u0151 rajzol\xE1sa","snappingButton":"Kapcsolja a jel\xF6lt\u0151t m\xE1sik elemhez vagy ponthoz","pinningButton":"K\xF6z\xF6s pontok \xF6sszek\xF6t\xE9se"}}'),da:JSON.parse('{"tooltips":{"placeMarker":"Tryk for at placere en mark\xF8r","firstVertex":"Tryk for at placere det f\xF8rste punkt","continueLine":"Tryk for at forts\xE6tte linjen","finishLine":"Tryk p\xE5 et eksisterende punkt for at afslutte","finishPoly":"Tryk p\xE5 det f\xF8rste punkt for at afslutte","finishRect":"Tryk for at afslutte","startCircle":"Tryk for at placere cirklens center","finishCircle":"Tryk for at afslutte cirklen","placeCircleMarker":"Tryk for at placere en cirkelmark\xF8r"},"actions":{"finish":"Afslut","cancel":"Afbryd","removeLastVertex":"Fjern sidste punkt"},"buttonTitles":{"drawMarkerButton":"Placer mark\xF8r","drawPolyButton":"Tegn polygon","drawLineButton":"Tegn linje","drawCircleButton":"Tegn cirkel","drawRectButton":"Tegn firkant","editButton":"Rediger","dragButton":"Tr\xE6k","cutButton":"Klip","deleteButton":"Fjern","drawCircleMarkerButton":"Tegn cirkelmark\xF8r","snappingButton":"Fastg\xF8r trukket mark\xF8r til andre elementer","pinningButton":"Sammenl\xE6g delte elementer"}}'),no:JSON.parse('{"tooltips":{"placeMarker":"Klikk for \xE5 plassere punkt","firstVertex":"Klikk for \xE5 plassere f\xF8rste punkt","continueLine":"Klikk for \xE5 tegne videre","finishLine":"Klikk p\xE5 et eksisterende punkt for \xE5 fullf\xF8re","finishPoly":"Klikk f\xF8rste punkt for \xE5 fullf\xF8re","finishRect":"Klikk for \xE5 fullf\xF8re","startCircle":"Klikk for \xE5 sette sirkel midtpunkt","finishCircle":"Klikk for \xE5 fullf\xF8re sirkel","placeCircleMarker":"Klikk for \xE5 plassere sirkel"},"actions":{"finish":"Fullf\xF8r","cancel":"Kanseller","removeLastVertex":"Fjern forrige punkt"},"buttonTitles":{"drawMarkerButton":"Tegn Punkt","drawPolyButton":"Tegn Flate","drawLineButton":"Tegn Linje","drawCircleButton":"Tegn Sirkel","drawRectButton":"Tegn rektangel","editButton":"Rediger Objekter","dragButton":"Dra Objekter","cutButton":"Kutt Objekter","deleteButton":"Fjern Objekter","drawCircleMarkerButton":"Tegn sirkel-punkt","snappingButton":"Fest dratt punkt til andre objekter og punkt","pinningButton":"Pin delte punkt sammen"}}'),fa:JSON.parse('{"tooltips":{"placeMarker":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u062C\u0627\u0646\u0645\u0627\u06CC\u06CC \u0646\u0634\u0627\u0646","firstVertex":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0627\u0648\u0644\u06CC\u0646 \u0631\u0623\u0633","continueLine":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0627\u062F\u0627\u0645\u0647 \u0631\u0633\u0645","finishLine":"\u06A9\u0644\u06CC\u06A9 \u0631\u0648\u06CC \u0647\u0631 \u0646\u0634\u0627\u0646 \u0645\u0648\u062C\u0648\u062F \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","finishPoly":"\u06A9\u0644\u06CC\u06A9 \u0631\u0648\u06CC \u0627\u0648\u0644\u06CC\u0646 \u0646\u0634\u0627\u0646 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","finishRect":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","startCircle":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0645\u0631\u06A9\u0632 \u062F\u0627\u06CC\u0631\u0647","finishCircle":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646 \u0631\u0633\u0645 \u062F\u0627\u06CC\u0631\u0647","placeCircleMarker":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0646\u0634\u0627\u0646 \u062F\u0627\u06CC\u0631\u0647","placeText":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0646\u0648\u0634\u062A\u0646 \u0645\u062A\u0646"},"actions":{"finish":"\u067E\u0627\u06CC\u0627\u0646","cancel":"\u0644\u0641\u0648","removeLastVertex":"\u062D\u0630\u0641 \u0622\u062E\u0631\u06CC\u0646 \u0631\u0623\u0633"},"buttonTitles":{"drawMarkerButton":"\u062F\u0631\u062C \u0646\u0634\u0627\u0646","drawPolyButton":"\u0631\u0633\u0645 \u0686\u0646\u062F\u0636\u0644\u0639\u06CC","drawLineButton":"\u0631\u0633\u0645 \u062E\u0637","drawCircleButton":"\u0631\u0633\u0645 \u062F\u0627\u06CC\u0631\u0647","drawRectButton":"\u0631\u0633\u0645 \u0686\u0647\u0627\u0631\u0636\u0644\u0639\u06CC","editButton":"\u0648\u06CC\u0631\u0627\u06CC\u0634 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","dragButton":"\u062C\u0627\u0628\u062C\u0627\u06CC\u06CC \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","cutButton":"\u0628\u0631\u0634 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","deleteButton":"\u062D\u0630\u0641 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","drawCircleMarkerButton":"\u0631\u0633\u0645 \u0646\u0634\u0627\u0646 \u062F\u0627\u06CC\u0631\u0647","snappingButton":"\u0646\u0634\u0627\u0646\u06AF\u0631 \u0631\u0627 \u0628\u0647 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627 \u0648 \u0631\u0626\u0648\u0633 \u062F\u06CC\u06AF\u0631 \u0628\u06A9\u0634\u06CC\u062F","pinningButton":"\u0631\u0626\u0648\u0633 \u0645\u0634\u062A\u0631\u06A9 \u0631\u0627 \u0628\u0627 \u0647\u0645 \u067E\u06CC\u0646 \u06A9\u0646\u06CC\u062F","rotateButton":"\u0686\u0631\u062E\u0634 \u0644\u0627\u06CC\u0647","drawTextButton":"\u0631\u0633\u0645 \u0645\u062A\u0646"}}'),ua:JSON.parse(`{"tooltips":{"placeMarker":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","firstVertex":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043F\u0435\u0440\u0448\u0443 \u0432\u0435\u0440\u0448\u0438\u043D\u0443","continueLine":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043F\u0440\u043E\u0434\u043E\u0432\u0436\u0438\u0442\u0438 \u043C\u0430\u043B\u044E\u0432\u0430\u0442\u0438","finishLine":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C \u0431\u0443\u0434\u044C-\u044F\u043A\u0438\u0439 \u0456\u0441\u043D\u0443\u044E\u0447\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043B\u044F \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043D\u044F","finishPoly":"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u043F\u0435\u0440\u0448\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","finishRect":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","startCircle":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0434\u043E\u0434\u0430\u0442\u0438 \u0446\u0435\u043D\u0442\u0440 \u043A\u043E\u043B\u0430","finishCircle":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438 \u043A\u043E\u043B\u043E","placeCircleMarker":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440"},"actions":{"finish":"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","cancel":"\u0412\u0456\u0434\u043C\u0456\u043D\u0438\u0442\u0438","removeLastVertex":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u043F\u043E\u043F\u0435\u0440\u0435\u0434\u043D\u044E \u0432\u0435\u0440\u0448\u0438\u043D\u0443"},"buttonTitles":{"drawMarkerButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","drawPolyButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043F\u043E\u043B\u0456\u0433\u043E\u043D","drawLineButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u0440\u0438\u0432\u0443","drawCircleButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u043E\u043B\u043E","drawRectButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043F\u0440\u044F\u043C\u043E\u043A\u0443\u0442\u043D\u0438\u043A","editButton":"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0448\u0430\u0440\u0438","dragButton":"\u041F\u0435\u0440\u0435\u043D\u0435\u0441\u0442\u0438 \u0448\u0430\u0440\u0438","cutButton":"\u0412\u0438\u0440\u0456\u0437\u0430\u0442\u0438 \u0448\u0430\u0440\u0438","deleteButton":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u0448\u0430\u0440\u0438","drawCircleMarkerButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440","snappingButton":"\u041F\u0440\u0438\u0432\u2019\u044F\u0437\u0430\u0442\u0438 \u043F\u0435\u0440\u0435\u0442\u044F\u0433\u043D\u0443\u0442\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043E \u0456\u043D\u0448\u0438\u0445 \u0448\u0430\u0440\u0456\u0432 \u0442\u0430 \u0432\u0435\u0440\u0448\u0438\u043D","pinningButton":"\u0417\u0432'\u044F\u0437\u0430\u0442\u0438 \u0441\u043F\u0456\u043B\u044C\u043D\u0456 \u0432\u0435\u0440\u0448\u0438\u043D\u0438 \u0440\u0430\u0437\u043E\u043C"}}`),tr:JSON.parse('{"tooltips":{"placeMarker":"\u0130\u015Faret\xE7i yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","firstVertex":"\u0130lk tepe noktas\u0131n\u0131 yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","continueLine":"\xC7izime devam etmek i\xE7in t\u0131klay\u0131n","finishLine":"Bitirmek i\xE7in mevcut herhangi bir i\u015Faret\xE7iyi t\u0131klay\u0131n","finishPoly":"Bitirmek i\xE7in ilk i\u015Faret\xE7iyi t\u0131klay\u0131n","finishRect":"Bitirmek i\xE7in t\u0131klay\u0131n","startCircle":"Daire merkezine yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","finishCircle":"Daireyi bitirmek i\xE7in t\u0131klay\u0131n","placeCircleMarker":"Daire i\u015Faret\xE7isi yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n"},"actions":{"finish":"Bitir","cancel":"\u0130ptal","removeLastVertex":"Son k\xF6\u015Feyi kald\u0131r"},"buttonTitles":{"drawMarkerButton":"\xC7izim \u0130\u015Faret\xE7isi","drawPolyButton":"\xC7okgenler \xE7iz","drawLineButton":"\xC7oklu \xE7izgi \xE7iz","drawCircleButton":"\xC7ember \xE7iz","drawRectButton":"Dikd\xF6rtgen \xE7iz","editButton":"Katmanlar\u0131 d\xFCzenle","dragButton":"Katmanlar\u0131 s\xFCr\xFCkle","cutButton":"Katmanlar\u0131 kes","deleteButton":"Katmanlar\u0131 kald\u0131r","drawCircleMarkerButton":"Daire i\u015Faret\xE7isi \xE7iz","snappingButton":"S\xFCr\xFCklenen i\u015Faret\xE7iyi di\u011Fer katmanlara ve k\xF6\u015Felere yap\u0131\u015Ft\u0131r","pinningButton":"Payla\u015F\u0131lan k\xF6\u015Feleri birbirine sabitle"}}'),cz:JSON.parse('{"tooltips":{"placeMarker":"Kliknut\xEDm vytvo\u0159\xEDte zna\u010Dku","firstVertex":"Kliknut\xEDm vytvo\u0159\xEDte prvn\xED objekt","continueLine":"Kliknut\xEDm pokra\u010Dujte v kreslen\xED","finishLine":"Kliknut\xED na libovolnou existuj\xEDc\xED zna\u010Dku pro dokon\u010Den\xED","finishPoly":"Vyberte prvn\xED bod pro dokon\u010Den\xED","finishRect":"Klikn\u011Bte pro dokon\u010Den\xED","startCircle":"Kliknut\xEDm p\u0159idejte st\u0159ed kruhu","finishCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u0434\u0430\u0442\u044C \u0440\u0430\u0434\u0438\u0443\u0441","placeCircleMarker":"Kliknut\xEDm nastavte polom\u011Br"},"actions":{"finish":"Dokon\u010Dit","cancel":"Zru\u0161it","removeLastVertex":"Zru\u0161it posledn\xED akci"},"buttonTitles":{"drawMarkerButton":"P\u0159idat zna\u010Dku","drawPolyButton":"Nakreslit polygon","drawLineButton":"Nakreslit k\u0159ivku","drawCircleButton":"Nakreslit kruh","drawRectButton":"Nakreslit obd\xE9ln\xEDk","editButton":"Upravit vrstvu","dragButton":"P\u0159eneste vrstvu","cutButton":"Vyjmout vrstvu","deleteButton":"Smazat vrstvu","drawCircleMarkerButton":"P\u0159idat kruhovou zna\u010Dku","snappingButton":"Nav\xE1zat ta\u017Enou zna\u010Dku k dal\u0161\xEDm vrstv\xE1m a vrchol\u016Fm","pinningButton":"Spojit spole\u010Dn\xE9 body dohromady"}}'),ja:JSON.parse('{"tooltips":{"placeMarker":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30DE\u30FC\u30AB\u30FC\u3092\u914D\u7F6E","firstVertex":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u6700\u521D\u306E\u9802\u70B9\u3092\u914D\u7F6E","continueLine":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u63CF\u753B\u3092\u7D9A\u3051\u308B","finishLine":"\u4EFB\u610F\u306E\u30DE\u30FC\u30AB\u30FC\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86","finishPoly":"\u6700\u521D\u306E\u30DE\u30FC\u30AB\u30FC\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86","finishRect":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86","startCircle":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u306E\u4E2D\u5FC3\u3092\u914D\u7F6E","finishCircle":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u306E\u63CF\u753B\u3092\u7D42\u4E86","placeCircleMarker":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u30DE\u30FC\u30AB\u30FC\u3092\u914D\u7F6E","placeText":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30C6\u30AD\u30B9\u30C8\u3092\u914D\u7F6E"},"actions":{"finish":"\u7D42\u4E86","cancel":"\u30AD\u30E3\u30F3\u30BB\u30EB","removeLastVertex":"\u6700\u5F8C\u306E\u9802\u70B9\u3092\u524A\u9664"},"buttonTitles":{"drawMarkerButton":"\u30DE\u30FC\u30AB\u30FC\u3092\u63CF\u753B","drawPolyButton":"\u30DD\u30EA\u30B4\u30F3\u3092\u63CF\u753B","drawLineButton":"\u6298\u308C\u7DDA\u3092\u63CF\u753B","drawCircleButton":"\u5186\u3092\u63CF\u753B","drawRectButton":"\u77E9\u5F62\u3092\u63CF\u753B","editButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u7DE8\u96C6","dragButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u30C9\u30E9\u30C3\u30B0","cutButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u5207\u308A\u53D6\u308A","deleteButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u524A\u9664","drawCircleMarkerButton":"\u5186\u30DE\u30FC\u30AB\u30FC\u3092\u63CF\u753B","snappingButton":"\u30C9\u30E9\u30C3\u30B0\u3057\u305F\u30DE\u30FC\u30AB\u30FC\u3092\u4ED6\u306E\u30EC\u30A4\u30E4\u30FC\u3084\u9802\u70B9\u306B\u30B9\u30CA\u30C3\u30D7\u3059\u308B","pinningButton":"\u5171\u6709\u3059\u308B\u9802\u70B9\u3092\u540C\u6642\u306B\u52D5\u304B\u3059","rotateButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u56DE\u8EE2","drawTextButton":"\u30C6\u30AD\u30B9\u30C8\u3092\u63CF\u753B"}}'),fi:JSON.parse('{"tooltips":{"placeMarker":"Klikkaa asettaaksesi merkin","firstVertex":"Klikkaa asettaakseni ensimm\xE4isen osuuden","continueLine":"Klikkaa jatkaaksesi piirt\xE4mist\xE4","finishLine":"Klikkaa olemassa olevaa merkki\xE4 lopettaaksesi","finishPoly":"Klikkaa ensimm\xE4ist\xE4 merkki\xE4 lopettaaksesi","finishRect":"Klikkaa lopettaaksesi","startCircle":"Klikkaa asettaaksesi ympyr\xE4n keskipisteen","finishCircle":"Klikkaa lopettaaksesi ympyr\xE4n","placeCircleMarker":"Klikkaa asettaaksesi ympyr\xE4merkin","placeText":"Klikkaa asettaaksesi tekstin"},"actions":{"finish":"Valmis","cancel":"Peruuta","removeLastVertex":"Poista viimeinen osuus"},"buttonTitles":{"drawMarkerButton":"Piirr\xE4 merkkej\xE4","drawPolyButton":"Piirr\xE4 monikulmioita","drawLineButton":"Piirr\xE4 viivoja","drawCircleButton":"Piirr\xE4 ympyr\xE4","drawRectButton":"Piirr\xE4 neliskulmioita","editButton":"Muokkaa","dragButton":"Siirr\xE4","cutButton":"Leikkaa","deleteButton":"Poista","drawCircleMarkerButton":"Piirr\xE4 ympyr\xE4merkki","snappingButton":"Kiinnit\xE4 siirrett\xE4v\xE4 merkki toisiin muotoihin","pinningButton":"Kiinnit\xE4 jaetut muodot yhteen","rotateButton":"K\xE4\xE4nn\xE4","drawTextButton":"Piirr\xE4 teksti\xE4"}}'),ko:JSON.parse('{"tooltips":{"placeMarker":"\uB9C8\uCEE4 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694","firstVertex":"\uCCAB\uBC88\uC9F8 \uAF2D\uC9C0\uC810 \uC704\uCE58\uC744 \uD074\uB9AD\uD558\uC138\uC694","continueLine":"\uACC4\uC18D \uADF8\uB9AC\uB824\uBA74 \uD074\uB9AD\uD558\uC138\uC694","finishLine":"\uB05D\uB0B4\uB824\uBA74 \uAE30\uC874 \uB9C8\uCEE4\uB97C \uD074\uB9AD\uD558\uC138\uC694","finishPoly":"\uB05D\uB0B4\uB824\uBA74 \uCC98\uC74C \uB9C8\uCEE4\uB97C \uD074\uB9AD\uD558\uC138\uC694","finishRect":"\uB05D\uB0B4\uB824\uBA74 \uD074\uB9AD\uD558\uC138\uC694","startCircle":"\uC6D0\uC758 \uC911\uC2EC\uC774 \uB420 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694","finishCircle":"\uC6D0\uC744 \uB05D\uB0B4\uB824\uBA74 \uD074\uB9AD\uD558\uC138\uC694","placeCircleMarker":"\uC6D0 \uB9C8\uCEE4 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694","placeText":"\uD14D\uC2A4\uD2B8 \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC138\uC694"},"actions":{"finish":"\uB05D\uB0B4\uAE30","cancel":"\uCDE8\uC18C","removeLastVertex":"\uB9C8\uC9C0\uB9C9 \uAF2D\uC9C0\uC810 \uC81C\uAC70"},"buttonTitles":{"drawMarkerButton":"\uB9C8\uCEE4 \uADF8\uB9AC\uAE30","drawPolyButton":"\uB2E4\uAC01\uD615 \uADF8\uB9AC\uAE30","drawLineButton":"\uB2E4\uAC01\uC120 \uADF8\uB9AC\uAE30","drawCircleButton":"\uC6D0 \uADF8\uB9AC\uAE30","drawRectButton":"\uC9C1\uC0AC\uAC01\uD615 \uADF8\uB9AC\uAE30","editButton":"\uB808\uC774\uC5B4 \uD3B8\uC9D1\uD558\uAE30","dragButton":"\uB808\uC774\uC5B4 \uB04C\uAE30","cutButton":"\uB808\uC774\uC5B4 \uC790\uB974\uAE30","deleteButton":"\uB808\uC774\uC5B4 \uC81C\uAC70\uD558\uAE30","drawCircleMarkerButton":"\uC6D0 \uB9C8\uCEE4 \uADF8\uB9AC\uAE30","snappingButton":"\uC7A1\uC544\uB048 \uB9C8\uCEE4\uB97C \uB2E4\uB978 \uB808\uC774\uC5B4 \uBC0F \uAF2D\uC9C0\uC810\uC5D0 \uB4E4\uB7EC\uBD99\uAC8C \uD558\uAE30","pinningButton":"\uACF5\uC720 \uAF2D\uC9C0\uC810\uC744 \uD568\uAED8 \uCC0D\uAE30","rotateButton":"\uB808\uC774\uC5B4 \uD68C\uC804\uD558\uAE30","drawTextButton":"\uD14D\uC2A4\uD2B8 \uADF8\uB9AC\uAE30"}}')};function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m(Object(n),!0).forEach(function(r){O(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const F={_globalEditModeEnabled:!1,enableGlobalEditMode:function(t){var e=w({},t);this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(function(n){n.pm.enable(e)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayers={},this.map.on("layeradd",this._layerAdded,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode:function(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(function(t){t.pm.disable()}),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled:function(){return this.globalEditModeEnabled()},globalEditModeEnabled:function(){return this._globalEditModeEnabled},toggleGlobalEditMode:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.globalOptions;this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(t)},handleLayerAdditionInGlobalEditMode:function(){var t=this._addedLayers;for(var e in this._addedLayers={},t){var n=t[e];this._isRelevantForEdit(n)&&this.globalEditModeEnabled()&&n.pm.enable(w({},this.globalOptions))}},_layerAdded:function(t){var e=t.layer;this._addedLayers[L.stamp(e)]=e},_isRelevantForEdit:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&t.options.pmIgnore===!1)&&!t._pmTempLayer&&t.pm.options.allowEditing}},q={_globalDragModeEnabled:!1,enableGlobalDragMode:function(){var t=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},t.forEach(function(e){e.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode:function(){var t=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,t.forEach(function(e){e.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled:function(){return!!this._globalDragModeEnabled},toggleGlobalDragMode:function(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode:function(){var t=this._addedLayersDrag;for(var e in this._addedLayersDrag={},t){var n=t[e];this._isRelevantForDrag(n)&&this.globalDragModeEnabled()&&n.pm.enableLayerDrag()}},_layerAddedDrag:function(t){var e=t.layer;this._addedLayersDrag[L.stamp(e)]=e},_isRelevantForDrag:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&t.options.pmIgnore===!1)&&!t._pmTempLayer&&t.pm.options.draggable}},H={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode:function(){var t=this;this._globalRemovalModeEnabled=!0,this.map.eachLayer(function(e){t._isRelevantForRemoval(e)&&(e.pm.disable(),e.on("click",t.removeLayer,t))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.reinitGlobalRemovalMode,100,this)),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode:function(){var t=this;this._globalRemovalModeEnabled=!1,this.map.eachLayer(function(e){e.off("click",t.removeLayer,t)}),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled:function(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled:function(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode:function(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},reinitGlobalRemovalMode:function(t){var e=t.layer;this._isRelevantForRemoval(e)&&this.globalRemovalModeEnabled()&&(this.disableGlobalRemovalMode(),this.enableGlobalRemovalMode())},removeLayer:function(t){var e=t.target;this._isRelevantForRemoval(e)&&!e.pm.dragging()&&(e.removeFrom(this.map.pm._getContainingLayer()),e.remove(),e instanceof L.LayerGroup?(this._fireRemoveLayerGroup(e),this._fireRemoveLayerGroup(this.map,e)):(e.pm._fireRemove(e),e.pm._fireRemove(this.map,e)))},_isRelevantForRemoval:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&t.options.pmIgnore===!1)&&!t._pmTempLayer&&t.pm.options.allowRemoval}},J={_globalRotateModeEnabled:!1,enableGlobalRotateMode:function(){var t=this;this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(function(e){return e instanceof L.Polyline}).forEach(function(e){t._isRelevantForRotate(e)&&e.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this._reinitGlobalRotateMode,100,this)),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode:function(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(function(t){return t instanceof L.Polyline}).forEach(function(t){t.pm.disableRotate()}),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled:function(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode:function(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_reinitGlobalRotateMode:function(t){var e=t.layer;this._isRelevantForRotate(e)&&this.globalRotateModeEnabled()&&(this.disableGlobalRotateMode(),this.enableGlobalRotateMode())},_isRelevantForRotate:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&t.options.pmIgnore===!1)&&!t._pmTempLayer&&t.pm.options.allowRotation}};function Q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Z(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q(Object(n),!0).forEach(function(r){$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ct={_fireDrawStart:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},t,e)},_fireDrawEnd:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:drawend",{shape:this._shape},t,e)},_fireCreate:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Draw",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._map,"pm:create",{shape:this._shape,marker:t,layer:t},e,n)},_fireCenterPlaced:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t==="Draw"?this._layer:void 0,r=t!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:n,layer:r,latlng:this._layer.getLatLng()},t,e)},_fireCut:function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Draw",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(t,"pm:cut",{shape:this._shape,layer:e,originalLayer:n},r,i)},_fireEdit:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._layer,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(t,"pm:edit",{layer:this._layer,shape:this.getShape()},e,n)},_fireEnable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},t,e)},_fireDisable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},t,e)},_fireUpdate:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},t,e)},_fireMarkerDragStart:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:e},n,r)},_fireMarkerDrag:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:e},n,r)},_fireMarkerDragEnd:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Edit",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:e,intersectionReset:n},r,i)},_fireDragStart:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},t,e)},_fireDrag:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:drag",Z(Z({},t),{},{shape:this.getShape()}),e,n)},_fireDragEnd:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},t,e)},_fireDragEnable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},t,e)},_fireDragDisable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},t,e)},_fireRemove:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:remove",{layer:e,shape:this.getShape()},n,r)},_fireVertexAdded:function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Edit",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:t,indexPath:e,latlng:n,shape:this.getShape()},r,i)},_fireVertexRemoved:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:t,indexPath:e,shape:this.getShape()},n,r)},_fireVertexClick:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:t,indexPath:e,shape:this.getShape()},n,r)},_fireIntersect:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:intersect",{layer:this._layer,intersection:t,shape:this.getShape()},e,n)},_fireLayerReset:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:t,indexPath:e,shape:this.getShape()},n,r)},_fireChange:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:t,shape:this.getShape()},e,n)},_fireTextChange:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:t,shape:this.getShape()},e,n)},_fireTextFocus:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},t,e)},_fireTextBlur:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},t,e)},_fireSnapDrag:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:snapdrag",e,n,r)},_fireSnap:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:snap",e,n,r)},_fireUnsnap:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:unsnap",e,n,r)},_fireRotationEnable:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Rotation",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},n,r)},_fireRotationDisable:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Rotation",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(t,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},e,n)},_fireRotationStart:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Rotation",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:e},n,r)},_fireRotation:function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:this._rotationLayer,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Rotation",p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.__fire(t,"pm:rotate",{layer:r,helpLayer:this._layer,startAngle:this._startAngle,angle:r.pm.getAngle(),angleDiff:e,oldLatLngs:n,newLatLngs:r.getLatLngs()},i,p)},_fireRotationEnd:function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Rotation",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(t,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:e,angle:this._rotationLayer.pm.getAngle(),originLatLngs:n,newLatLngs:this._rotationLayer.getLatLngs()},r,i)},_fireActionClick:function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Toolbar",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._map,"pm:actionclick",{text:t.text,action:t,btnName:e,button:n},r,i)},_fireButtonClick:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Toolbar",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._map,"pm:buttonclick",{btnName:t,button:e},n,r)},_fireLangChange:function(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Global",p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.__fire(this.map,"pm:langchange",{oldLang:t,activeLang:e,fallback:n,translations:r},i,p)},_fireGlobalDragModeToggled:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:t,map:this.map},e,n)},_fireGlobalEditModeToggled:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:t,map:this.map},e,n)},_fireGlobalRemovalModeToggled:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:t,map:this.map},e,n)},_fireGlobalCutModeToggled:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},t,e)},_fireGlobalDrawModeToggled:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},t,e)},_fireGlobalRotateModeToggled:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},t,e)},_fireRemoveLayerGroup:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:remove",{layer:e,shape:void 0},n,r)},_fireKeyeventEvent:function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Global",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this.map,"pm:keyevent",{event:t,eventType:e,focusOn:n},r,i)},__fire:function(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};n=s()(n,i,{source:r}),L.PM.Utils._fireEvent(t,e,n)}};const tt=ct,ht={_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener:function(t){this.map=t,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this)},_onKeyListener:function(t){var e="document";this.map.getContainer().contains(t.target)&&(e="map");var n={event:t,eventType:t.type,focusOn:e};this._lastEvents[t.type]=n,this._lastEvents.current=n,this.map.pm._fireKeyeventEvent(t,t.type,e)},_onBlur:function(t){t.altKey=!1;var e={event:t,eventType:t.type,focusOn:"document"};this._lastEvents[t.type]=e,this._lastEvents.current=e},getLastKeyEvent:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"current";return this._lastEvents[t]},isShiftKeyPressed:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.shiftKey},isAltKeyPressed:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.altKey},isCtrlKeyPressed:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.ctrlKey},isMetaKeyPressed:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.metaKey},getPressedKey:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.key}};var _t=o(7361),pt=o.n(_t),vt=o(8721),Ot=o.n(vt);function st(t){var e=L.PM.activeLang;return Ot()(B,e)||(e="en"),pt()(B[e],t)}function gt(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(Array.isArray(n)){if(gt(n))return!0}else if(n!=null&&n!=="")return!0}return!1}function Yt(t){return t.reduce(function(e,n){if(n.length!==0){var r=Array.isArray(n)?Yt(n):n;Array.isArray(r)?r.length!==0&&e.push(r):e.push(r)}return e},[])}function Xt(t,e,n){for(var r,i,p,_=6378137,v=63567523142e-4,y=.0033528106647474805,M=t.lng,D=t.lat,G=n,j=Math.PI,V=e*j/180,Y=Math.sin(V),nt=Math.cos(V),at=(1-y)*Math.tan(D*j/180),ft=1/Math.sqrt(1+at*at),Lt=at*ft,dt=Math.atan2(at,nt),wt=ft*Y,Rt=1-wt*wt,Vt=Rt*(_*_-v*v)/(v*v),$e=1+Vt/16384*(4096+Vt*(Vt*(320-175*Vt)-768)),Se=Vt/1024*(256+Vt*(Vt*(74-47*Vt)-128)),Jt=G/(v*$e),We=2*Math.PI;Math.abs(Jt-We)>1e-12;)r=Math.cos(2*dt+Jt),We=Jt,Jt=G/(v*$e)+Se*(i=Math.sin(Jt))*(r+Se/4*((p=Math.cos(Jt))*(2*r*r-1)-Se/6*r*(4*i*i-3)*(4*r*r-3)));var Qe=Lt*i-ft*p*nt,Nn=Math.atan2(Lt*p+ft*i*nt,(1-y)*Math.sqrt(wt*wt+Qe*Qe)),Oe=y/16*Rt*(4+y*(4-3*Rt)),zn=M+180*(Math.atan2(i*Y,ft*p-Lt*i*nt)-(1-Oe)*y*wt*(Jt+Oe*i*(r+Oe*p*(2*r*r-1))))/j,Fn=180*Nn/j;return L.latLng(zn,Fn)}function $t(t,e,n,r){for(var i,p,_=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],v=[],y=0;y<n;y+=1){if(_)i=Xt(t,360*y/n+r,e),p=L.latLng(i.lng,i.lat);else{var M=t.lat+Math.cos(2*y*Math.PI/n)*e,D=t.lng+Math.sin(2*y*Math.PI/n)*e;p=L.latLng(M,D)}v.push(p)}return v}function It(t,e,n,r){var i=function(p,_,v){var y=p.latLngToContainerPoint(_),M=p.latLngToContainerPoint(v),D=180*Math.atan2(M.y-y.y,M.x-y.x)/Math.PI+90;return D+(D<0?360:0)}(t,e,n);return function(p,_,v){_=(_+360)%360;var y=Math.PI/180,M=180/Math.PI,D=6378137,G=p.lng*y,j=p.lat*y,V=_*y,Y=Math.sin(j),nt=Math.cos(j),at=Math.cos(v/D),ft=Math.sin(v/D),Lt=Math.asin(Y*at+nt*ft*Math.cos(V)),dt=G+Math.atan2(Math.sin(V)*ft*nt,at-Y*Math.sin(Lt));return dt=(dt*=M)>180?dt-360:dt<-180?dt+360:dt,L.latLng([Lt*M,dt])}(e,i,r)}function ae(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"asc";if(!e||Object.keys(e).length===0)return function(y,M){return y-M};for(var r,i=Object.keys(e),p=i.length-1,_={};p>=0;)r=i[p],_[r.toLowerCase()]=e[r],p-=1;function v(y){return y instanceof L.Marker?"Marker":y instanceof L.Circle?"Circle":y instanceof L.CircleMarker?"CircleMarker":y instanceof L.Rectangle?"Rectangle":y instanceof L.Polygon?"Polygon":y instanceof L.Polyline?"Line":void 0}return function(y,M){var D,G;if(t==="instanceofShape"){if(D=v(y.layer).toLowerCase(),G=v(M.layer).toLowerCase(),!D||!G)return 0}else{if(!y.hasOwnProperty(t)||!M.hasOwnProperty(t))return 0;D=y[t].toLowerCase(),G=M[t].toLowerCase()}var j=D in _?_[D]:Number.MAX_SAFE_INTEGER,V=G in _?_[G]:Number.MAX_SAFE_INTEGER,Y=0;return j<V?Y=-1:j>V&&(Y=1),n==="desc"?-1*Y:Y}}function jt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.getLatLngs();return t instanceof L.Polygon?L.polygon(e).getLatLngs():L.polyline(e).getLatLngs()}function Wt(t,e){var n,r;if((n=e.options.crs)!==null&&n!==void 0&&(r=n.projection)!==null&&r!==void 0&&r.MAX_LATITUDE){var i,p,_=(i=e.options.crs)===null||i===void 0||(p=i.projection)===null||p===void 0?void 0:p.MAX_LATITUDE;t.lat=Math.max(Math.min(_,t.lat),-_)}return t}function Ft(t){return t.options.renderer||t._map&&(t._map._getPaneRenderer(t.options.pane)||t._map.options.renderer||t._map._renderer)||t._renderer}const fe=L.Class.extend({includes:[F,q,H,J,tt],initialize:function(t){this.map=t,this.Draw=new L.PM.Draw(t),this.Toolbar=new L.PM.Toolbar(t),this.Keyboard=ht,this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(t)},setLang:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"en",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"en",r=L.PM.activeLang;e&&(B[t]=s()(B[n],e)),L.PM.activeLang=t,this.map.pm.Toolbar.reinit(),this._fireLangChange(r,t,n,B[t])},addControls:function(t){this.Toolbar.addControls(t)},removeControls:function(){this.Toolbar.removeControls()},toggleControls:function(){this.Toolbar.toggleControls()},controlsVisible:function(){return this.Toolbar.isVisible},enableDraw:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Polygon",e=arguments.length>1?arguments[1]:void 0;t==="Poly"&&(t="Polygon"),this.Draw.enable(t,e)},disableDraw:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Polygon";t==="Poly"&&(t="Polygon"),this.Draw.disable(t)},setPathOptions:function(t){var e=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.ignoreShapes||[],i=n.merge||!1;this.map.pm.Draw.shapes.forEach(function(p){r.indexOf(p)===-1&&e.map.pm.Draw[p].setPathOptions(t,i)})},getGlobalOptions:function(){return this.globalOptions},setGlobalOptions:function(t){var e=this,n=s()(this.globalOptions,t),r=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.editable!=!!n.editable&&(this.map.pm.Draw.CircleMarker.disable(),r=!0),this.map.pm.Draw.shapes.forEach(function(i){e.map.pm.Draw[i].setOptions(n)}),r&&this.map.pm.Draw.CircleMarker.enable(),L.PM.Utils.findLayers(this.map).forEach(function(i){i.pm.setOptions(n)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=n,this.applyGlobalOptions()},applyGlobalOptions:function(){L.PM.Utils.findLayers(this.map).forEach(function(t){t.pm.enabled()&&t.pm.applyOptions()})},globalDrawModeEnabled:function(){return!!this.Draw.getActiveShape()},globalCutModeEnabled:function(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode:function(t){return this.Draw.Cut.enable(t)},toggleGlobalCutMode:function(t){return this.Draw.Cut.toggle(t)},disableGlobalCutMode:function(){return this.Draw.Cut.disable()},getGeomanLayers:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=L.PM.Utils.findLayers(this.map);if(!t)return e;var n=L.featureGroup();return n._pmTempLayer=!0,e.forEach(function(r){n.addLayer(r)}),n},getGeomanDrawLayers:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=L.PM.Utils.findLayers(this.map).filter(function(r){return r._drawnByGeoman===!0});if(!t)return e;var n=L.featureGroup();return n._pmTempLayer=!0,e.forEach(function(r){n.addLayer(r)}),n},_getContainingLayer:function(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple:function(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents:function(t){this._touchEventCounter===0&&(L.DomEvent.on(t,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(t,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents:function(t){this._touchEventCounter===1&&(L.DomEvent.off(t,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(t,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove:function(t){Ft(this.map)._onMouseMove(this._createMouseEvent("mousemove",t))},_canvasTouchClick:function(t){var e="";t.type==="touchstart"||t.type==="pointerdown"?e="mousedown":t.type==="touchend"||t.type==="pointerup"?e="mouseup":t.type!=="touchcancel"&&t.type!=="pointercancel"||(e="mouseup"),e&&Ft(this.map)._onClick(this._createMouseEvent(e,t))},_createMouseEvent:function(t,e){var n,r=e.touches[0]||e.changedTouches[0];try{n=new MouseEvent(t,{bubbles:e.bubbles,cancelable:e.cancelable,view:e.view,detail:r.detail,screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,button:e.button,relatedTarget:e.relatedTarget})}catch{(n=document.createEvent("MouseEvents")).initMouseEvent(t,e.bubbles,e.cancelable,e.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}return n}}),oe=L.Control.extend({includes:[tt],options:{position:"topleft",disableByOtherButtons:!0},initialize:function(t){this._button=L.Util.extend({},this.options,t)},onAdd:function(t){return this._map=t,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this.buttonsDomNode=this._makeButton(this._button),this._container.appendChild(this.buttonsDomNode),this._container},onRemove:function(){return this.buttonsDomNode.remove(),this._container},getText:function(){return this._button.text},getIconUrl:function(){return this._button.iconUrl},destroy:function(){this._button={},this._update()},toggle:function(t){return this._button.toggleStatus=typeof t=="boolean"?t:!this._button.toggleStatus,this._applyStyleClasses(),this._button.toggleStatus},toggled:function(){return this._button.toggleStatus},onCreate:function(){this.toggle(!1)},disable:function(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable:function(){this._button.disabled=!1,this._updateDisabled()},_triggerClick:function(t){t&&t.preventDefault(),this._button.disabled||(this._button.onClick(t,{button:this,event:t}),this._clicked(t),this._button.afterClick(t,{button:this,event:t}))},_makeButton:function(t){var e=this,n=this.options.position.indexOf("right")>-1?"pos-right":"",r=L.DomUtil.create("div","button-container  ".concat(n),this._container);t.title&&r.setAttribute("title",t.title);var i=L.DomUtil.create("a","leaflet-buttons-control-button",r);i.setAttribute("role","button"),i.setAttribute("tabindex","0"),i.href="#";var p=L.DomUtil.create("div","leaflet-pm-actions-container ".concat(n),r),_=t.actions,v={cancel:{text:st("actions.cancel"),onClick:function(){this._triggerClick()}},finishMode:{text:st("actions.finish"),onClick:function(){this._triggerClick()}},removeLastVertex:{text:st("actions.removeLastVertex"),onClick:function(){this._map.pm.Draw[t.jsClass]._removeLastVertex()}},finish:{text:st("actions.finish"),onClick:function(M){this._map.pm.Draw[t.jsClass]._finishShape(M)}}};_.forEach(function(M){var D,G=typeof M=="string"?M:M.name;if(v[G])D=v[G];else{if(!M.text)return;D=M}var j=L.DomUtil.create("a","leaflet-pm-action ".concat(n," action-").concat(G),p);j.setAttribute("role","button"),j.setAttribute("tabindex","0"),j.href="#",j.innerHTML=D.text,L.DomEvent.disableClickPropagation(j),L.DomEvent.on(j,"click",L.DomEvent.stop),!t.disabled&&D.onClick&&(L.DomEvent.addListener(j,"click",function(V){V.preventDefault();var Y="",nt=e._map.pm.Toolbar.buttons;for(var at in nt)if(nt[at]._button===t){Y=at;break}e._fireActionClick(D,Y,t)},e),L.DomEvent.addListener(j,"click",D.onClick,e))}),t.toggleStatus&&L.DomUtil.addClass(r,"active");var y=L.DomUtil.create("div","control-icon",i);return t.iconUrl&&y.setAttribute("src",t.iconUrl),t.className&&L.DomUtil.addClass(y,t.className),L.DomEvent.disableClickPropagation(i),L.DomEvent.on(i,"click",L.DomEvent.stop),t.disabled||(L.DomEvent.addListener(i,"click",this._onBtnClick,this),L.DomEvent.addListener(i,"click",this._triggerClick,this)),t.disabled&&(L.DomUtil.addClass(i,"pm-disabled"),i.setAttribute("aria-disabled","true")),r},_applyStyleClasses:function(){this._container&&(this._button.toggleStatus&&this._button.cssToggle!==!1?(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")):(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")))},_onBtnClick:function(){this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);var t="",e=this._map.pm.Toolbar.buttons;for(var n in e)if(e[n]._button===this._button){t=n;break}this._fireButtonClick(t,this._button)},_clicked:function(){this._button.doToggle&&this.toggle()},_updateDisabled:function(){if(this._container){var t="pm-disabled",e=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(e,t),e.setAttribute("aria-disabled","true"),L.DomEvent.off(e,"click",this._triggerClick,this),L.DomEvent.off(e,"click",this._onBtnClick,this)):(L.DomUtil.removeClass(e,t),e.setAttribute("aria-disabled","false"),L.DomEvent.on(e,"click",this._triggerClick,this),L.DomEvent.on(e,"click",this._onBtnClick,this))}}});function se(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?se(Object(n),!0).forEach(function(r){ge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ge(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qt(t){return Qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(t)}L.Control.PMButton=oe;const me=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize:function(t){this.init(t)},reinit:function(){var t=this.isVisible;this.removeControls(),this._defineButtons(),t&&this.addControls()},init:function(t){this.map=t,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer:function(t){var e="".concat(t,"Container");return this[e]||(this[e]=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-".concat(t," leaflet-bar leaflet-control"))),this[e]},getButtons:function(){return this.buttons},addControls:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options;typeof t.editPolygon!="undefined"&&(t.editMode=t.editPolygon),typeof t.deleteLayer!="undefined"&&(t.removalMode=t.deleteLayer),L.Util.setOptions(this,t),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle:function(){var t=this.getButtons(),e={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(var n in t){var r=t[n];L.Util.setOptions(r,{className:e.geomanIcons[n]})}},removeControls:function(){var t=this.getButtons();for(var e in t)t[e].remove();this.isVisible=!1},toggleControls:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options;this.isVisible?this.removeControls():this.addControls(t)},_addButton:function(t,e){return this.buttons[t]=e,this.options[t]=this.options[t]||!1,this.buttons[t]},triggerClickOnToggledButtons:function(t){for(var e in this.buttons){var n=this.buttons[e];n._button.disableByOtherButtons&&n!==t&&n.toggled()&&n._triggerClick()}},toggleButton:function(t,e){var n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return t==="editPolygon"&&(t="editMode"),t==="deleteLayer"&&(t="removalMode"),n&&this.triggerClickOnToggledButtons(this.buttons[t]),!!this.buttons[t]&&this.buttons[t].toggle(e)},_defineButtons:function(){var t=this,e={className:"control-icon leaflet-pm-icon-marker",title:st("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:function(){},afterClick:function(V,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},n={title:st("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:function(){},afterClick:function(V,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},r={className:"control-icon leaflet-pm-icon-polyline",title:st("buttonTitles.drawLineButton"),jsClass:"Line",onClick:function(){},afterClick:function(V,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},i={title:st("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:function(){},afterClick:function(V,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},p={title:st("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:function(){},afterClick:function(V,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},_={title:st("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:function(){},afterClick:function(V,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},v={title:st("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},y={title:st("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},M={title:st("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:function(){},afterClick:function(V,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},D={title:st("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},G={title:st("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},j={className:"control-icon leaflet-pm-icon-text",title:st("buttonTitles.drawTextButton"),jsClass:"Text",onClick:function(){},afterClick:function(V,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(e)),this._addButton("drawPolyline",new L.Control.PMButton(r)),this._addButton("drawRectangle",new L.Control.PMButton(_)),this._addButton("drawPolygon",new L.Control.PMButton(n)),this._addButton("drawCircle",new L.Control.PMButton(i)),this._addButton("drawCircleMarker",new L.Control.PMButton(p)),this._addButton("drawText",new L.Control.PMButton(j)),this._addButton("editMode",new L.Control.PMButton(v)),this._addButton("dragMode",new L.Control.PMButton(y)),this._addButton("cutPolygon",new L.Control.PMButton(M)),this._addButton("removalMode",new L.Control.PMButton(D)),this._addButton("rotateMode",new L.Control.PMButton(G))},_showHideButtons:function(){if(this.isVisible){this.removeControls(),this.isVisible=!0;var t=this.getButtons(),e=[];for(var n in this.options.drawControls===!1&&(e=e.concat(Object.keys(t).filter(function(i){return!t[i]._button.tool}))),this.options.editControls===!1&&(e=e.concat(Object.keys(t).filter(function(i){return t[i]._button.tool==="edit"}))),this.options.optionsControls===!1&&(e=e.concat(Object.keys(t).filter(function(i){return t[i]._button.tool==="options"}))),this.options.customControls===!1&&(e=e.concat(Object.keys(t).filter(function(i){return t[i]._button.tool==="custom"}))),t)if(this.options[n]&&e.indexOf(n)===-1){var r=t[n]._button.tool;r||(r="draw"),t[n].setPosition(this._getBtnPosition(r)),t[n].addTo(this.map)}}},_getBtnPosition:function(t){return this.options.positions&&this.options.positions[t]?this.options.positions[t]:this.options.position},setBlockPosition:function(t,e){this.options.positions[t]=e,this._showHideButtons(),this.changeControlOrder()},getBlockPositions:function(){return this.options.positions},copyDrawControl:function(t,e){if(!e)throw new TypeError("Button has no name");Qt(e)!=="object"&&(e={name:e});var n=this._btnNameMapping(t);if(!e.name)throw new TypeError("Button has no name");if(this.buttons[e.name])throw new TypeError("Button with this name already exists");var r=this.map.pm.Draw.createNewDrawInstance(e.name,n);return e=Dt(Dt({},this.buttons[n]._button),e),{drawInstance:r,control:this.createCustomControl(e)}},createCustomControl:function(t){var e,n;if(!t.name)throw new TypeError("Button has no name");if(this.buttons[t.name])throw new TypeError("Button with this name already exists");t.onClick||(t.onClick=function(){}),t.afterClick||(t.afterClick=function(){}),t.toggle!==!1&&(t.toggle=!0),t.block&&(t.block=t.block.toLowerCase()),t.block&&t.block!=="draw"||(t.block=""),t.className?t.className.indexOf("control-icon")===-1&&(t.className="control-icon ".concat(t.className)):t.className="control-icon";var r={tool:t.block,className:t.className,title:t.title||"",jsClass:t.name,onClick:t.onClick,afterClick:t.afterClick,doToggle:t.toggle,toggleStatus:!1,disableOtherButtons:(e=t.disableOtherButtons)===null||e===void 0||e,disableByOtherButtons:(n=t.disableByOtherButtons)===null||n===void 0||n,cssToggle:t.toggle,position:this.options.position,actions:t.actions||[],disabled:!!t.disabled};this.options[t.name]!==!1&&(this.options[t.name]=!0);var i=this._addButton(t.name,new L.Control.PMButton(r));return this.changeControlOrder(),i},changeControlOrder:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=this._shapeMapping(),n=[];t.forEach(function(M){e[M]?n.push(e[M]):n.push(M)});var r=this.getButtons(),i={};n.forEach(function(M){r[M]&&(i[M]=r[M])});var p=Object.keys(r).filter(function(M){return!r[M]._button.tool});p.forEach(function(M){n.indexOf(M)===-1&&(i[M]=r[M])});var _=Object.keys(r).filter(function(M){return r[M]._button.tool==="edit"});_.forEach(function(M){n.indexOf(M)===-1&&(i[M]=r[M])});var v=Object.keys(r).filter(function(M){return r[M]._button.tool==="options"});v.forEach(function(M){n.indexOf(M)===-1&&(i[M]=r[M])});var y=Object.keys(r).filter(function(M){return r[M]._button.tool==="custom"});y.forEach(function(M){n.indexOf(M)===-1&&(i[M]=r[M])}),Object.keys(r).forEach(function(M){n.indexOf(M)===-1&&(i[M]=r[M])}),this.map.pm.Toolbar.buttons=i,this._showHideButtons()},getControlOrder:function(){var t=this.getButtons(),e=[];for(var n in t)e.push(n);return e},changeActionsOfControl:function(t,e){var n=this._btnNameMapping(t);if(!n)throw new TypeError("No name passed");if(!e)throw new TypeError("No actions passed");if(!this.buttons[n])throw new TypeError("Button with this name not exists");this.buttons[n]._button.actions=e,this.changeControlOrder()},setButtonDisabled:function(t,e){var n=this._btnNameMapping(t);e?this.buttons[n].disable():this.buttons[n].enable()},_shapeMapping:function(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping:function(t){var e=this._shapeMapping();return e[t]?e[t]:t}});function le(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?le(Object(n),!0).forEach(function(r){a(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l={_initSnappableMarkers:function(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents:function(t){var e=this;t.forEach(function(n){Array.isArray(n)?e._assignEvents(n):(n.off("drag",e._handleSnapping,e),n.on("drag",e._handleSnapping,e),n.off("dragend",e._cleanupSnapping,e),n.on("dragend",e._cleanupSnapping,e))})},_cleanupSnapping:function(t){t&&(t.target._snapped=!1),delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("pm:remove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(function(e){e.remove()})},_handleThrottleSnapping:function(){this.throttledList&&this._createSnapList()},_handleSnapping:function(t){var e=this,n=t.target;if(n._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),this._map.pm.Keyboard.isAltKeyPressed()||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;var r=this._calcClosestLayer(n.getLatLng(),this._snapList);if(Object.keys(r).length===0)return!1;var i,p=r.layer instanceof L.Marker||r.layer instanceof L.CircleMarker||!this.options.snapSegment;i=p?r.latlng:this._checkPrioritiySnapping(r);var _=this.options.snapDistance,v={marker:n,shape:this._shape,snapLatLng:i,segment:r.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:r.layer,distance:r.distance};if(this._fireSnapDrag(v.marker,v),this._fireSnapDrag(this._layer,v),r.distance<_){n._orgLatLng=n.getLatLng(),n.setLatLng(i),n._snapped=!0,n._snapInfo=v;var y=this._snapLatLng||{},M=i||{};y.lat===M.lat&&y.lng===M.lng||(e._snapLatLng=i,e._fireSnap(n,v),e._fireSnap(e._layer,v))}else this._snapLatLng&&(this._unsnap(v),n._snapped=!1,n._snapInfo=void 0,this._fireUnsnap(v.marker,v),this._fireUnsnap(this._layer,v));return!0},_createSnapList:function(){var t=this,e=[],n=[],r=this._map;r.off("pm:remove",this._handleSnapLayerRemoval,this),r.on("pm:remove",this._handleSnapLayerRemoval,this),r.eachLayer(function(i){if((i instanceof L.Polyline||i instanceof L.Marker||i instanceof L.CircleMarker||i instanceof L.ImageOverlay)&&i.options.snapIgnore!==!0){if(i.options.snapIgnore===void 0&&(!L.PM.optIn&&i.options.pmIgnore===!0||L.PM.optIn&&i.options.pmIgnore!==!1))return;(i instanceof L.Circle||i instanceof L.CircleMarker)&&i.pm&&i.pm._hiddenPolyCircle?e.push(i.pm._hiddenPolyCircle):i instanceof L.ImageOverlay&&(i=L.rectangle(i.getBounds())),e.push(i);var p=L.polyline([],{color:"red",pmIgnore:!0});p._pmTempLayer=!0,n.push(p),(i instanceof L.Circle||i instanceof L.CircleMarker)&&n.push(p)}}),e=(e=(e=e.filter(function(i){return t._layer!==i})).filter(function(i){return i._latlng||i._latlngs&&gt(i._latlngs)})).filter(function(i){return!i._pmTempLayer}),this._otherSnapLayers?(this._otherSnapLayers.forEach(function(){var i=L.polyline([],{color:"red",pmIgnore:!0});i._pmTempLayer=!0,n.push(i)}),this._snapList=e.concat(this._otherSnapLayers)):this._snapList=e,this.debugIndicatorLines=n},_handleSnapLayerRemoval:function(t){var e=t.layer,n=this._snapList.findIndex(function(r){return r._leaflet_id===e._leaflet_id});this._snapList.splice(n,1)},_calcClosestLayer:function(t,e){return this._calcClosestLayers(t,e,1)[0]},_calcClosestLayers:function(t,e){var n=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=[],p={};e.forEach(function(v,y){if(!v._parentCopy||v._parentCopy!==n._layer){var M=n._calcLayerDistances(t,v);if(M.distance=Math.floor(M.distance),n.debugIndicatorLines){if(!n.debugIndicatorLines[y]){var D=L.polyline([],{color:"red",pmIgnore:!0});D._pmTempLayer=!0,n.debugIndicatorLines[y]=D}n.debugIndicatorLines[y].setLatLngs([t,M.latlng])}r===1&&(p.distance===void 0||M.distance<=p.distance)?(M.distance<p.distance&&(i=[]),(p=M).layer=v,i.push(p)):r!==1&&(p={},(p=M).layer=v,i.push(p))}}),r!==1&&(i=i.sort(function(v,y){return v.distance-y.distance})),r===-1&&(r=i.length);var _=this._getClosestLayerByPriority(i,r);return L.Util.isArray(_)?_:[_]},_calcLayerDistances:function(t,e){var n=this._map,r=e instanceof L.Marker||e instanceof L.CircleMarker,i=e instanceof L.Polygon,p=t;if(r){var _=e.getLatLng();return{latlng:b({},_),distance:this._getDistance(n,_,p)}}return this._calcLatLngDistances(p,e.getLatLngs(),n,i)},_calcLatLngDistances:function(t,e,n){var r,i,p,_=this,v=arguments.length>3&&arguments[3]!==void 0&&arguments[3],y=function D(G){G.forEach(function(j,V){if(Array.isArray(j))D(j);else if(_.options.snapSegment){var Y,nt=j;Y=v?V+1===G.length?0:V+1:V+1===G.length?void 0:V+1;var at=G[Y];if(at){var ft=_._getDistanceToSegment(n,t,nt,at);(i===void 0||ft<i)&&(i=ft,p=[nt,at])}}else{var Lt=_._getDistance(n,t,j);(i===void 0||Lt<i)&&(i=Lt,r=j)}})};if(y(e),this.options.snapSegment){var M=this._getClosestPointOnSegment(n,t,p[0],p[1]);return{latlng:b({},M),segment:p,distance:i}}return{latlng:r,distance:i}},_getClosestLayerByPriority:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;t=t.sort(function(_,v){return _._leaflet_id-v._leaflet_id});var n=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],r=this._map.pm.globalOptions.snappingOrder||[],i=0,p={};return r.concat(n).forEach(function(_){p[_]||(i+=1,p[_]=i)}),t.sort(ae("instanceofShape",p)),e===1?t[0]||{}:t.slice(0,e)},_checkPrioritiySnapping:function(t){var e=this._map,n=t.segment[0],r=t.segment[1],i=t.latlng,p=this._getDistance(e,n,i),_=this._getDistance(e,r,i),v=p<_?n:r,y=p<_?p:_;if(this.options.snapMiddle){var M=L.PM.Utils.calcMiddleLatLng(e,n,r),D=this._getDistance(e,M,i);D<p&&D<_&&(v=M,y=D)}return b({},y<this.options.snapDistance?v:i)},_unsnap:function(){delete this._snapLatLng},_getClosestPointOnSegment:function(t,e,n,r){var i=t.getMaxZoom();i===1/0&&(i=t.getZoom());var p=t.project(e,i),_=t.project(n,i),v=t.project(r,i),y=L.LineUtil.closestPointOnSegment(p,_,v);return t.unproject(y,i)},_getDistanceToSegment:function(t,e,n,r){var i=t.latLngToLayerPoint(e),p=t.latLngToLayerPoint(n),_=t.latLngToLayerPoint(r);return L.LineUtil.pointToSegmentDistance(i,p,_)},_getDistance:function(t,e,n){return t.latLngToLayerPoint(e).distanceTo(t.latLngToLayerPoint(n))}};const g=l,k=L.Class.extend({includes:[g,tt],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,editable:!1,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1},setOptions:function(t){L.Util.setOptions(this,t),this.setStyle(this.options)},setStyle:function(){},getOptions:function(){return this.options},initialize:function(t){var e=this,n=new L.Icon.Default;n.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=n,this._map=t,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(function(r){e[r]=new L.PM.Draw[r](e._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions:function(t){var e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.options.pathOptions=e?s()(this.options.pathOptions,t):t},getShapes:function(){return this.shapes},getShape:function(){return this._shape},enable:function(t,e){if(!t)throw new Error("Error: Please pass a shape as a parameter. Possible shapes are: ".concat(this.getShapes().join(",")));this.disable(),this[t].enable(e)},disable:function(){var t=this;this.shapes.forEach(function(e){t[e].disable()})},addControls:function(){var t=this;this.shapes.forEach(function(e){t[e].addButton()})},getActiveShape:function(){var t,e=this;return this.shapes.forEach(function(n){e[n]._enabled&&(t=n)}),t},_setGlobalDrawMode:function(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();var t=L.PM.Utils.findLayers(this._map);this._enabled?t.forEach(function(e){L.PM.Utils.disablePopup(e)}):t.forEach(function(e){L.PM.Utils.enablePopup(e)})},createNewDrawInstance:function(t,e){var n=this._getShapeFromBtnName(e);if(this[t])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[n])throw new TypeError("There is no class L.PM.Draw.".concat(n));return this[t]=new L.PM.Draw[n](this._map),this[t].toolbarButtonName=t,this[t]._shape=t,this.shapes.push(t),this[e]&&this[t].setOptions(this[e].options),this[t].setOptions(this[t].options),this[t]},_getShapeFromBtnName:function(t){var e={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return e[t]?e[t]:this[t]?this[t]._shape:t},_finishLayer:function(t){t.pm&&(t.pm.setOptions(this.options),t.pm._shape=this._shape,t.pm._map=this._map),this._addDrawnLayerProp(t)},_addDrawnLayerProp:function(t){t._drawnByGeoman=!0},_setPane:function(t,e){e==="layerPane"?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":e==="vertexPane"?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":e==="markerPane"&&(t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer:function(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}});k.Marker=k.extend({initialize:function(t){this._map=t,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable:function(t){var e=this;L.Util.setOptions(this,t),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(st("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(function(n){e.isRelevantMarker(n)&&n.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var t=this;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(function(e){t.isRelevantMarker(e)&&e.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},isRelevantMarker:function(t){return t instanceof L.Marker&&t.pm&&!t._pmTempLayer&&!t.pm._initTextMarker},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker:function(t){if(t.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),n=new L.Marker(e,this.options.markerStyle);this._setPane(n,"markerPane"),this._finishLayer(n),n.pm||(n.options.draggable=!1),n.addTo(this._map.pm._getContainingLayer()),n.pm&&this.options.markerEditable?n.pm.enable():n.dragging&&n.dragging.disable(),this._fireCreate(n),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},setStyle:function(){var t,e;(t=this.options.markerStyle)!==null&&t!==void 0&&t.icon&&((e=this._hintMarker)===null||e===void 0||e.setIcon(this.options.markerStyle.icon))}});var C=63710088e-1,N={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260511392e-6,inches:39.37*C,kilometers:6371.0088,kilometres:6371.0088,meters:C,metres:C,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:C/1852,radians:1,yards:6967335223679999e-9};function z(t,e,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function K(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!yt(t[0])||!yt(t[1]))throw new Error("coordinates must contain numbers");return z({type:"Point",coordinates:t},e,n)}function et(t,e,n){if(n===void 0&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return z({type:"LineString",coordinates:t},e,n)}function it(t,e){e===void 0&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function ut(t,e){e===void 0&&(e="kilometers");var n=N[e];if(!n)throw new Error(e+" units is invalid");return t*n}function lt(t,e){e===void 0&&(e="kilometers");var n=N[e];if(!n)throw new Error(e+" units is invalid");return t/n}function mt(t){return 180*(t%(2*Math.PI))/Math.PI}function ot(t){return t%360*Math.PI/180}function yt(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function bt(t){var e,n,r={type:"FeatureCollection",features:[]};if((n=t.type==="Feature"?t.geometry:t).type==="LineString")e=[n.coordinates];else if(n.type==="MultiLineString")e=n.coordinates;else if(n.type==="MultiPolygon")e=[].concat.apply([],n.coordinates);else{if(n.type!=="Polygon")throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach(function(i){e.forEach(function(p){for(var _=0;_<i.length-1;_++)for(var v=_;v<p.length-1;v++)if(!(i===p&&(Math.abs(_-v)===1||_===0&&v===i.length-2&&i[_][0]===i[i.length-1][0]&&i[_][1]===i[i.length-1][1]))){var y=Mt(i[_][0],i[_][1],i[_+1][0],i[_+1][1],p[v][0],p[v][1],p[v+1][0],p[v+1][1]);y&&r.features.push(K([y[0],y[1]]))}})}),r}function Mt(t,e,n,r,i,p,_,v){var y,M,D,G,j={x:null,y:null,onLine1:!1,onLine2:!1};return(y=(v-p)*(n-t)-(_-i)*(r-e))===0?j.x!==null&&j.y!==null&&j:(G=(n-t)*(M=e-p)-(r-e)*(D=t-i),M=((_-i)*M-(v-p)*D)/y,D=G/y,j.x=t+M*(n-t),j.y=e+M*(r-e),M>=0&&M<=1&&(j.onLine1=!0),D>=0&&D<=1&&(j.onLine2=!0),!(!j.onLine1||!j.onLine2)&&[j.x,j.y])}function Ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ct(Object(n),!0).forEach(function(r){Et(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Et(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function At(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nt(Object(n),!0).forEach(function(r){Bt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tt(Object(n),!0).forEach(function(r){Kt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function St(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function xt(t){if(Array.isArray(t))return t;if(t.type==="Feature"){if(t.geometry!==null)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Ut(t){return t.type==="Feature"?t.geometry:t}function Ie(t,e){return t.type==="FeatureCollection"?"FeatureCollection":t.type==="GeometryCollection"?"GeometryCollection":t.type==="Feature"&&t.geometry!==null?t.geometry.type:t.type}function _e(t,e,n){if(t!==null)for(var r,i,p,_,v,y,M,D,G=0,j=0,V=t.type,Y=V==="FeatureCollection",nt=V==="Feature",at=Y?t.features.length:1,ft=0;ft<at;ft++){v=(D=!!(M=Y?t.features[ft].geometry:nt?t.geometry:t)&&M.type==="GeometryCollection")?M.geometries.length:1;for(var Lt=0;Lt<v;Lt++){var dt=0,wt=0;if((_=D?M.geometries[Lt]:M)!==null){y=_.coordinates;var Rt=_.type;switch(G=!n||Rt!=="Polygon"&&Rt!=="MultiPolygon"?0:1,Rt){case null:break;case"Point":if(e(y,j,ft,dt,wt)===!1)return!1;j++,dt++;break;case"LineString":case"MultiPoint":for(r=0;r<y.length;r++){if(e(y[r],j,ft,dt,wt)===!1)return!1;j++,Rt==="MultiPoint"&&dt++}Rt==="LineString"&&dt++;break;case"Polygon":case"MultiLineString":for(r=0;r<y.length;r++){for(i=0;i<y[r].length-G;i++){if(e(y[r][i],j,ft,dt,wt)===!1)return!1;j++}Rt==="MultiLineString"&&dt++,Rt==="Polygon"&&wt++}Rt==="Polygon"&&dt++;break;case"MultiPolygon":for(r=0;r<y.length;r++){for(wt=0,i=0;i<y[r].length;i++){for(p=0;p<y[r][i].length-G;p++){if(e(y[r][i][p],j,ft,dt,wt)===!1)return!1;j++}wt++}dt++}break;case"GeometryCollection":for(r=0;r<_.geometries.length;r++)if(_e(_.geometries[r],e,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function te(t,e){if(t.type==="Feature")e(t,0);else if(t.type==="FeatureCollection")for(var n=0;n<t.features.length&&e(t.features[n],n)!==!1;n++);}function _n(t,e){var n,r,i,p,_,v,y,M,D,G,j=0,V=t.type==="FeatureCollection",Y=t.type==="Feature",nt=V?t.features.length:1;for(n=0;n<nt;n++){for(v=V?t.features[n].geometry:Y?t.geometry:t,M=V?t.features[n].properties:Y?t.properties:{},D=V?t.features[n].bbox:Y?t.bbox:void 0,G=V?t.features[n].id:Y?t.id:void 0,_=(y=!!v&&v.type==="GeometryCollection")?v.geometries.length:1,i=0;i<_;i++)if((p=y?v.geometries[i]:v)!==null)switch(p.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(e(p,j,M,D,G)===!1)return!1;break;case"GeometryCollection":for(r=0;r<p.geometries.length;r++)if(e(p.geometries[r],j,M,D,G)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(e(null,j,M,D,G)===!1)return!1;j++}}function ye(t,e){_n(t,function(n,r,i,p,_){var v,y=n===null?null:n.type;switch(y){case null:case"Point":case"LineString":case"Polygon":return e(z(n,i,{bbox:p,id:_}),r,0)!==!1&&void 0}switch(y){case"MultiPoint":v="Point";break;case"MultiLineString":v="LineString";break;case"MultiPolygon":v="Polygon"}for(var M=0;M<n.coordinates.length;M++){var D=n.coordinates[M];if(e(z({type:v,coordinates:D},i),r,M)===!1)return!1}})}k.Line=k.extend({initialize:function(t){this._map=t,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable:function(t){L.Util.setOptions(this,t),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],Pt(Pt({},this.options.templineStyle),{},{pmIgnore:!1})),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(st("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map._container.style.cursor="crosshair",this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_syncHintLine:function(){var t=this._layer.getLatLngs();if(t.length>0){var e=t[t.length-1];this._hintline.setLatLngs([e,this._hintMarker.getLatLng()])}},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());var n=this._layer._defaultShape().slice();n.push(this._hintMarker.getLatLng()),this._change(n)},hasSelfIntersection:function(){return bt(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection:function(t,e){var n=L.polyline(this._layer.getLatLngs());t&&(e||(e=this._hintMarker.getLatLng()),n.addLatLng(e));var r=bt(n.toGeoJSON(15));this._doesSelfIntersect=r.features.length>0,this._doesSelfIntersect?this._hintline.setStyle({color:"#f00000ff"}):this._hintline.isEmpty()||this._hintline.setStyle(this.options.hintlineStyle)},_createVertex:function(t){if(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,t.latlng),!this._doesSelfIntersect)){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),n=this._layer.getLatLngs(),r=n[n.length-1];if(e.equals(n[0])||n.length>0&&e.equals(r))this._finishShape();else{this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:e,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(e);var i=this._createMarker(e);this._setTooltipText(),this._setHintLineAfterNewVertex(e),this._fireVertexAdded(i,void 0,e,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(t)}}},_setHintLineAfterNewVertex:function(t){this._hintline.setLatLngs([t,t])},_removeLastVertex:function(){var t=this._markers;if(t.length<=1)this.disable();else{var e=this._layer.getLatLngs(),n=t[t.length-1],r=L.PM.Utils.findDeepMarkerIndex(t,n).indexPath;t.pop(),this._layerGroup.removeLayer(n);var i=t[t.length-1],p=e.indexOf(i.getLatLng());e=e.slice(0,p+1),this._layer.setLatLngs(e),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(n,r,"Draw"),this._change(this._layer.getLatLngs())}},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!1),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var t=this._layer.getLatLngs();if(!(t.length<=1)){var e=L.polyline(t,this.options.pathOptions);this._setPane(e,"layerPane"),this._finishLayer(e),e.addTo(this._map.pm._getContainingLayer()),this._fireCreate(e),this.options.snappable&&this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}}},_createMarker:function(t){var e=new L.Marker(t,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._pmTempLayer=!0,this._layerGroup.addLayer(e),this._markers.push(e),e.on("click",this._finishShape,this),e},_setTooltipText:function(){var t="";t=st(this._layer.getLatLngs().flat().length<=1?"tooltips.continueLine":"tooltips.finishLine"),this._hintMarker.setTooltipContent(t)},_change:function(t){this._fireChange(t,"Draw")},setStyle:function(){var t,e;(t=this._layer)===null||t===void 0||t.setStyle(this.options.templineStyle),(e=this._hintline)===null||e===void 0||e.setStyle(this.options.hintlineStyle)}}),k.Polygon=k.Line.extend({initialize:function(t){this._map=t,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable:function(t){L.PM.Draw.Line.prototype.enable.call(this,t),this._layer.pm._shape="Polygon"},_createMarker:function(t){var e=new L.Marker(t,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._pmTempLayer=!0,this._layerGroup.addLayer(e),this._markers.push(e),this._layer.getLatLngs().flat().length===1?(e.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(e)-1,this.options.snappable&&this._cleanupSnapping()):e.on("click",function(){return 1}),e},_setTooltipText:function(){var t="";t=st(this._layer.getLatLngs().flat().length<=2?"tooltips.continueLine":"tooltips.finishPoly"),this._hintMarker.setTooltipContent(t)},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var t=this._layer.getLatLngs();if(!(t.length<=2)){var e=L.polygon(t,this.options.pathOptions);this._setPane(e,"layerPane"),this._finishLayer(e),e.addTo(this._map.pm._getContainingLayer()),this._fireCreate(e),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this.disable(),this.options.continueDrawing&&this.enable()}}}}),k.Rectangle=k.extend({initialize:function(t){this._map=t,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable:function(t){if(L.Util.setOptions(this,t),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(st("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(var e=0;e<2;e+=1){var n=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(n,"vertexPane"),n._pmTempLayer=!0,this._layerGroup.addLayer(n),this._styleMarkers.push(n)}}this._map._container.style.cursor="crosshair",this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_placeStartingMarkers:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(e),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(function(n){L.DomUtil.addClass(n._icon,"visible"),n.setLatLng(e)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(st("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin:function(){var t=this._startMarker.getLatLng();t&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([t,t]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}var n=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(n,"Draw")},_syncRectangleSize:function(){var t=this,e=Wt(this._startMarker.getLatLng(),this._map),n=Wt(this._hintMarker.getLatLng(),this._map),r=L.PM.Utils._getRotatedRectangle(e,n,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(r),this.options.cursorMarker&&this._styleMarkers){var i=[];r.forEach(function(p){p.equals(e,1e-8)||p.equals(n,1e-8)||i.push(p)}),i.forEach(function(p,_){try{t._styleMarkers[_].setLatLng(p)}catch{}})}},_findCorners:function(){var t=this._layer.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]},_finishShape:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),n=this._startMarker.getLatLng();if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){var r=L.rectangle([n,e],this.options.pathOptions);if(this.options.rectangleAngle){var i=L.PM.Utils._getRotatedRectangle(n,e,this.options.rectangleAngle||0,this._map);r.setLatLngs(i),r.pm&&r.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r),this.disable(),this.options.continueDrawing&&this.enable()}},setStyle:function(){var t;(t=this._layer)===null||t===void 0||t.setStyle(this.options.pathOptions)}}),k.Circle=k.extend({initialize:function(t){this._map=t,this._shape="Circle",this.toolbarButtonName="drawCircle"},enable:function(t){L.Util.setOptions(this,t),this.options.radius=0,this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circle(this._map.getCenter(),At(At({},this.options.templineStyle),{},{radius:0})),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(st("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map._container.style.cursor="crosshair",this._map.on("click",this._placeCenterMarker,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([t,e])},_syncCircleRadius:function(){var t,e=this._centerMarker.getLatLng(),n=this._hintMarker.getLatLng();t=this._map.options.crs===L.CRS.Simple?this._map.distance(e,n):e.distanceTo(n),this.options.minRadiusCircle&&t<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&t>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(t)},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this._handleHintMarkerSnapping();var n=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(n,"Draw")},_placeCenterMarker:function(t){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(e),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var t=this._centerMarker.getLatLng();t&&(this._layer.setLatLng(t),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(st("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_finishShape:function(t){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e,n=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng();e=this._map.options.crs===L.CRS.Simple?this._map.distance(n,r):n.distanceTo(r),this.options.minRadiusCircle&&e<this.options.minRadiusCircle?e=this.options.minRadiusCircle:this.options.maxRadiusCircle&&e>this.options.maxRadiusCircle&&(e=this.options.maxRadiusCircle);var i=At(At({},this.options.pathOptions),{},{radius:e}),p=L.circle(n,i);this._setPane(p,"layerPane"),this._finishLayer(p),p.addTo(this._map.pm._getContainingLayer()),p.pm&&p.pm._updateHiddenPolyCircle(),this._fireCreate(p),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var t=this._hintMarker.getLatLng();if(!this._layerGroup.hasLayer(this._centerMarker))return t;var e=this._centerMarker.getLatLng(),n=e.distanceTo(t);return this.options.minRadiusCircle&&n<this.options.minRadiusCircle?t=It(this._map,e,t,this.options.minRadiusCircle):this.options.maxRadiusCircle&&n>this.options.maxRadiusCircle&&(t=It(this._map,e,t,this.options.maxRadiusCircle)),t},_handleHintMarkerSnapping:function(){if(this._hintMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),n=t.distanceTo(e);this._layerGroup.hasLayer(this._centerMarker)&&(this.options.minRadiusCircle&&n<this.options.minRadiusCircle||this.options.maxRadiusCircle&&n>this.options.maxRadiusCircle)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())},setStyle:function(){var t,e;(t=this._layer)===null||t===void 0||t.setStyle(this.options.templineStyle),(e=this._hintline)===null||e===void 0||e.setStyle(this.options.hintlineStyle)}}),k.CircleMarker=k.Marker.extend({initialize:function(t){this._map=t,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1},enable:function(t){var e=this;if(L.Util.setOptions(this,t),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this.options.editable){var n={};L.extend(n,this.options.templineStyle),n.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circleMarker(this._map.getCenter(),n),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(st("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this),this._map._container.style.cursor="crosshair"}else this._map.on("click",this._createMarker,this),this._hintMarker=L.circleMarker(this._map.getCenter(),this.options.templineStyle),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(st("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),!this.options.editable&&this.options.markerEditable&&this._map.eachLayer(function(r){e.isRelevantMarker(r)&&r.pm.enable()}),this._layer.bringToBack(),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var t=this;this._enabled&&(this._enabled=!1,this.options.editable?(this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._map.eachLayer(function(e){t.isRelevantMarker(e)&&e.pm.disable()}),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_placeCenterMarker:function(t){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(e),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var t=this._centerMarker.getLatLng();t&&(this._layer.setLatLng(t),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(st("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([t,e])},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),n=this._map.project(t).distanceTo(this._map.project(e));this.options.minRadiusCircleMarker&&n<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&n>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(n)},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this._handleHintMarkerSnapping();var n=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(n,"Draw")},isRelevantMarker:function(t){return t instanceof L.CircleMarker&&!(t instanceof L.Circle)&&t.pm&&!t._pmTempLayer},_createMarker:function(t){if((!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())&&t.latlng&&!this._layerIsDragging){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),n=L.circleMarker(e,this.options.pathOptions);this._setPane(n,"layerPane"),this._finishLayer(n),n.addTo(this._map.pm._getContainingLayer()),n.pm&&this.options.markerEditable&&n.pm.enable(),this._fireCreate(n),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},_finishShape:function(t){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._centerMarker.getLatLng(),n=this._hintMarker.getLatLng(),r=this._map.project(e).distanceTo(this._map.project(n));this.options.editable&&(this.options.minRadiusCircleMarker&&r<this.options.minRadiusCircleMarker?r=this.options.minRadiusCircleMarker:this.options.maxRadiusCircleMarker&&r>this.options.maxRadiusCircleMarker&&(r=this.options.maxRadiusCircleMarker));var i=zt(zt({},this.options.pathOptions),{},{radius:r}),p=L.circleMarker(e,i);this._setPane(p,"layerPane"),this._finishLayer(p),p.addTo(this._map.pm._getContainingLayer()),p.pm&&p.pm._updateHiddenPolyCircle(),this._fireCreate(p),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var t=this._hintMarker.getLatLng();if(this.options.editable){if(!this._layerGroup.hasLayer(this._centerMarker))return t;var e=this._centerMarker.getLatLng(),n=this._map.project(e).distanceTo(this._map.project(t));this.options.minRadiusCircleMarker&&n<this.options.minRadiusCircleMarker?t=It(this._map,e,t,this._pxRadiusToMeter(this.options.minRadiusCircleMarker)):this.options.maxRadiusCircleMarker&&n>this.options.maxRadiusCircleMarker&&(t=It(this._map,e,t,this._pxRadiusToMeter(this.options.maxRadiusCircleMarker)))}return t},_handleHintMarkerSnapping:function(){if(this.options.editable){if(this._hintMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),n=this._map.project(t).distanceTo(this._map.project(e));this._layerGroup.hasLayer(this._centerMarker)&&(this.options.minRadiusCircleMarker&&n<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&n>this.options.maxRadiusCircleMarker)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},_pxRadiusToMeter:function(t){var e=this._centerMarker.getLatLng(),n=this._map.project(e),r=L.point(n.x+t,n.y);return this._map.unproject(r).distanceTo(e)},setStyle:function(){var t,e,n={};L.extend(n,this.options.templineStyle),this.options.editable&&(n.radius=0),(t=this._layer)===null||t===void 0||t.setStyle(n),(e=this._hintline)===null||e===void 0||e.setStyle(this.options.hintlineStyle)}});const ve=function(t){if(!t)throw new Error("geojson is required");var e=[];return ye(t,function(n){(function(r,i){var p=[],_=r.geometry;if(_!==null){switch(_.type){case"Polygon":p=xt(_);break;case"LineString":p=[xt(_)]}p.forEach(function(v){var y=function(M,D){var G=[];return M.reduce(function(j,V){var Y,nt,at,ft,Lt,dt,wt=et([j,V],D);return wt.bbox=(nt=V,at=(Y=j)[0],ft=Y[1],Lt=nt[0],dt=nt[1],[at<Lt?at:Lt,ft<dt?ft:dt,at>Lt?at:Lt,ft>dt?ft:dt]),G.push(wt),V}),G}(v,r.properties);y.forEach(function(M){M.id=i.length,i.push(M)})})}})(n,e)}),it(e)};var Le=o(1787);function je(t,e){var n=xt(t),r=xt(e);if(n.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(r.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],p=n[0][1],_=n[1][0],v=n[1][1],y=r[0][0],M=r[0][1],D=r[1][0],G=r[1][1],j=(G-M)*(_-i)-(D-y)*(v-p),V=(D-y)*(p-M)-(G-M)*(i-y),Y=(_-i)*(p-M)-(v-p)*(i-y);if(j===0)return null;var nt=V/j,at=Y/j;return nt>=0&&nt<=1&&at>=0&&at<=1?K([i+nt*(_-i),p+nt*(v-p)]):null}const Ht=function(t,e){var n={},r=[];if(t.type==="LineString"&&(t=z(t)),e.type==="LineString"&&(e=z(e)),t.type==="Feature"&&e.type==="Feature"&&t.geometry!==null&&e.geometry!==null&&t.geometry.type==="LineString"&&e.geometry.type==="LineString"&&t.geometry.coordinates.length===2&&e.geometry.coordinates.length===2){var i=je(t,e);return i&&r.push(i),it(r)}var p=Le();return p.load(ve(e)),te(ve(t),function(_){te(p.search(_),function(v){var y=je(_,v);if(y){var M=xt(y).join(",");n[M]||(n[M]=!0,r.push(y))}})}),it(r)},qt=function(t,e,n){n===void 0&&(n={});var r=St(t),i=St(e),p=ot(i[1]-r[1]),_=ot(i[0]-r[0]),v=ot(r[1]),y=ot(i[1]),M=Math.pow(Math.sin(p/2),2)+Math.pow(Math.sin(_/2),2)*Math.cos(v)*Math.cos(y);return ut(2*Math.atan2(Math.sqrt(M),Math.sqrt(1-M)),n.units)},yn=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(qt(t.slice(0,2),[r,n])>=qt(t.slice(0,2),[e,i])){var p=(n+i)/2;return[e,p-(r-e)/2,r,p+(r-e)/2]}var _=(e+r)/2;return[_-(i-n)/2,n,_+(i-n)/2,i]};function be(t){var e=[1/0,1/0,-1/0,-1/0];return _e(t,function(n){e[0]>n[0]&&(e[0]=n[0]),e[1]>n[1]&&(e[1]=n[1]),e[2]<n[0]&&(e[2]=n[0]),e[3]<n[1]&&(e[3]=n[1])}),e}be.default=be;const ee=be,vn=function(t,e){e===void 0&&(e={});var n=e.precision,r=e.coordinates,i=e.mutate;if(n=n==null||isNaN(n)?6:n,r=r==null||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if(typeof n!="number")throw new Error("<precision> must be a number");if(typeof r!="number")throw new Error("<coordinates> must be a number");i!==!1&&i!==void 0||(t=JSON.parse(JSON.stringify(t)));var p=Math.pow(10,n);return _e(t,function(_){(function(v,y,M){v.length>M&&v.splice(M,v.length);for(var D=0;D<v.length;D++)v[D]=Math.round(v[D]*y)/y})(_,p,r)}),t};function Ae(t,e,n){if(n===void 0&&(n={}),n.final===!0)return function(G,j){var V=Ae(j,G);return V=(V+180)%360}(t,e);var r=St(t),i=St(e),p=ot(r[0]),_=ot(i[0]),v=ot(r[1]),y=ot(i[1]),M=Math.sin(_-p)*Math.cos(y),D=Math.cos(v)*Math.sin(y)-Math.sin(v)*Math.cos(y)*Math.cos(_-p);return mt(Math.atan2(M,D))}function Ge(t,e,n,r){r===void 0&&(r={});var i=St(t),p=ot(i[0]),_=ot(i[1]),v=ot(n),y=lt(e,r.units),M=Math.asin(Math.sin(_)*Math.cos(y)+Math.cos(_)*Math.sin(y)*Math.cos(v));return K([mt(p+Math.atan2(Math.sin(v)*Math.sin(y)*Math.cos(_),Math.cos(y)-Math.sin(_)*Math.sin(M))),mt(M)],r.properties)}const Ln=function(t,e,n){n===void 0&&(n={});var r=K([1/0,1/0],{dist:1/0}),i=0;return ye(t,function(p){for(var _=xt(p),v=0;v<_.length-1;v++){var y=K(_[v]);y.properties.dist=qt(e,y,n);var M=K(_[v+1]);M.properties.dist=qt(e,M,n);var D=qt(y,M,n),G=Math.max(y.properties.dist,M.properties.dist),j=Ae(y,M),V=Ge(e,G,j+90,n),Y=Ge(e,G,j-90,n),nt=Ht(et([V.geometry.coordinates,Y.geometry.coordinates]),et([y.geometry.coordinates,M.geometry.coordinates])),at=null;nt.features.length>0&&((at=nt.features[0]).properties.dist=qt(e,at,n),at.properties.location=i+qt(y,at,n)),y.properties.dist<r.properties.dist&&((r=y).properties.index=v,r.properties.location=i),M.properties.dist<r.properties.dist&&((r=M).properties.index=v+1,r.properties.location=i+D),at&&at.properties.dist<r.properties.dist&&((r=at).properties.index=v),i+=D}}),r};function Ne(t,e){var n=[],r=Le();return ye(e,function(i){if(n.forEach(function(v,y){v.id=y}),n.length){var p=r.search(i);if(p.features.length){var _=ze(i,p);n=n.filter(function(v){return v.id!==_.id}),r.remove(_),te(ke(_,i),function(v){n.push(v),r.insert(v)})}}else(n=ke(t,i).features).forEach(function(v){v.bbox||(v.bbox=yn(ee(v)))}),r.load(it(n))}),it(n)}function ke(t,e){var n=[],r=xt(t)[0],i=xt(t)[t.geometry.coordinates.length-1];if(Me(r,St(e))||Me(i,St(e)))return it([t]);var p=Le(),_=ve(t);p.load(_);var v=p.search(e);if(!v.features.length)return it([t]);var y=ze(e,v),M=function(D,G,j){var V=j;return te(D,function(Y,nt){V=nt===0&&j===void 0?Y:G(V,Y,nt)}),V}(_,function(D,G,j){var V=xt(G)[1],Y=St(e);return j===y.id?(D.push(Y),n.push(et(D)),Me(Y,V)?[Y]:[Y,V]):(D.push(V),D)},[r]);return M.length>1&&n.push(et(M)),it(n)}function ze(t,e){if(!e.features.length)throw new Error("lines must contain features");if(e.features.length===1)return e.features[0];var n,r=1/0;return te(e,function(i){var p=Ln(i,t).properties.dist;p<r&&(n=i,r=p)}),n}function Me(t,e){return t[0]===e[0]&&t[1]===e[1]}const bn=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=Ie(t),r=Ie(e);if(n!=="LineString")throw new Error("line must be LineString");if(r==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(r==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var i=vn(e,{precision:7});switch(r){case"Point":return ke(t,i);case"MultiPoint":return Ne(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Ne(t,Ht(t,i))}};function he(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=St(t),i=Ut(e),p=i.type,_=e.bbox,v=i.coordinates;if(_&&function(j,V){return V[0]<=j[0]&&V[1]<=j[1]&&V[2]>=j[0]&&V[3]>=j[1]}(r,_)===!1)return!1;p==="Polygon"&&(v=[v]);for(var y=!1,M=0;M<v.length&&!y;M++)if(Fe(r,v[M][0],n.ignoreBoundary)){for(var D=!1,G=1;G<v[M].length&&!D;)Fe(r,v[M][G],!n.ignoreBoundary)&&(D=!0),G++;D||(y=!0)}return y}function Fe(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,p=e.length-1;i<e.length;p=i++){var _=e[i][0],v=e[i][1],y=e[p][0],M=e[p][1];if(t[1]*(_-y)+v*(y-t[0])+M*(t[0]-_)==0&&(_-t[0])*(y-t[0])<=0&&(v-t[1])*(M-t[1])<=0)return!n;v>t[1]!=M>t[1]&&t[0]<(y-_)*(t[1]-v)/(M-v)+_&&(r=!r)}return r}function kn(t,e,n,r,i){var p=n[0],_=n[1],v=t[0],y=t[1],M=e[0],D=e[1],G=M-v,j=D-y,V=(n[0]-v)*j-(n[1]-y)*G;if(i!==null){if(Math.abs(V)>i)return!1}else if(V!==0)return!1;return r?r==="start"?Math.abs(G)>=Math.abs(j)?G>0?v<p&&p<=M:M<=p&&p<v:j>0?y<_&&_<=D:D<=_&&_<y:r==="end"?Math.abs(G)>=Math.abs(j)?G>0?v<=p&&p<M:M<p&&p<=v:j>0?y<=_&&_<D:D<_&&_<=y:r==="both"&&(Math.abs(G)>=Math.abs(j)?G>0?v<p&&p<M:M<p&&p<v:j>0?y<_&&_<D:D<_&&_<y):Math.abs(G)>=Math.abs(j)?G>0?v<=p&&p<=M:M<=p&&p<=v:j>0?y<=_&&_<=D:D<=_&&_<=y}const ne=function(t,e,n){n===void 0&&(n={});for(var r=St(t),i=xt(e),p=0;p<i.length-1;p++){var _=!1;if(n.ignoreEndVertices&&(p===0&&(_="start"),p===i.length-2&&(_="end"),p===0&&p+1===i.length-1&&(_="both")),kn(i[p],i[p+1],r,_,typeof n.epsilon=="undefined"?null:n.epsilon))return!0}return!1};function Mn(t,e){var n=Ut(t),r=Ut(e),i=n.type,p=r.type,_=n.coordinates,v=r.coordinates;switch(i){case"Point":if(p==="Point")return xe(_,v);throw new Error("feature2 "+p+" geometry not supported");case"MultiPoint":switch(p){case"Point":return function(y,M){var D,G=!1;for(D=0;D<y.coordinates.length;D++)if(xe(y.coordinates[D],M.coordinates)){G=!0;break}return G}(n,r);case"MultiPoint":return function(y,M){for(var D=0,G=M.coordinates;D<G.length;D++){for(var j=G[D],V=!1,Y=0,nt=y.coordinates;Y<nt.length;Y++)if(xe(j,nt[Y])){V=!0;break}if(!V)return!1}return!0}(n,r);default:throw new Error("feature2 "+p+" geometry not supported")}case"LineString":switch(p){case"Point":return ne(r,n,{ignoreEndVertices:!0});case"LineString":return function(y,M){for(var D=!1,G=0,j=M.coordinates;G<j.length;G++){var V=j[G];if(ne({type:"Point",coordinates:V},y,{ignoreEndVertices:!0})&&(D=!0),!ne({type:"Point",coordinates:V},y,{ignoreEndVertices:!1}))return!1}return D}(n,r);case"MultiPoint":return function(y,M){for(var D=!1,G=0,j=M.coordinates;G<j.length;G++){var V=j[G];if(ne(V,y,{ignoreEndVertices:!0})&&(D=!0),!ne(V,y))return!1}return!!D}(n,r);default:throw new Error("feature2 "+p+" geometry not supported")}case"Polygon":switch(p){case"Point":return he(r,n,{ignoreBoundary:!0});case"LineString":return function(y,M){var D=!1,G=0,j=ee(y),V=ee(M);if(!Ue(j,V))return!1;for(;G<M.coordinates.length-1;G++)if(he({type:"Point",coordinates:xn(M.coordinates[G],M.coordinates[G+1])},y,{ignoreBoundary:!0})){D=!0;break}return D}(n,r);case"Polygon":return function(y,M){if(y.type==="Feature"&&y.geometry===null||M.type==="Feature"&&M.geometry===null)return!1;var D=ee(y),G=ee(M);if(!Ue(D,G))return!1;for(var j=Ut(M).coordinates,V=0,Y=j;V<Y.length;V++)for(var nt=0,at=Y[V];nt<at.length;nt++)if(!he(at[nt],y))return!1;return!0}(n,r);case"MultiPoint":return function(y,M){for(var D=0,G=M.coordinates;D<G.length;D++)if(!he(G[D],y,{ignoreBoundary:!0}))return!1;return!0}(n,r);default:throw new Error("feature2 "+p+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Ue(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function xe(t,e){return t[0]===e[0]&&t[1]===e[1]}function xn(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}var wn=o(2676),Ve=o.n(wn);function ue(t){var e={type:"Feature"};return e.geometry=t,e}function ce(t){return t.type==="Feature"?t.geometry:t}function Ke(t){return t&&t.geometry&&t.geometry.coordinates?t.geometry.coordinates:t}function He(t){return ue({type:"Polygon",coordinates:t})}function qe(t){return ue({type:"MultiPolygon",coordinates:t})}function Je(t){return Array.isArray(t)?1+Je(t[0]):-1}function Cn(t){t instanceof L.Polyline&&(t=t.toGeoJSON(15));var e=Ke(t),n=Je(e),r=[];return n>1?e.forEach(function(i){r.push(function(p){return ue({type:"LineString",coordinates:p})}(i))}):r.push(t),r}function Pn(t){var e=[];return t.eachLayer(function(n){e.push(Ke(n.toGeoJSON(15)))}),function(n){return ue({type:"MultiLineString",coordinates:n})}(e)}function En(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,r){var i=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var p,_,v=[],y=!0,M=!1;try{for(i=i.call(n);!(y=(p=i.next()).done)&&(v.push(p.value),!r||v.length!==r);y=!0);}catch(D){M=!0,_=D}finally{try{y||i.return==null||i.return()}finally{if(M)throw _}}return v}}(t,e)||function(n,r){if(!!n){if(typeof n=="string")return Ye(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ye(n,r)}}(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ye(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Sn(t){return function(e){if(Array.isArray(e))return we(e)}(t)||function(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(!!e){if(typeof e=="string")return we(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return we(e,n)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function we(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}k.Cut=k.Polygon.extend({initialize:function(t){this._map=t,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape:function(){var t=this;if(this._editedLayers=[],(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var e=this._layer.getLatLngs();if(!(e.length<=2)){var n=L.polygon(e,this.options.pathOptions);n._latlngInfos=this._layer._latlngInfo,this.cut(n),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(function(r){var i=r.layer,p=r.originalLayer;t._fireCut(p,i,p),t._fireCut(t._map,i,p),p.pm._fireEdit()}),this._editedLayers=[],this.disable(),this.options.continueDrawing&&this.enable()}}},cut:function(t){var e=this,n=this._map._layers,r=t._latlngInfos||[];Object.keys(n).map(function(i){return n[i]}).filter(function(i){return i.pm}).filter(function(i){return!i._pmTempLayer}).filter(function(i){return!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1}).filter(function(i){return i instanceof L.Polyline}).filter(function(i){return i!==t}).filter(function(i){return i.pm.options.allowCutting}).filter(function(i){return!(e.options.layersToCut&&L.Util.isArray(e.options.layersToCut)&&e.options.layersToCut.length>0)||e.options.layersToCut.indexOf(i)>-1}).filter(function(i){return!e._layerGroup.hasLayer(i)}).filter(function(i){try{var p=!!Ht(t.toGeoJSON(15),i.toGeoJSON(15)).features.length>0;return p||i instanceof L.Polyline&&!(i instanceof L.Polygon)?p:(_=t.toGeoJSON(15),v=i.toGeoJSON(15),y=ce(_),M=ce(v),!((D=Ve().intersection(y.coordinates,M.coordinates)).length===0||!(D.length===1?He(D[0]):qe(D))))}catch{return i instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}var _,v,y,M,D}).forEach(function(i){var p;if(i instanceof L.Polygon){var _=(p=L.polygon(i.getLatLngs())).getLatLngs();r.forEach(function(j){if(j&&j.snapInfo){var V=j.latlng,Y=e._calcClosestLayer(V,[p]);if(Y&&Y.segment&&Y.distance<e.options.snapDistance){var nt=Y.segment;if(nt&&nt.length===2){var at=L.PM.Utils._getIndexFromSegment(_,nt),ft=at.indexPath,Lt=at.parentPath,dt=at.newIndex;(ft.length>1?pt()(_,Lt):_).splice(dt,0,V)}}}})}else p=i;var v=e._cutLayer(t,p),y=L.geoJSON(v,i.options);if(y.getLayers().length===1){var M=y.getLayers();y=En(M,1)[0]}e._setPane(y,"layerPane");var D=y.addTo(e._map.pm._getContainingLayer());if(D.pm.enable(i.pm.options),D.pm.disable(),i._pmTempLayer=!0,t._pmTempLayer=!0,i.remove(),i.removeFrom(e._map.pm._getContainingLayer()),t.remove(),t.removeFrom(e._map.pm._getContainingLayer()),D.getLayers&&D.getLayers().length===0&&e._map.pm.removeLayer({target:D}),D instanceof L.LayerGroup&&D.eachLayer(function(j){e._addDrawnLayerProp(j)}),e._addDrawnLayerProp(D),e.options.layersToCut&&L.Util.isArray(e.options.layersToCut)&&e.options.layersToCut.length>0){var G=e.options.layersToCut.indexOf(i);G>-1&&e.options.layersToCut.splice(G,1)}e._editedLayers.push({layer:D,originalLayer:i})})},_cutLayer:function(t,e){var n,r,i,p,_,v,y=L.geoJSON();if(e instanceof L.Polygon)r=e.toGeoJSON(15),i=t.toGeoJSON(15),p=ce(r),_=ce(i),n=(v=Ve().difference(p.coordinates,_.coordinates)).length===0?null:v.length===1?He(v[0]):qe(v);else{var M=Cn(e);M.forEach(function(D){var G=bn(D,t.toGeoJSON(15));(G&&G.features.length>0?L.geoJSON(G):L.geoJSON(D)).getLayers().forEach(function(j){Mn(t.toGeoJSON(15),j.toGeoJSON(15))||j.addTo(y)})}),n=M.length>1?Pn(y):y.toGeoJSON(15)}return n},_change:L.Util.falseFn}),k.Text=k.extend({initialize:function(t){this._map=t,this._shape="Text",this.toolbarButtonName="drawText"},enable:function(t){L.Util.setOptions(this,t),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(st("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}},_createMarker:function(t){var e;if(t.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var n=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(e=this.options.textOptions)!==null&&e!==void 0&&e.className){var r,i=this.options.textOptions.className.split(" ");(r=this.textArea.classList).add.apply(r,Sn(i))}var p=this._createTextIcon(this.textArea),_=new L.Marker(n,{textMarker:!0,_textMarkerOverPM:!0,icon:p});if(this._setPane(_,"markerPane"),this._finishLayer(_),_.pm||(_.options.draggable=!1),_.addTo(this._map.pm._getContainingLayer()),_.pm){var v,y,M,D,G;_.pm.textArea=this.textArea,L.setOptions(_.pm,{removeIfEmpty:(v=(y=this.options.textOptions)===null||y===void 0?void 0:y.removeIfEmpty)===null||v===void 0||v});var j=(M=(D=this.options.textOptions)===null||D===void 0?void 0:D.focusAfterDraw)===null||M===void 0||M;_.pm._createTextMarker(j),(G=this.options.textOptions)!==null&&G!==void 0&&G.text&&_.pm.setText(this.options.textOptions.text)}this._fireCreate(_),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}},_createTextArea:function(){var t=document.createElement("textarea");return t.autofocus=!0,t.readOnly=!0,t.classList.add("pm-textarea","pm-disabled"),t},_createTextIcon:function(t){return L.divIcon({className:"pm-text-marker",html:t})}});const On={enableLayerDrag:function(){if(this.options.draggable&&this._layer._map){this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Ft(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;var t=this._getDOMElem();t&&(Ft(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(t)):L.DomEvent.on(t,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()}},disableLayerDrag:function(){this._layerDragEnabled=!1,Ft(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();var t=this._getDOMElem();t&&(Ft(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(t)):L.DomEvent.off(t,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging:function(){return this._dragging},layerDragEnabled:function(){return!!this._layerDragEnabled},_simulateMouseDownEvent:function(t){var e=t.touches?t.touches[0]:t,n={originalEvent:e,target:this._layer};return n.containerPoint=this._map.mouseEventToContainerPoint(e),n.latlng=this._map.containerPointToLatLng(n.containerPoint),this._dragMixinOnMouseDown(n),!1},_simulateMouseMoveEvent:function(t){var e=t.touches?t.touches[0]:t,n={originalEvent:e,target:this._layer};return n.containerPoint=this._map.mouseEventToContainerPoint(e),n.latlng=this._map.containerPointToLatLng(n.containerPoint),this._dragMixinOnMouseMove(n),!1},_simulateMouseUpEvent:function(t){var e={originalEvent:t.touches?t.touches[0]:t,target:this._layer};return t.type.indexOf("touch")===-1&&(e.containerPoint=this._map.mouseEventToContainerPoint(t),e.latlng=this._map.containerPointToLatLng(e.containerPoint)),this._dragMixinOnMouseUp(e),!1},_dragMixinOnMouseDown:function(t){if(!(t.originalEvent.button>0)){this._overwriteEventIfItComesFromMarker(t);var e=t._fromLayerSync,n=this._syncLayers("_dragMixinOnMouseDown",t);this._layer instanceof L.Marker&&(!this.options.snappable||e||n?this._disableSnapping():this._initSnappableMarkers()),this._layer instanceof L.CircleMarker&&!(this._layer instanceof L.Circle)&&(!this.options.snappable||e||n?this._layer.pm.options.editable?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag():this._layer.pm.options.editable||this._initSnappableMarkersDrag()),this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=t.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)}},_dragMixinOnMouseMove:function(t){this._overwriteEventIfItComesFromMarker(t);var e=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",t),this._dragging||(this._dragging=!0,L.DomUtil.addClass(e,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=t.latlng),this._onLayerDrag(t),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp:function(t){var e=this,n=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",t),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),!!this._dragging&&(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(function(){e._dragging=!1,n&&L.DomUtil.removeClass(n,"leaflet-pm-dragging"),e._fireDragEnd(),e._fireEdit(),e._layerEdited=!0},10),!0)},_onLayerDrag:function(t){var e=t.latlng,n=e.lat-this._tempDragCoord.lat,r=e.lng-this._tempDragCoord.lng,i=function D(G){return G.map(function(j){if(Array.isArray(j))return D(j);var V={lat:j.lat+n,lng:j.lng+r};return(j.alt||j.alt===0)&&(V.alt=j.alt),V})};if(this._layer instanceof L.Circle||this._layer instanceof L.CircleMarker&&this._layer.options.editable){var p=i([this._layer.getLatLng()]);this._layer.setLatLng(p[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){var _=this._layer.getLatLng();this._layer._snapped&&(_=this._layer._orgLatLng);var v=i([_]);this._layer.setLatLng(v[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){var y=i([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(y),this._fireChange(this._layer.getBounds(),"Edit")}else{var M=i(this._layer.getLatLngs());this._layer.setLatLngs(M),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=e,t.layer=this._layer,this._fireDrag(t)},addDraggingClass:function(){var t=this._getDOMElem();t&&L.DomUtil.addClass(t,"leaflet-pm-draggable")},removeDraggingClass:function(){var t=this._getDOMElem();t&&L.DomUtil.removeClass(t,"leaflet-pm-draggable")},_getDOMElem:function(){var t=null;return this._layer._path?t=this._layer._path:this._layer._renderer&&this._layer._renderer._container?t=this._layer._renderer._container:this._layer._image?t=this._layer._image:this._layer._icon&&(t=this._layer._icon),t},_overwriteEventIfItComesFromMarker:function(t){t.target.getLatLng&&(!t.target._radius||t.target._radius<=10)&&(t.containerPoint=this._map.mouseEventToContainerPoint(t.originalEvent),t.latlng=this._map.containerPointToLatLng(t.containerPoint))},_syncLayers:function(t,e){var n=this;if(this.enabled())return!1;if(!e._fromLayerSync&&this._layer===e.target&&this.options.syncLayersOnDrag){e._fromLayerSync=!0;var r=[];if(L.Util.isArray(this.options.syncLayersOnDrag))r=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(function(_){_ instanceof L.LayerGroup&&(r=r.concat(_.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(var i in this._parentLayerGroup){var p=this._parentLayerGroup[i];p.pm&&(r=p.pm.getLayers(!0))}return L.Util.isArray(r)&&r.length>0&&(r=r.filter(function(_){return!!_.pm}).filter(function(_){return!!_.pm.options.draggable})).forEach(function(_){_!==n._layer&&_.pm[t]&&(_._snapped=!1,_.pm[t](e))}),r.length>0}return!1},_stopDOMImageDrag:function(t){return t.preventDefault(),!1}};function Xe(t,e,n){var r=n.getMaxZoom();if(r===1/0&&(r=n.getZoom()),L.Util.isArray(t)){var i=[];return t.forEach(function(p){i.push(Xe(p,e,n))}),i}return t instanceof L.LatLng?function(p,_,v,y){return v.unproject(_.transform(v.project(p,y)),y)}(t,e,n,r):null}function Zt(t,e){e instanceof L.Layer&&(e=e.getLatLng());var n=t.getMaxZoom();return n===1/0&&(n=t.getZoom()),t.project(e,n)}function pe(t,e){var n=t.getMaxZoom();return n===1/0&&(n=t.getZoom()),t.unproject(e,n)}var Dn={_onRotateStart:function(t){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Zt(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Zt(this._map,t.target.getLatLng()),this._initialRotateLatLng=jt(this._layer),this._startAngle=this.getAngle();var e=jt(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,e),this._fireRotationStart(this._map,e)},_onRotate:function(t){var e=Zt(this._map,t.target.getLatLng()),n=this._rotationStartPoint,r=this._rotationOriginPoint,i=Math.atan2(e.y-r.y,e.x-r.x)-Math.atan2(n.y-r.y,n.x-r.x);this._layer.setLatLngs(this._rotateLayer(i,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var p=this;(function M(D){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(j>-1&&G.push(j),L.Util.isArray(D[0]))D.forEach(function(Y,nt){return M(Y,G.slice(),nt)});else{var V=pt()(p._markers,G);D.forEach(function(Y,nt){V[nt].setLatLng(Y)})}})(this._layer.getLatLngs());var _=jt(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(i,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var v=180*i/Math.PI,y=(v=v<0?v+360:v)+this._startAngle;this._setAngle(y),this._rotationLayer.pm._setAngle(y),this._fireRotation(this._rotationLayer,v,_),this._fireRotation(this._map,v,_),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd:function(){var t=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;var e=jt(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=jt(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,t,e),this._fireRotationEnd(this._map,t,e),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer:function(t,e,n,r,i){var p=Zt(i,n);return this._matrix=r.clone().rotate(t,p).flip(),Xe(e,this._matrix,i)},_setAngle:function(t){t=t<0?t+360:t,this._angle=t%360},_getRotationCenter:function(){var t=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),e=t.getCenter();return t.removeFrom(this._layer._map),e},enableRotate:function(){this.options.allowRotation?(this.rotateEnabled()&&this.disableRotate(),this._rotatePoly=L.polygon(this._layer.getLatLngs(),{fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0}),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=jt(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)):this.disableRotate()},disableRotate:function(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled:function(){return this._rotateEnabled},rotateLayer:function(t){var e=this.getAngle(),n=this._layer.getLatLngs(),r=t*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(r,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+t),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(r,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());var i=this.getAngle()-e;i=i<0?i+360:i,this._startAngle=e,this._fireRotation(this._layer,i,n,this._layer),this._fireRotation(this._map||this._layer._map,i,n,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle:function(t){var e=t-this.getAngle();this.rotateLayer(e)},getAngle:function(){return this._angle||0},setInitAngle:function(t){this._setAngle(t)}};const Bn=Dn,kt=L.Class.extend({includes:[On,g,Bn,tt],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0},setOptions:function(t){L.Util.setOptions(this,t)},getOptions:function(){return this.options},applyOptions:function(){},isPolygon:function(){return this._layer instanceof L.Polygon},getShape:function(){return this._shape},_setPane:function(t,e){e==="layerPane"?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":e==="vertexPane"?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":e==="markerPane"&&(t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove:function(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation:function(t,e){var n=e.target,r={layer:this._layer,marker:n,event:e},i="";return t==="move"?i="moveVertexValidation":t==="add"?i="addVertexValidation":t==="remove"&&(i="removeVertexValidation"),this.options[i]&&typeof this.options[i]=="function"&&!this.options[i](r)?(t==="move"&&(n._cancelDragEventChain=n.getLatLng()),!1):(n._cancelDragEventChain=null,!0)},_vertexValidationDrag:function(t){return!t._cancelDragEventChain||(t._latlng=t._cancelDragEventChain,t.update(),!1)},_vertexValidationDragEnd:function(t){return!t._cancelDragEventChain||(t._cancelDragEventChain=null,!1)}});function de(t){return function(e){if(Array.isArray(e))return Ce(e)}(t)||function(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(!!e){if(typeof e=="string")return Ce(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ce(e,n)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ce(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}kt.LayerGroup=L.Class.extend({initialize:function(t){var e=this;this._layerGroup=t,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(function(n){return e._initLayer(n)}),this._layerGroup.on("layeradd",L.Util.throttle(function(n){if(!n.layer._pmTempLayer){e._layers=e.getLayers();var r=e._layers.filter(function(i){return!i.pm._parentLayerGroup||!(e._layerGroup._leaflet_id in i.pm._parentLayerGroup)});r.forEach(function(i){e._initLayer(i)}),r.length>0&&e._getMap()&&e._getMap().pm.globalEditModeEnabled()&&e.enabled()&&e.enable(e.getOptions())}},100,this),this),this._layerGroup.on("layerremove",function(n){e._removeLayerFromGroup(n.target)},this),this._layerGroup.on("layerremove",L.Util.throttle(function(n){n.target._pmTempLayer||(e._layers=e.getLayers())},100,this),this)},enable:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];e.length===0&&(this._layers=this.getLayers()),this._options=t,this._layers.forEach(function(n){n instanceof L.LayerGroup?e.indexOf(n._leaflet_id)===-1&&(e.push(n._leaflet_id),n.pm.enable(t,e)):n.pm.enable(t)})},disable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.length===0&&(this._layers=this.getLayers()),this._layers.forEach(function(e){e instanceof L.LayerGroup?t.indexOf(e._leaflet_id)===-1&&(t.push(e._leaflet_id),e.pm.disable(t)):e.pm.disable()})},enabled:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.length===0&&(this._layers=this.getLayers());var e=this._layers.find(function(n){return n instanceof L.LayerGroup?t.indexOf(n._leaflet_id)===-1&&(t.push(n._leaflet_id),n.pm.enabled(t)):n.pm.enabled()});return!!e},toggleEdit:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];e.length===0&&(this._layers=this.getLayers()),this._options=t,this._layers.forEach(function(n){n instanceof L.LayerGroup?e.indexOf(n._leaflet_id)===-1&&(e.push(n._leaflet_id),n.pm.toggleEdit(t,e)):n.pm.toggleEdit(t)})},_initLayer:function(t){var e=L.Util.stamp(this._layerGroup);t.pm._parentLayerGroup||(t.pm._parentLayerGroup={}),t.pm._parentLayerGroup[e]=this._layerGroup},_removeLayerFromGroup:function(t){if(t.pm&&t.pm._layerGroup){var e=L.Util.stamp(this._layerGroup);delete t.pm._layerGroup[e]}},dragging:function(){if(this._layers=this.getLayers(),this._layers){var t=this._layers.find(function(e){return e.pm.dragging()});return!!t}return!1},getOptions:function(){return this.options},_getMap:function(){var t;return this._map||((t=this._layers.find(function(e){return!!e._map}))===null||t===void 0?void 0:t._map)||null},getLayers:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],i=[];return t?this._layerGroup.getLayers().forEach(function(p){i.push(p),p instanceof L.LayerGroup&&r.indexOf(p._leaflet_id)===-1&&(r.push(p._leaflet_id),i=i.concat(p.pm.getLayers(!0,!0,!0,r)))}):i=this._layerGroup.getLayers(),n&&(i=i.filter(function(p){return!(p instanceof L.LayerGroup)})),e&&(i=(i=(i=i.filter(function(p){return!!p.pm})).filter(function(p){return!p._pmTempLayer})).filter(function(p){return!L.PM.optIn&&!p.options.pmIgnore||L.PM.optIn&&p.options.pmIgnore===!1})),i},setOptions:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];e.length===0&&(this._layers=this.getLayers()),this.options=t,this._layers.forEach(function(n){n.pm&&(n instanceof L.LayerGroup?e.indexOf(n._leaflet_id)===-1&&(e.push(n._leaflet_id),n.pm.setOptions(t,e)):n.pm.setOptions(t))})}}),kt.Marker=kt.extend({_shape:"Marker",initialize:function(t){this._layer=t,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0};L.Util.setOptions(this,t),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()):this.disable()},disable:function(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker:function(t){var e=t.target;e.remove(),this._fireRemove(e),this._fireRemove(this._map,e)},_onDragEnd:function(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,t.off("pm:drag",this._handleSnapping,this),t.on("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.on("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var t=this._layer;t.off("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)}});const Rn={filterMarkerGroup:function(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents:function(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache:function(){var t=[].concat(de(this._markerGroup.getLayers()),de(this.markerCache));this.markerCache=t.filter(function(e,n,r){return r.indexOf(e)===n})},renderLimits:function(t){var e=this;this.markerCache.forEach(function(n){t.includes(n)?e._markerGroup.addLayer(n):e._markerGroup.removeLayer(n)})},applyLimitFilters:function(t){var e=t.latlng,n=e===void 0?{lat:0,lng:0}:e;if(!this._preventRenderMarkers){var r=de(this._filterClosestMarkers(n));this.renderLimits(r)}},_filterClosestMarkers:function(t){var e=de(this.markerCache),n=this.options.limitMarkersToCount;return n===-1?e:(e.sort(function(r,i){return r._latlng.distanceTo(t)-i._latlng.distanceTo(t)}),e.filter(function(r,i){return!(n>-1)||i<n}))},_preventRenderMarkers:!1,_preventRenderingMarkers:function(t){this._preventRenderMarkers=!!t}};function Tn(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,r){var i=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var p,_,v=[],y=!0,M=!1;try{for(i=i.call(n);!(y=(p=i.next()).done)&&(v.push(p.value),!r||v.length!==r);y=!0);}catch(D){M=!0,_=D}finally{try{y||i.return==null||i.return()}finally{if(M)throw _}}return v}}(t,e)||function(n,r){if(!!n){if(typeof n=="string")return Ze(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ze(n,r)}}(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ze(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function In(t){return function(e){if(Array.isArray(e))return Pe(e)}(t)||function(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(!!e){if(typeof e=="string")return Pe(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pe(e,n)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Pe(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}kt.Line=kt.extend({includes:[Rn],_shape:"Line",initialize:function(t){this._layer=t,this._enabled=!1},enable:function(t){L.Util.setOptions(this,t),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()):this.disable())},disable:function(){if(this.enabled()&&!this._dragging){this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);var t=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(t,"leaflet-pm-draggable"),this._map.hasLayer(this._layer)&&!this.hasSelfIntersection()||L.DomUtil.removeClass(t,"leaflet-pm-invalid"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()}},enabled:function(){return this._enabled},toggleEdit:function(t){return this.enabled()?this.disable():this.enable(t),this.enabled()},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers:function(){var t=this,e=this._map,n=this._layer.getLatLngs();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,this._markers=function r(i){if(Array.isArray(i[0]))return i.map(r,t);var p=i.map(t._createMarker,t);return t.options.hideMiddleMarkers!==!0&&i.map(function(_,v){var y=t.isPolygon()?(v+1)%i.length:v+1;return t._createMiddleMarker(p[v],p[y])}),p}(n),this.filterMarkerGroup(),e.addLayer(this._markerGroup)},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._pmTempLayer=!0,this.options.rotate?(e.on("dragstart",this._onRotateStart,this),e.on("drag",this._onRotate,this),e.on("dragend",this._onRotateEnd,this)):(e.on("click",this._onVertexClick,this),e.on("dragstart",this._onMarkerDragStart,this),e.on("move",this._onMarkerDrag,this),e.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||e.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(e),e},_createMiddleMarker:function(t,e){if(!t||!e)return!1;var n=L.PM.Utils.calcMiddleLatLng(this._map,t.getLatLng(),e.getLatLng()),r=this._createMarker(n),i=L.divIcon({className:"marker-icon marker-icon-middle"});return r.setIcon(i),r.leftM=t,r.rightM=e,t._middleMarkerNext=r,e._middleMarkerPrev=r,r.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),r.on("movestart",this._onMiddleMarkerMoveStart,this),r},_onMiddleMarkerClick:function(t){var e=t.target;if(this._vertexValidation("add",t)){var n=L.divIcon({className:"marker-icon"});e.setIcon(n),this._addMarker(e,e.leftM,e.rightM)}},_onMiddleMarkerMoveStart:function(t){var e=t.target;e.on("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidation("add",t)?(e._dragging=!0,this._addMarker(e,e.leftM,e.rightM)):e.on("move",this._onMiddleMarkerMovePrevent,this)},_onMiddleMarkerMovePrevent:function(t){var e=t.target;this._vertexValidationDrag(e)},_onMiddleMarkerMoveEnd:function(t){var e=t.target;if(e.off("move",this._onMiddleMarkerMovePrevent,this),e.off("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidationDragEnd(e)){var n=L.divIcon({className:"marker-icon"});e.setIcon(n),setTimeout(function(){delete e._dragging},100)}},_addMarker:function(t,e,n){t.off("movestart",this._onMiddleMarkerMoveStart,this),t.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);var r=t.getLatLng(),i=this._layer._latlngs;delete t.leftM,delete t.rightM;var p=L.PM.Utils.findDeepMarkerIndex(this._markers,e),_=p.indexPath,v=p.index,y=p.parentPath,M=_.length>1?pt()(i,y):i,D=_.length>1?pt()(this._markers,y):this._markers;M.splice(v+1,0,r),D.splice(v+1,0,t),this._layer.setLatLngs(i),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(e,t),this._createMiddleMarker(t,n)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(t,L.PM.Utils.findDeepMarkerIndex(this._markers,t).indexPath,r),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection:function(){return bt(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval:function(){this._handleLayerStyle(!0),this.hasSelfIntersection()&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle:function(t){var e=this._layer;if(this.hasSelfIntersection()){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return;t?this._flashLayer():(e.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(bt(this._layer.toGeoJSON(15)))}else e.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1)},_flashLayer:function(){var t=this;this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(function(){t._layer.setStyle({color:t.cachedColor}),t.isRed=!1},200)},_updateDisabledMarkerStyle:function(t,e){var n=this;t.forEach(function(r){Array.isArray(r)?n._updateDisabledMarkerStyle(r,e):r._icon&&(e&&!n._checkMarkerAllowedToDrag(r)?L.DomUtil.addClass(r._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(r._icon,"vertexmarker-disabled"))})},_removeMarker:function(t){var e=t.target;if(this._vertexValidation("remove",t)){this.options.allowSelfIntersection||(this._coordsBeforeEdit=jt(this._layer,this._layer.getLatLngs()));var n=this._layer.getLatLngs(),r=L.PM.Utils.findDeepMarkerIndex(this._markers,e),i=r.indexPath,p=r.index,_=r.parentPath;if(i){var v=i.length>1?pt()(n,_):n,y=i.length>1?pt()(this._markers,_):this._markers;if(this.options.removeLayerBelowMinVertexCount||!(v.length<=2||this.isPolygon()&&v.length<=3)){v.splice(p,1),this._layer.setLatLngs(n),this.isPolygon()&&v.length<=2&&v.splice(0,v.length);var M=!1;if(v.length<=1&&(v.splice(0,v.length),_.length>1&&i.length>1&&(n=Yt(n)),this._layer.setLatLngs(n),this._initMarkers(),M=!0),gt(n)||this._layer.remove(),n=Yt(n),this._layer.setLatLngs(n),this._markers=Yt(this._markers),!M&&(y=i.length>1?pt()(this._markers,_):this._markers,e._middleMarkerPrev&&this._markerGroup.removeLayer(e._middleMarkerPrev),e._middleMarkerNext&&this._markerGroup.removeLayer(e._middleMarkerNext),this._markerGroup.removeLayer(e),y)){var D,G;if(this.isPolygon()?(D=(p+1)%y.length,G=(p+(y.length-1))%y.length):(G=p-1<0?void 0:p-1,D=p+1>=y.length?void 0:p+1),D!==G){var j=y[G],V=y[D];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(j,V)}y.splice(p,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(e,i),this._fireChange(this._layer.getLatLngs(),"Edit")}else this._flashLayer()}}},updatePolygonCoordsFromMarkerDrag:function(t){var e=this._layer.getLatLngs(),n=t.getLatLng(),r=L.PM.Utils.findDeepMarkerIndex(this._markers,t),i=r.indexPath,p=r.index,_=r.parentPath;(i.length>1?pt()(e,_):e).splice(p,1,n),this._layer.setLatLngs(e)},_getNeighborMarkers:function(t){var e=L.PM.Utils.findDeepMarkerIndex(this._markers,t),n=e.indexPath,r=e.index,i=e.parentPath,p=n.length>1?pt()(this._markers,i):this._markers,_=(r+1)%p.length;return{prevMarker:p[(r+(p.length-1))%p.length],nextMarker:p[_]}},_checkMarkerAllowedToDrag:function(t){var e=this._getNeighborMarkers(t),n=e.prevMarker,r=e.nextMarker,i=L.polyline([n.getLatLng(),t.getLatLng()]),p=L.polyline([t.getLatLng(),r.getLatLng()]),_=Ht(this._layer.toGeoJSON(15),i.toGeoJSON(15)).features.length,v=Ht(this._layer.toGeoJSON(15),p.toGeoJSON(15)).features.length;return t.getLatLng()===this._markers[0][0].getLatLng()?v+=1:t.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(_+=1),!(_<=2&&v<=2)},_onMarkerDragStart:function(t){var e=t.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),this._vertexValidation("move",t)){var n=L.PM.Utils.findDeepMarkerIndex(this._markers,e).indexPath;this._fireMarkerDragStart(t,n),this.options.allowSelfIntersection||(this._coordsBeforeEdit=jt(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(e):this._markerAllowedToDrag=null}},_onMarkerDrag:function(t){var e=t.target;if(this._vertexValidationDrag(e)){var n=L.PM.Utils.findDeepMarkerIndex(this._markers,e),r=n.indexPath,i=n.index,p=n.parentPath;if(r){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1)return this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),void this._handleLayerStyle();this.updatePolygonCoordsFromMarkerDrag(e);var _=r.length>1?pt()(this._markers,p):this._markers,v=(i+1)%_.length,y=(i+(_.length-1))%_.length,M=e.getLatLng(),D=_[y].getLatLng(),G=_[v].getLatLng();if(e._middleMarkerNext){var j=L.PM.Utils.calcMiddleLatLng(this._map,M,G);e._middleMarkerNext.setLatLng(j)}if(e._middleMarkerPrev){var V=L.PM.Utils.calcMiddleLatLng(this._map,M,D);e._middleMarkerPrev.setLatLng(V)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(t,r),this._fireChange(this._layer.getLatLngs(),"Edit")}}},_onMarkerDragEnd:function(t){var e=t.target;if(this._vertexValidationDragEnd(e)){var n=L.PM.Utils.findDeepMarkerIndex(this._markers,e).indexPath,r=this.hasSelfIntersection();r&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(r=!1);var i=!this.options.allowSelfIntersection&&r;if(this._fireMarkerDragEnd(t,n,i),i)return this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),void this._fireLayerReset(t,n);!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")}},_onVertexClick:function(t){var e=t.target;if(!e._dragging){var n=L.PM.Utils.findDeepMarkerIndex(this._markers,e).indexPath;this._fireVertexClick(t,n)}}}),kt.Polygon=kt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag:function(t){var e=this._getNeighborMarkers(t),n=e.prevMarker,r=e.nextMarker,i=L.polyline([n.getLatLng(),t.getLatLng()]),p=L.polyline([t.getLatLng(),r.getLatLng()]),_=Ht(this._layer.toGeoJSON(15),i.toGeoJSON(15)).features.length,v=Ht(this._layer.toGeoJSON(15),p.toGeoJSON(15)).features.length;return!(_<=2&&v<=2)}}),kt.Rectangle=kt.Polygon.extend({_shape:"Rectangle",_initMarkers:function(){var t=this,e=this._map,n=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,e.addLayer(this._markerGroup),this._markers=[],this._markers[0]=n.map(this._createMarker,this);var r=Tn(this._markers,1);this._cornerMarkers=r[0],this._layer.getLatLngs()[0].forEach(function(i,p){var _=t._cornerMarkers.find(function(v){return v._index===p});_&&_.setLatLng(i)})},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker:function(t,e){var n=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(n,"vertexPane"),n._origLatLng=t,n._index=e,n._pmTempLayer=!0,this._markerGroup.addLayer(n),n},_addMarkerEvents:function(){var t=this;this._markers[0].forEach(function(e){e.on("dragstart",t._onMarkerDragStart,t),e.on("drag",t._onMarkerDrag,t),e.on("dragend",t._onMarkerDragEnd,t),t.options.preventMarkerRemoval||e.on("contextmenu",t._removeMarker,t)})},_removeMarker:function(){return null},_onMarkerDragStart:function(t){if(this._vertexValidation("move",t)){var e=t.target,n=this._cornerMarkers;e._oppositeCornerLatLng=n.find(function(r){return r._index===(e._index+2)%4}).getLatLng(),e._snapped=!1,this._fireMarkerDragStart(t)}},_onMarkerDrag:function(t){var e=t.target;this._vertexValidationDrag(e)&&e._index!==void 0&&(this._adjustRectangleForMarkerMove(e),this._fireMarkerDrag(t),this._fireChange(this._layer.getLatLngs(),"Edit"))},_onMarkerDragEnd:function(t){var e=t.target;this._vertexValidationDragEnd(e)&&(this._cornerMarkers.forEach(function(n){delete n._oppositeCornerLatLng}),this._fireMarkerDragEnd(t),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"))},_adjustRectangleForMarkerMove:function(t){L.extend(t._origLatLng,t._latlng);var e=L.PM.Utils._getRotatedRectangle(t.getLatLng(),t._oppositeCornerLatLng,this._angle||0,this._map);this._layer.setLatLngs(e),this._adjustAllMarkers(),this._layer.redraw()},_adjustAllMarkers:function(){var t=this,e=this._layer.getLatLngs()[0];e&&e.length!==4&&e.length>0?(e.forEach(function(n,r){t._cornerMarkers[r].setLatLng(n)}),this._cornerMarkers.slice(e.length).forEach(function(n){n.setLatLng(e[0])})):e&&e.length?this._cornerMarkers.forEach(function(n){n.setLatLng(e[n._index])}):console.error("The layer has no LatLngs")},_findCorners:function(){var t=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(t[0],t[2],this._angle||0,this._map)}}),kt.Circle=kt.extend({_shape:"Circle",initialize:function(t){this._layer=t,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(t){L.Util.setOptions(this,t),this._map=this._layer._map,this.options.allowEditing?(this.enabled()||this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){if(this.enabled()&&!this._dragging){this._centerMarker.off("dragstart",this._onCircleDragStart,this),this._centerMarker.off("drag",this._onCircleDrag,this),this._centerMarker.off("dragend",this._onCircleDragEnd,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this),this._layer.off("remove",this.disable,this),this._enabled=!1,this._helperLayers.clearLayers();var t=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(t,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()}},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},_initMarkers:function(){var t=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(t);var e=this._layer.getLatLng(),n=this._layer._radius,r=this._getLatLngOnCircle(e,n);this._centerMarker=this._createCenterMarker(e),this._outerMarker=this._createOuterMarker(r),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},applyOptions:function(){this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this),this._centerMarker.on("move",this._moveCircle,this)):this._disableSnapping()},_createHintLine:function(t,e){var n=t.getLatLng(),r=e.getLatLng();this._hintline=L.polyline([n,r],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(t){var e=this._createMarker(t);return L.DomUtil.addClass(e._icon,"leaflet-pm-draggable"),e.on("drag",this._moveCircle,this),e.on("dragstart",this._onCircleDragStart,this),e.on("drag",this._onCircleDrag,this),e.on("dragend",this._onCircleDragEnd,this),e},_createOuterMarker:function(t){var e=this._createMarker(t);return e.on("drag",this._resizeCircle,this),e},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._origLatLng=t,e._pmTempLayer=!0,e.on("dragstart",this._onMarkerDragStart,this),e.on("drag",this._onMarkerDrag,this),e.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(e),e},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_moveCircle:function(t){if(!t.target._cancelDragEventChain){var e=t.latlng;this._layer.setLatLng(e);var n=this._layer._radius,r=this._getLatLngOnCircle(e,n);this._outerMarker._latlng=r,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")}},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),n=this._map.distance(t,e);this.options.minRadiusCircle&&n<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&n>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(n),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng();this._hintline.setLatLngs([t,e])},_disableSnapping:function(){var t=this;this._markers.forEach(function(e){e.off("move",t._syncHintLine,t),e.off("move",t._syncCircleRadius,t),e.off("drag",t._handleSnapping,t),e.off("dragend",t._cleanupSnapping,t)}),this._layer.off("pm:dragstart",this._unsnap,this)},_onMarkerDragStart:function(t){this._vertexValidation("move",t)&&this._fireMarkerDragStart(t)},_onMarkerDrag:function(t){var e=t.target;this._vertexValidationDrag(e)&&this._fireMarkerDrag(t)},_onMarkerDragEnd:function(t){var e=t.target;this._vertexValidationDragEnd(e)&&(this._fireEdit(),this._layerEdited=!0,this._fireMarkerDragEnd(t))},_onCircleDragStart:function(t){this._vertexValidationDrag(t.target)?(delete this._vertexValidationReset,this._fireDragStart()):this._vertexValidationReset=!0},_onCircleDrag:function(t){this._vertexValidationReset||this._fireDrag(t)},_onCircleDragEnd:function(){this._vertexValidationReset?delete this._vertexValidationReset:this._fireDragEnd()},_updateHiddenPolyCircle:function(){var t=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!t).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!t),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_getLatLngOnCircle:function(t,e){var n=this._map.project(t),r=L.point(n.x+e,n.y);return this._map.unproject(r)},_getNewDestinationOfOuterMarker:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),n=this._map.distance(t,e);return this.options.minRadiusCircle&&n<this.options.minRadiusCircle?e=It(this._map,t,e,this.options.minRadiusCircle):this.options.maxRadiusCircle&&n>this.options.maxRadiusCircle&&(e=It(this._map,t,e,this.options.maxRadiusCircle)),e},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),n=this._map.distance(t,e);(this.options.minRadiusCircle&&n<this.options.minRadiusCircle||this.options.maxRadiusCircle&&n>this.options.maxRadiusCircle)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),kt.CircleMarker=kt.extend({_shape:"CircleMarker",initialize:function(t){this._layer=t,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,t),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){this._dragging||(this._helperLayers&&this._helperLayers.clearLayers(),this._map||(this._map=this._layer._map),this._map||(this.options.editable?(this._map.off("move",this._syncMarkers,this),this._outerMarker&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this)),this.disableLayerDrag(),this._layer.off("contextmenu",this._removeMarker,this),this._layer.off("remove",this.disable,this),this.enabled()&&(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},applyOptions:function(){!this.options.editable&&this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.editable?(this._initMarkers(),this._map.on("move",this._syncMarkers,this)):this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this.options.editable?(this._initSnappableMarkers(),this._centerMarker.on("drag",this._moveCircle,this),this.options.editable&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._initSnappableMarkersDrag():this.options.editable?this._disableSnapping():this._disableSnappingDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers:function(){var t=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(t);var e=this._layer.getLatLng(),n=this._layer._radius,r=this._getLatLngOnCircle(e,n);this._centerMarker=this._createCenterMarker(e),this._outerMarker=this._createOuterMarker(r),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle:function(t,e){var n=this._map.project(t),r=L.point(n.x+e,n.y);return this._map.unproject(r)},_createHintLine:function(t,e){var n=t.getLatLng(),r=e.getLatLng();this._hintline=L.polyline([n,r],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(t){var e=this._createMarker(t);return this.options.draggable?L.DomUtil.addClass(e._icon,"leaflet-pm-draggable"):e.dragging.disable(),e},_createOuterMarker:function(t){var e=this._createMarker(t);return e.on("drag",this._resizeCircle,this),e},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._origLatLng=t,e._pmTempLayer=!0,e.on("dragstart",this._onMarkerDragStart,this),e.on("drag",this._onMarkerDrag,this),e.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(e),e},_moveCircle:function(){var t=this._centerMarker.getLatLng();this._layer.setLatLng(t);var e=this._layer._radius,n=this._getLatLngOnCircle(t,e);this._outerMarker._latlng=n,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers:function(){var t=this._layer.getLatLng(),e=this._layer._radius,n=this._getLatLngOnCircle(t,e);this._outerMarker.setLatLng(n),this._centerMarker.setLatLng(t),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),n=this._map.project(t).distanceTo(this._map.project(e));this.options.minRadiusCircleMarker&&n<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&n>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(n),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng();this._hintline.setLatLngs([t,e])},_removeMarker:function(){this.options.editable&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart:function(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart:function(t){this._vertexValidation("move",t)&&this._fireMarkerDragStart(t)},_onMarkerDrag:function(t){var e=t.target;e instanceof L.Marker&&!this._vertexValidationDrag(e)||this._fireMarkerDrag(t)},_onMarkerDragEnd:function(t){this._map.pm.Draw.CircleMarker._layerIsDragging=!1;var e=t.target;this._vertexValidationDragEnd(e)&&(this.options.editable&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(t))},_initSnappableMarkersDrag:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,t.off("pm:drag",this._handleSnapping,this),t.on("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.on("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag:function(){var t=this._layer;t.off("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle:function(){var t=this._layer._map||this._map;if(t){var e=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),t,this._layer.getLatLng()),n=L.circle(this._layer.getLatLng(),this._layer.options);n.setRadius(e);var r=t&&t.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(n,200,!r).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(n,200,!r),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),n=this._map.project(t).distanceTo(this._map.project(e));return this.options.minRadiusCircleMarker&&n<this.options.minRadiusCircleMarker?e=It(this._map,t,e,L.PM.Utils.pxRadiusToMeterRadius(this.options.minRadiusCircleMarker,this._map,t)):this.options.maxRadiusCircleMarker&&n>this.options.maxRadiusCircleMarker&&(e=It(this._map,t,e,L.PM.Utils.pxRadiusToMeterRadius(this.options.maxRadiusCircleMarker,this._map,t))),e},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),n=this._map.project(t).distanceTo(this._map.project(e));(this.options.minRadiusCircleMarker&&n<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&n>this.options.maxRadiusCircleMarker)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),kt.ImageOverlay=kt.extend({_shape:"ImageOverlay",initialize:function(t){this._layer=t,this._enabled=!1},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},enabled:function(){return this._enabled},enable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,t),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()):this.disable())},disable:function(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners:function(){var t=this._layer.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]}}),kt.Text=kt.extend({_shape:"Text",initialize:function(t){this._layer=t,this._enabled=!1},enable:function(t){L.Util.setOptions(this,t),this.textArea&&(this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()):this.disable())},disable:function(){if(this.enabled()){this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");var t=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),t.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1}},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,t.off("pm:drag",this._handleSnapping,this),t.on("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.on("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var t=this._layer;t.off("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)},_autoResize:function(){this.textArea.style.height="1px",this.textArea.style.width="1px";var t=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,e=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height="".concat(t,"px"),this.textArea.style.width="".concat(e,"px"),this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur:function(){var t=this;this._disableOnBlurActive=!0,setTimeout(function(){t.enabled()&&L.DomEvent.on(document,"click",t._documentClick,t)},100)},_documentClick:function(t){t.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=this._hasFocus;this._hasFocus=t.type==="focus",!e!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus:function(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus:function(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus:function(){return this._hasFocus},getElement:function(){return this.textArea},setText:function(t){this.textArea.value=t,this._autoResize()},getText:function(){return this.textArea.value},_initTextMarker:function(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){var t,e=this.options.className.split(" ");(t=this.textArea.classList).add.apply(t,In(e))}var n=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(n),this._layer.once("add",this._createTextMarker,this)},_createTextMarker:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),t===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection:function(t){t.preventDefault()}});var Ee=function(t,e,n,r,i,p){this._matrix=[t,e,n,r,i,p]};Ee.init=function(){return new L.PM.Matrix(1,0,0,1,0,0)},Ee.prototype={transform:function(t){return this._transform(t.clone())},_transform:function(t){var e=this._matrix,n=t.x,r=t.y;return t.x=e[0]*n+e[1]*r+e[4],t.y=e[2]*n+e[3]*r+e[5],t},untransform:function(t){var e=this._matrix;return new L.Point((t.x/e[0]-e[4])/e[0],(t.y/e[2]-e[5])/e[2])},clone:function(){var t=this._matrix;return new L.PM.Matrix(t[0],t[1],t[2],t[3],t[4],t[5])},translate:function(t){return t===void 0?new L.Point(this._matrix[4],this._matrix[5]):(typeof t=="number"?(e=t,n=t):(e=t.x,n=t.y),this._add(1,0,0,1,e,n));var e,n},scale:function(t,e){return t===void 0?new L.Point(this._matrix[0],this._matrix[3]):(e=e||L.point(0,0),typeof t=="number"?(n=t,r=t):(n=t.x,r=t.y),this._add(n,0,0,r,e.x,e.y)._add(1,0,0,1,-e.x,-e.y));var n,r},rotate:function(t,e){var n=Math.cos(t),r=Math.sin(t);return e=e||new L.Point(0,0),this._add(n,r,-r,n,e.x,e.y)._add(1,0,0,1,-e.x,-e.y)},flip:function(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add:function(t,e,n,r,i,p){var _,v=[[],[],[]],y=this._matrix,M=[[y[0],y[2],y[4]],[y[1],y[3],y[5]],[0,0,1]],D=[[t,n,i],[e,r,p],[0,0,1]];t&&t instanceof L.PM.Matrix&&(D=[[(y=t._matrix)[0],y[2],y[4]],[y[1],y[3],y[5]],[0,0,1]]);for(var G=0;G<3;G+=1)for(var j=0;j<3;j+=1){_=0;for(var V=0;V<3;V+=1)_+=M[G][V]*D[V][j];v[G][j]=_}return this._matrix=[v[0][0],v[1][0],v[0][1],v[1][1],v[0][2],v[1][2]],this}};const jn=Ee;var An={calcMiddleLatLng:function(t,e,n){var r=t.project(e),i=t.project(n);return t.unproject(r._add(i)._divideBy(2))},findLayers:function(t){var e=[];return t.eachLayer(function(n){(n instanceof L.Polyline||n instanceof L.Marker||n instanceof L.Circle||n instanceof L.CircleMarker||n instanceof L.ImageOverlay)&&e.push(n)}),e=(e=(e=e.filter(function(n){return!!n.pm})).filter(function(n){return!n._pmTempLayer})).filter(function(n){return!L.PM.optIn&&!n.options.pmIgnore||L.PM.optIn&&n.options.pmIgnore===!1})},circleToPolygon:function(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],r=t.getLatLng(),i=t.getRadius(),p=$t(r,i,e,0,n),_=[],v=0;v<p.length;v+=1){var y=[p[v].lat,p[v].lng];_.push(y)}return L.polygon(_,t.options)},disablePopup:function(t){t.getPopup()&&(t._tempPopupCopy=t.getPopup(),t.unbindPopup())},enablePopup:function(t){t._tempPopupCopy&&(t.bindPopup(t._tempPopupCopy),delete t._tempPopupCopy)},_fireEvent:function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0&&arguments[3];t.fire(e,n,r);var i=this.getAllParentGroups(t),p=i.groups;p.forEach(function(_){_.fire(e,n,r)})},getAllParentGroups:function(t){var e=[],n=[];return!t._pmLastGroupFetch||!t._pmLastGroupFetch.time||new Date().getTime()-t._pmLastGroupFetch.time>1e3?(function r(i){for(var p in i._eventParents)if(e.indexOf(p)===-1){e.push(p);var _=i._eventParents[p];n.push(_),r(_)}}(t),t._pmLastGroupFetch={time:new Date().getTime(),groups:n,groupIds:e},{groupIds:e,groups:n}):{groups:t._pmLastGroupFetch.groups,groupIds:t._pmLastGroupFetch.groupIds}},createGeodesicPolygon:$t,getTranslation:st,findDeepCoordIndex:function(t,e){var n,r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],i=function _(v){return function(y,M){var D=v.concat(M);if(r){if(y.lat&&y.lat===e.lat&&y.lng===e.lng)return n=D,!0}else if(y.lat&&L.latLng(y).equals(e))return n=D,!0;return Array.isArray(y)&&y.some(_(D))}};t.some(i([]));var p={};return n&&(p={indexPath:n,index:n[n.length-1],parentPath:n.slice(0,n.length-1)}),p},findDeepMarkerIndex:function(t,e){var n;t.some(function i(p){return function(_,v){var y=p.concat(v);return _._leaflet_id===e._leaflet_id?(n=y,!0):Array.isArray(_)&&_.some(i(y))}}([]));var r={};return n&&(r={indexPath:n,index:n[n.length-1],parentPath:n.slice(0,n.length-1)}),r},_getIndexFromSegment:function(t,e){if(e&&e.length===2){var n=this.findDeepCoordIndex(t,e[0]),r=this.findDeepCoordIndex(t,e[1]),i=Math.max(n.index,r.index);return n.index!==0&&r.index!==0||i===1||(i+=1),{indexA:n,indexB:r,newIndex:i,indexPath:n.indexPath,parentPath:n.parentPath}}return null},_getRotatedRectangle:function(t,e,n,r){var i=Zt(r,t),p=Zt(r,e),_=n*Math.PI/180,v=Math.cos(_),y=Math.sin(_),M=(p.x-i.x)*v+(p.y-i.y)*y,D=(p.y-i.y)*v-(p.x-i.x)*y,G=M*v+i.x,j=M*y+i.y,V=-D*y+i.x,Y=D*v+i.y;return[pe(r,i),pe(r,{x:G,y:j}),pe(r,p),pe(r,{x:V,y:Y})]},pxRadiusToMeterRadius:function(t,e,n){var r=e.project(n),i=L.point(r.x+t,r.y);return e.distance(e.unproject(i),n)}};const Gn=An;L.PM=L.PM||{version:"2.14.2",Map:fe,Toolbar:me,Draw:k,Edit:kt,Utils:Gn,Matrix:jn,activeLang:"en",optIn:!1,initialize:function(t){this.addInitHooks(t)},setOptIn:function(t){this.optIn=!!t},addInitHooks:function(){L.Map.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}),L.LayerGroup.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}),L.Marker.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}),L.CircleMarker.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}),L.Polyline.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}),L.Polygon.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}),L.Rectangle.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}),L.Circle.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}),L.ImageOverlay.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))})},reInitLayer:function(t){var e=this;t instanceof L.LayerGroup&&t.eachLayer(function(n){e.reInitLayer(n)}),t.pm||L.PM.optIn&&t.options.pmIgnore!==!1||t.options.pmIgnore||(t instanceof L.Map?t.pm=new L.PM.Map(t):t instanceof L.Marker?t.options.textMarker?(t.pm=new L.PM.Edit.Text(t),t.pm._initTextMarker(),t.pm._createTextMarker(!1)):t.pm=new L.PM.Edit.Marker(t):t instanceof L.Circle?t.pm=new L.PM.Edit.Circle(t):t instanceof L.CircleMarker?t.pm=new L.PM.Edit.CircleMarker(t):t instanceof L.Rectangle?t.pm=new L.PM.Edit.Rectangle(t):t instanceof L.Polygon?t.pm=new L.PM.Edit.Polygon(t):t instanceof L.Polyline?t.pm=new L.PM.Edit.Line(t):t instanceof L.LayerGroup?t.pm=new L.PM.Edit.LayerGroup(t):t instanceof L.ImageOverlay&&(t.pm=new L.PM.Edit.ImageOverlay(t)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick:function(t){for(var e,n,r=this._map.mouseEventToLayerPoint(t),i=this._drawFirst;i;i=i.next)(e=i.layer).options.interactive&&e._containsPoint(r)&&(t.type!=="click"&&t.type!=="preclick"||!this._map._draggableMoved(e))&&(n=e);n&&(L.DomEvent.fakeStop(t),this._fireEvent([n],t))}}),L.PM.initialize()},7107:()=>{Array.prototype.findIndex=Array.prototype.findIndex||function(h){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var u=Object(this),o=u.length>>>0,c=arguments[1],s=0;s<o;s++)if(h.call(c,u[s],s,u))return s;return-1},Array.prototype.find=Array.prototype.find||function(h){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var u=Object(this),o=u.length>>>0,c=arguments[1],s=0;s<o;s++){var f=u[s];if(h.call(c,f,s,u))return f}},typeof Object.assign!="function"&&(Object.assign=function(h){if(h==null)throw new TypeError("Cannot convert undefined or null to object");h=Object(h);for(var u=1;u<arguments.length;u++){var o=arguments[u];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(h[c]=o[c])}return h}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(h){h.hasOwnProperty("remove")||Object.defineProperty(h,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(h,u){if(this==null)throw new TypeError('"this" is null or not defined');var o=Object(this),c=o.length>>>0;if(c===0)return!1;for(var s,f,d=0|u,x=Math.max(d>=0?d:c-Math.abs(d),0);x<c;){if((s=o[x])===(f=h)||typeof s=="number"&&typeof f=="number"&&isNaN(s)&&isNaN(f))return!0;x++}return!1}})},1787:(h,u,o)=>{var c=o(2582),s=o(4102),f=o(1540),d=o(9705).Z,x=f.featureEach,T=(f.coordEach,s.polygon,s.featureCollection);function A(U){var R=new c(U);return R.insert=function(E){if(E.type!=="Feature")throw new Error("invalid feature");return E.bbox=E.bbox?E.bbox:d(E),c.prototype.insert.call(this,E)},R.load=function(E){var I=[];return Array.isArray(E)?E.forEach(function(P){if(P.type!=="Feature")throw new Error("invalid features");P.bbox=P.bbox?P.bbox:d(P),I.push(P)}):x(E,function(P){if(P.type!=="Feature")throw new Error("invalid features");P.bbox=P.bbox?P.bbox:d(P),I.push(P)}),c.prototype.load.call(this,I)},R.remove=function(E,I){if(E.type!=="Feature")throw new Error("invalid feature");return E.bbox=E.bbox?E.bbox:d(E),c.prototype.remove.call(this,E,I)},R.clear=function(){return c.prototype.clear.call(this)},R.search=function(E){var I=c.prototype.search.call(this,this.toBBox(E));return T(I)},R.collides=function(E){return c.prototype.collides.call(this,this.toBBox(E))},R.all=function(){var E=c.prototype.all.call(this);return T(E)},R.toJSON=function(){return c.prototype.toJSON.call(this)},R.fromJSON=function(E){return c.prototype.fromJSON.call(this,E)},R.toBBox=function(E){var I;if(E.bbox)I=E.bbox;else if(Array.isArray(E)&&E.length===4)I=E;else if(Array.isArray(E)&&E.length===6)I=[E[0],E[1],E[3],E[4]];else if(E.type==="Feature")I=d(E);else{if(E.type!=="FeatureCollection")throw new Error("invalid geojson");I=d(E)}return{minX:I[0],minY:I[1],maxX:I[2],maxY:I[3]}},R}h.exports=A,h.exports.default=A},1989:(h,u,o)=>{var c=o(1789),s=o(401),f=o(7667),d=o(1327),x=o(1866);function T(A){var U=-1,R=A==null?0:A.length;for(this.clear();++U<R;){var E=A[U];this.set(E[0],E[1])}}T.prototype.clear=c,T.prototype.delete=s,T.prototype.get=f,T.prototype.has=d,T.prototype.set=x,h.exports=T},8407:(h,u,o)=>{var c=o(7040),s=o(4125),f=o(2117),d=o(7518),x=o(4705);function T(A){var U=-1,R=A==null?0:A.length;for(this.clear();++U<R;){var E=A[U];this.set(E[0],E[1])}}T.prototype.clear=c,T.prototype.delete=s,T.prototype.get=f,T.prototype.has=d,T.prototype.set=x,h.exports=T},7071:(h,u,o)=>{var c=o(852)(o(5639),"Map");h.exports=c},3369:(h,u,o)=>{var c=o(4785),s=o(1285),f=o(6e3),d=o(9916),x=o(5265);function T(A){var U=-1,R=A==null?0:A.length;for(this.clear();++U<R;){var E=A[U];this.set(E[0],E[1])}}T.prototype.clear=c,T.prototype.delete=s,T.prototype.get=f,T.prototype.has=d,T.prototype.set=x,h.exports=T},6384:(h,u,o)=>{var c=o(8407),s=o(7465),f=o(3779),d=o(7599),x=o(4758),T=o(4309);function A(U){var R=this.__data__=new c(U);this.size=R.size}A.prototype.clear=s,A.prototype.delete=f,A.prototype.get=d,A.prototype.has=x,A.prototype.set=T,h.exports=A},2705:(h,u,o)=>{var c=o(5639).Symbol;h.exports=c},1149:(h,u,o)=>{var c=o(5639).Uint8Array;h.exports=c},6874:h=>{h.exports=function(u,o,c){switch(c.length){case 0:return u.call(o);case 1:return u.call(o,c[0]);case 2:return u.call(o,c[0],c[1]);case 3:return u.call(o,c[0],c[1],c[2])}return u.apply(o,c)}},4636:(h,u,o)=>{var c=o(2545),s=o(5694),f=o(1469),d=o(4144),x=o(5776),T=o(6719),A=Object.prototype.hasOwnProperty;h.exports=function(U,R){var E=f(U),I=!E&&s(U),P=!E&&!I&&d(U),S=!E&&!I&&!P&&T(U),B=E||I||P||S,m=B?c(U.length,String):[],w=m.length;for(var O in U)!R&&!A.call(U,O)||B&&(O=="length"||P&&(O=="offset"||O=="parent")||S&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||x(O,w))||m.push(O);return m}},9932:h=>{h.exports=function(u,o){for(var c=-1,s=u==null?0:u.length,f=Array(s);++c<s;)f[c]=o(u[c],c,u);return f}},6556:(h,u,o)=>{var c=o(9465),s=o(7813);h.exports=function(f,d,x){(x!==void 0&&!s(f[d],x)||x===void 0&&!(d in f))&&c(f,d,x)}},4865:(h,u,o)=>{var c=o(9465),s=o(7813),f=Object.prototype.hasOwnProperty;h.exports=function(d,x,T){var A=d[x];f.call(d,x)&&s(A,T)&&(T!==void 0||x in d)||c(d,x,T)}},8470:(h,u,o)=>{var c=o(7813);h.exports=function(s,f){for(var d=s.length;d--;)if(c(s[d][0],f))return d;return-1}},9465:(h,u,o)=>{var c=o(8777);h.exports=function(s,f,d){f=="__proto__"&&c?c(s,f,{configurable:!0,enumerable:!0,value:d,writable:!0}):s[f]=d}},3118:(h,u,o)=>{var c=o(3218),s=Object.create,f=function(){function d(){}return function(x){if(!c(x))return{};if(s)return s(x);d.prototype=x;var T=new d;return d.prototype=void 0,T}}();h.exports=f},8483:(h,u,o)=>{var c=o(5063)();h.exports=c},7786:(h,u,o)=>{var c=o(1811),s=o(327);h.exports=function(f,d){for(var x=0,T=(d=c(d,f)).length;f!=null&&x<T;)f=f[s(d[x++])];return x&&x==T?f:void 0}},4239:(h,u,o)=>{var c=o(2705),s=o(9607),f=o(2333),d=c?c.toStringTag:void 0;h.exports=function(x){return x==null?x===void 0?"[object Undefined]":"[object Null]":d&&d in Object(x)?s(x):f(x)}},8565:h=>{var u=Object.prototype.hasOwnProperty;h.exports=function(o,c){return o!=null&&u.call(o,c)}},9454:(h,u,o)=>{var c=o(4239),s=o(7005);h.exports=function(f){return s(f)&&c(f)=="[object Arguments]"}},8458:(h,u,o)=>{var c=o(3560),s=o(5346),f=o(3218),d=o(346),x=/^\[object .+?Constructor\]$/,T=Function.prototype,A=Object.prototype,U=T.toString,R=A.hasOwnProperty,E=RegExp("^"+U.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");h.exports=function(I){return!(!f(I)||s(I))&&(c(I)?E:x).test(d(I))}},8749:(h,u,o)=>{var c=o(4239),s=o(1780),f=o(7005),d={};d["[object Float32Array]"]=d["[object Float64Array]"]=d["[object Int8Array]"]=d["[object Int16Array]"]=d["[object Int32Array]"]=d["[object Uint8Array]"]=d["[object Uint8ClampedArray]"]=d["[object Uint16Array]"]=d["[object Uint32Array]"]=!0,d["[object Arguments]"]=d["[object Array]"]=d["[object ArrayBuffer]"]=d["[object Boolean]"]=d["[object DataView]"]=d["[object Date]"]=d["[object Error]"]=d["[object Function]"]=d["[object Map]"]=d["[object Number]"]=d["[object Object]"]=d["[object RegExp]"]=d["[object Set]"]=d["[object String]"]=d["[object WeakMap]"]=!1,h.exports=function(x){return f(x)&&s(x.length)&&!!d[c(x)]}},313:(h,u,o)=>{var c=o(3218),s=o(5726),f=o(3498),d=Object.prototype.hasOwnProperty;h.exports=function(x){if(!c(x))return f(x);var T=s(x),A=[];for(var U in x)(U!="constructor"||!T&&d.call(x,U))&&A.push(U);return A}},2980:(h,u,o)=>{var c=o(6384),s=o(6556),f=o(8483),d=o(9783),x=o(3218),T=o(1704),A=o(6390);h.exports=function U(R,E,I,P,S){R!==E&&f(E,function(B,m){if(S||(S=new c),x(B))d(R,E,m,I,U,P,S);else{var w=P?P(A(R,m),B,m+"",R,E,S):void 0;w===void 0&&(w=B),s(R,m,w)}},T)}},9783:(h,u,o)=>{var c=o(6556),s=o(4626),f=o(7133),d=o(278),x=o(8517),T=o(5694),A=o(1469),U=o(9246),R=o(4144),E=o(3560),I=o(3218),P=o(8630),S=o(6719),B=o(6390),m=o(9881);h.exports=function(w,O,F,q,H,J,Q){var Z=B(w,F),$=B(O,F),ct=Q.get($);if(ct)c(w,F,ct);else{var tt=J?J(Z,$,F+"",w,O,Q):void 0,ht=tt===void 0;if(ht){var _t=A($),pt=!_t&&R($),vt=!_t&&!pt&&S($);tt=$,_t||pt||vt?A(Z)?tt=Z:U(Z)?tt=d(Z):pt?(ht=!1,tt=s($,!0)):vt?(ht=!1,tt=f($,!0)):tt=[]:P($)||T($)?(tt=Z,T(Z)?tt=m(Z):I(Z)&&!E(Z)||(tt=x($))):ht=!1}ht&&(Q.set($,tt),H(tt,$,q,J,Q),Q.delete($)),c(w,F,tt)}}},5976:(h,u,o)=>{var c=o(6557),s=o(5357),f=o(61);h.exports=function(d,x){return f(s(d,x,c),d+"")}},6560:(h,u,o)=>{var c=o(5703),s=o(8777),f=o(6557),d=s?function(x,T){return s(x,"toString",{configurable:!0,enumerable:!1,value:c(T),writable:!0})}:f;h.exports=d},2545:h=>{h.exports=function(u,o){for(var c=-1,s=Array(u);++c<u;)s[c]=o(c);return s}},531:(h,u,o)=>{var c=o(2705),s=o(9932),f=o(1469),d=o(3448),x=c?c.prototype:void 0,T=x?x.toString:void 0;h.exports=function A(U){if(typeof U=="string")return U;if(f(U))return s(U,A)+"";if(d(U))return T?T.call(U):"";var R=U+"";return R=="0"&&1/U==-1/0?"-0":R}},1717:h=>{h.exports=function(u){return function(o){return u(o)}}},1811:(h,u,o)=>{var c=o(1469),s=o(5403),f=o(5514),d=o(9833);h.exports=function(x,T){return c(x)?x:s(x,T)?[x]:f(d(x))}},4318:(h,u,o)=>{var c=o(1149);h.exports=function(s){var f=new s.constructor(s.byteLength);return new c(f).set(new c(s)),f}},4626:(h,u,o)=>{h=o.nmd(h);var c=o(5639),s=u&&!u.nodeType&&u,f=s&&h&&!h.nodeType&&h,d=f&&f.exports===s?c.Buffer:void 0,x=d?d.allocUnsafe:void 0;h.exports=function(T,A){if(A)return T.slice();var U=T.length,R=x?x(U):new T.constructor(U);return T.copy(R),R}},7133:(h,u,o)=>{var c=o(4318);h.exports=function(s,f){var d=f?c(s.buffer):s.buffer;return new s.constructor(d,s.byteOffset,s.length)}},278:h=>{h.exports=function(u,o){var c=-1,s=u.length;for(o||(o=Array(s));++c<s;)o[c]=u[c];return o}},8363:(h,u,o)=>{var c=o(4865),s=o(9465);h.exports=function(f,d,x,T){var A=!x;x||(x={});for(var U=-1,R=d.length;++U<R;){var E=d[U],I=T?T(x[E],f[E],E,x,f):void 0;I===void 0&&(I=f[E]),A?s(x,E,I):c(x,E,I)}return x}},4429:(h,u,o)=>{var c=o(5639)["__core-js_shared__"];h.exports=c},1463:(h,u,o)=>{var c=o(5976),s=o(6612);h.exports=function(f){return c(function(d,x){var T=-1,A=x.length,U=A>1?x[A-1]:void 0,R=A>2?x[2]:void 0;for(U=f.length>3&&typeof U=="function"?(A--,U):void 0,R&&s(x[0],x[1],R)&&(U=A<3?void 0:U,A=1),d=Object(d);++T<A;){var E=x[T];E&&f(d,E,T,U)}return d})}},5063:h=>{h.exports=function(u){return function(o,c,s){for(var f=-1,d=Object(o),x=s(o),T=x.length;T--;){var A=x[u?T:++f];if(c(d[A],A,d)===!1)break}return o}}},8777:(h,u,o)=>{var c=o(852),s=function(){try{var f=c(Object,"defineProperty");return f({},"",{}),f}catch{}}();h.exports=s},1957:(h,u,o)=>{var c=typeof o.g=="object"&&o.g&&o.g.Object===Object&&o.g;h.exports=c},5050:(h,u,o)=>{var c=o(7019);h.exports=function(s,f){var d=s.__data__;return c(f)?d[typeof f=="string"?"string":"hash"]:d.map}},852:(h,u,o)=>{var c=o(8458),s=o(7801);h.exports=function(f,d){var x=s(f,d);return c(x)?x:void 0}},5924:(h,u,o)=>{var c=o(5569)(Object.getPrototypeOf,Object);h.exports=c},9607:(h,u,o)=>{var c=o(2705),s=Object.prototype,f=s.hasOwnProperty,d=s.toString,x=c?c.toStringTag:void 0;h.exports=function(T){var A=f.call(T,x),U=T[x];try{T[x]=void 0;var R=!0}catch{}var E=d.call(T);return R&&(A?T[x]=U:delete T[x]),E}},7801:h=>{h.exports=function(u,o){return u==null?void 0:u[o]}},222:(h,u,o)=>{var c=o(1811),s=o(5694),f=o(1469),d=o(5776),x=o(1780),T=o(327);h.exports=function(A,U,R){for(var E=-1,I=(U=c(U,A)).length,P=!1;++E<I;){var S=T(U[E]);if(!(P=A!=null&&R(A,S)))break;A=A[S]}return P||++E!=I?P:!!(I=A==null?0:A.length)&&x(I)&&d(S,I)&&(f(A)||s(A))}},1789:(h,u,o)=>{var c=o(4536);h.exports=function(){this.__data__=c?c(null):{},this.size=0}},401:h=>{h.exports=function(u){var o=this.has(u)&&delete this.__data__[u];return this.size-=o?1:0,o}},7667:(h,u,o)=>{var c=o(4536),s=Object.prototype.hasOwnProperty;h.exports=function(f){var d=this.__data__;if(c){var x=d[f];return x==="__lodash_hash_undefined__"?void 0:x}return s.call(d,f)?d[f]:void 0}},1327:(h,u,o)=>{var c=o(4536),s=Object.prototype.hasOwnProperty;h.exports=function(f){var d=this.__data__;return c?d[f]!==void 0:s.call(d,f)}},1866:(h,u,o)=>{var c=o(4536);h.exports=function(s,f){var d=this.__data__;return this.size+=this.has(s)?0:1,d[s]=c&&f===void 0?"__lodash_hash_undefined__":f,this}},8517:(h,u,o)=>{var c=o(3118),s=o(5924),f=o(5726);h.exports=function(d){return typeof d.constructor!="function"||f(d)?{}:c(s(d))}},5776:h=>{var u=/^(?:0|[1-9]\d*)$/;h.exports=function(o,c){var s=typeof o;return!!(c=c==null?9007199254740991:c)&&(s=="number"||s!="symbol"&&u.test(o))&&o>-1&&o%1==0&&o<c}},6612:(h,u,o)=>{var c=o(7813),s=o(8612),f=o(5776),d=o(3218);h.exports=function(x,T,A){if(!d(A))return!1;var U=typeof T;return!!(U=="number"?s(A)&&f(T,A.length):U=="string"&&T in A)&&c(A[T],x)}},5403:(h,u,o)=>{var c=o(1469),s=o(3448),f=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/;h.exports=function(x,T){if(c(x))return!1;var A=typeof x;return!(A!="number"&&A!="symbol"&&A!="boolean"&&x!=null&&!s(x))||d.test(x)||!f.test(x)||T!=null&&x in Object(T)}},7019:h=>{h.exports=function(u){var o=typeof u;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?u!=="__proto__":u===null}},5346:(h,u,o)=>{var c,s=o(4429),f=(c=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+c:"";h.exports=function(d){return!!f&&f in d}},5726:h=>{var u=Object.prototype;h.exports=function(o){var c=o&&o.constructor;return o===(typeof c=="function"&&c.prototype||u)}},7040:h=>{h.exports=function(){this.__data__=[],this.size=0}},4125:(h,u,o)=>{var c=o(8470),s=Array.prototype.splice;h.exports=function(f){var d=this.__data__,x=c(d,f);return!(x<0)&&(x==d.length-1?d.pop():s.call(d,x,1),--this.size,!0)}},2117:(h,u,o)=>{var c=o(8470);h.exports=function(s){var f=this.__data__,d=c(f,s);return d<0?void 0:f[d][1]}},7518:(h,u,o)=>{var c=o(8470);h.exports=function(s){return c(this.__data__,s)>-1}},4705:(h,u,o)=>{var c=o(8470);h.exports=function(s,f){var d=this.__data__,x=c(d,s);return x<0?(++this.size,d.push([s,f])):d[x][1]=f,this}},4785:(h,u,o)=>{var c=o(1989),s=o(8407),f=o(7071);h.exports=function(){this.size=0,this.__data__={hash:new c,map:new(f||s),string:new c}}},1285:(h,u,o)=>{var c=o(5050);h.exports=function(s){var f=c(this,s).delete(s);return this.size-=f?1:0,f}},6e3:(h,u,o)=>{var c=o(5050);h.exports=function(s){return c(this,s).get(s)}},9916:(h,u,o)=>{var c=o(5050);h.exports=function(s){return c(this,s).has(s)}},5265:(h,u,o)=>{var c=o(5050);h.exports=function(s,f){var d=c(this,s),x=d.size;return d.set(s,f),this.size+=d.size==x?0:1,this}},4523:(h,u,o)=>{var c=o(8306);h.exports=function(s){var f=c(s,function(x){return d.size===500&&d.clear(),x}),d=f.cache;return f}},4536:(h,u,o)=>{var c=o(852)(Object,"create");h.exports=c},3498:h=>{h.exports=function(u){var o=[];if(u!=null)for(var c in Object(u))o.push(c);return o}},1167:(h,u,o)=>{h=o.nmd(h);var c=o(1957),s=u&&!u.nodeType&&u,f=s&&h&&!h.nodeType&&h,d=f&&f.exports===s&&c.process,x=function(){try{var T=f&&f.require&&f.require("util").types;return T||d&&d.binding&&d.binding("util")}catch{}}();h.exports=x},2333:h=>{var u=Object.prototype.toString;h.exports=function(o){return u.call(o)}},5569:h=>{h.exports=function(u,o){return function(c){return u(o(c))}}},5357:(h,u,o)=>{var c=o(6874),s=Math.max;h.exports=function(f,d,x){return d=s(d===void 0?f.length-1:d,0),function(){for(var T=arguments,A=-1,U=s(T.length-d,0),R=Array(U);++A<U;)R[A]=T[d+A];A=-1;for(var E=Array(d+1);++A<d;)E[A]=T[A];return E[d]=x(R),c(f,this,E)}}},5639:(h,u,o)=>{var c=o(1957),s=typeof self=="object"&&self&&self.Object===Object&&self,f=c||s||Function("return this")();h.exports=f},6390:h=>{h.exports=function(u,o){if((o!=="constructor"||typeof u[o]!="function")&&o!="__proto__")return u[o]}},61:(h,u,o)=>{var c=o(6560),s=o(1275)(c);h.exports=s},1275:h=>{var u=Date.now;h.exports=function(o){var c=0,s=0;return function(){var f=u(),d=16-(f-s);if(s=f,d>0){if(++c>=800)return arguments[0]}else c=0;return o.apply(void 0,arguments)}}},7465:(h,u,o)=>{var c=o(8407);h.exports=function(){this.__data__=new c,this.size=0}},3779:h=>{h.exports=function(u){var o=this.__data__,c=o.delete(u);return this.size=o.size,c}},7599:h=>{h.exports=function(u){return this.__data__.get(u)}},4758:h=>{h.exports=function(u){return this.__data__.has(u)}},4309:(h,u,o)=>{var c=o(8407),s=o(7071),f=o(3369);h.exports=function(d,x){var T=this.__data__;if(T instanceof c){var A=T.__data__;if(!s||A.length<199)return A.push([d,x]),this.size=++T.size,this;T=this.__data__=new f(A)}return T.set(d,x),this.size=T.size,this}},5514:(h,u,o)=>{var c=o(4523),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,d=c(function(x){var T=[];return x.charCodeAt(0)===46&&T.push(""),x.replace(s,function(A,U,R,E){T.push(R?E.replace(f,"$1"):U||A)}),T});h.exports=d},327:(h,u,o)=>{var c=o(3448);h.exports=function(s){if(typeof s=="string"||c(s))return s;var f=s+"";return f=="0"&&1/s==-1/0?"-0":f}},346:h=>{var u=Function.prototype.toString;h.exports=function(o){if(o!=null){try{return u.call(o)}catch{}try{return o+""}catch{}}return""}},5703:h=>{h.exports=function(u){return function(){return u}}},7813:h=>{h.exports=function(u,o){return u===o||u!=u&&o!=o}},7361:(h,u,o)=>{var c=o(7786);h.exports=function(s,f,d){var x=s==null?void 0:c(s,f);return x===void 0?d:x}},8721:(h,u,o)=>{var c=o(8565),s=o(222);h.exports=function(f,d){return f!=null&&s(f,d,c)}},6557:h=>{h.exports=function(u){return u}},5694:(h,u,o)=>{var c=o(9454),s=o(7005),f=Object.prototype,d=f.hasOwnProperty,x=f.propertyIsEnumerable,T=c(function(){return arguments}())?c:function(A){return s(A)&&d.call(A,"callee")&&!x.call(A,"callee")};h.exports=T},1469:h=>{var u=Array.isArray;h.exports=u},8612:(h,u,o)=>{var c=o(3560),s=o(1780);h.exports=function(f){return f!=null&&s(f.length)&&!c(f)}},9246:(h,u,o)=>{var c=o(8612),s=o(7005);h.exports=function(f){return s(f)&&c(f)}},4144:(h,u,o)=>{h=o.nmd(h);var c=o(5639),s=o(5062),f=u&&!u.nodeType&&u,d=f&&h&&!h.nodeType&&h,x=d&&d.exports===f?c.Buffer:void 0,T=(x?x.isBuffer:void 0)||s;h.exports=T},3560:(h,u,o)=>{var c=o(4239),s=o(3218);h.exports=function(f){if(!s(f))return!1;var d=c(f);return d=="[object Function]"||d=="[object GeneratorFunction]"||d=="[object AsyncFunction]"||d=="[object Proxy]"}},1780:h=>{h.exports=function(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=9007199254740991}},3218:h=>{h.exports=function(u){var o=typeof u;return u!=null&&(o=="object"||o=="function")}},7005:h=>{h.exports=function(u){return u!=null&&typeof u=="object"}},8630:(h,u,o)=>{var c=o(4239),s=o(5924),f=o(7005),d=Function.prototype,x=Object.prototype,T=d.toString,A=x.hasOwnProperty,U=T.call(Object);h.exports=function(R){if(!f(R)||c(R)!="[object Object]")return!1;var E=s(R);if(E===null)return!0;var I=A.call(E,"constructor")&&E.constructor;return typeof I=="function"&&I instanceof I&&T.call(I)==U}},3448:(h,u,o)=>{var c=o(4239),s=o(7005);h.exports=function(f){return typeof f=="symbol"||s(f)&&c(f)=="[object Symbol]"}},6719:(h,u,o)=>{var c=o(8749),s=o(1717),f=o(1167),d=f&&f.isTypedArray,x=d?s(d):c;h.exports=x},1704:(h,u,o)=>{var c=o(4636),s=o(313),f=o(8612);h.exports=function(d){return f(d)?c(d,!0):s(d)}},8306:(h,u,o)=>{var c=o(3369);function s(f,d){if(typeof f!="function"||d!=null&&typeof d!="function")throw new TypeError("Expected a function");var x=function(){var T=arguments,A=d?d.apply(this,T):T[0],U=x.cache;if(U.has(A))return U.get(A);var R=f.apply(this,T);return x.cache=U.set(A,R)||U,R};return x.cache=new(s.Cache||c),x}s.Cache=c,h.exports=s},2492:(h,u,o)=>{var c=o(2980),s=o(1463)(function(f,d,x){c(f,d,x)});h.exports=s},5062:h=>{h.exports=function(){return!1}},9881:(h,u,o)=>{var c=o(8363),s=o(1704);h.exports=function(f){return c(f,s(f))}},9833:(h,u,o)=>{var c=o(531);h.exports=function(s){return s==null?"":c(s)}},2676:function(h){h.exports=function(){function u(b,a){if(!(b instanceof a))throw new TypeError("Cannot call a class as a function")}function o(b,a){for(var l=0;l<a.length;l++){var g=a[l];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(b,g.key,g)}}function c(b,a,l){return a&&o(b.prototype,a),l&&o(b,l),b}var s=function(){function b(a,l){this.next=null,this.key=a,this.data=l,this.left=null,this.right=null}return b}();function f(b,a){return b>a?1:b<a?-1:0}function d(b,a,l){for(var g=new s(null,null),k=g,C=g;;){var N=l(b,a.key);if(N<0){if(a.left===null)break;if(l(b,a.left.key)<0){var z=a.left;if(a.left=z.right,z.right=a,(a=z).left===null)break}C.left=a,C=a,a=a.left}else{if(!(N>0)||a.right===null||l(b,a.right.key)>0&&(z=a.right,a.right=z.left,z.left=a,(a=z).right===null))break;k.right=a,k=a,a=a.right}}return k.right=a.left,C.left=a.right,a.left=g.right,a.right=g.left,a}function x(b,a,l,g){var k=new s(b,a);if(l===null)return k.left=k.right=null,k;var C=g(b,(l=d(b,l,g)).key);return C<0?(k.left=l.left,k.right=l,l.left=null):C>=0&&(k.right=l.right,k.left=l,l.right=null),k}function T(b,a,l){var g=null,k=null;if(a){var C=l((a=d(b,a,l)).key,b);C===0?(g=a.left,k=a.right):C<0?(k=a.right,a.right=null,g=a):(g=a.left,a.left=null,k=a)}return{left:g,right:k}}function A(b,a,l){return a===null?b:(b===null||((a=d(b.key,a,l)).left=b),a)}function U(b,a,l,g,k){if(b){g(a+(l?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+k(b)+`
`);var C=a+(l?"    ":"\u2502   ");b.left&&U(b.left,C,!1,g,k),b.right&&U(b.right,C,!0,g,k)}}var R=function(){function b(a){a===void 0&&(a=f),this._root=null,this._size=0,this._comparator=a}return b.prototype.insert=function(a,l){return this._size++,this._root=x(a,l,this._root,this._comparator)},b.prototype.add=function(a,l){var g=new s(a,l);this._root===null&&(g.left=g.right=null,this._size++,this._root=g);var k=this._comparator,C=d(a,this._root,k),N=k(a,C.key);return N===0?this._root=C:(N<0?(g.left=C.left,g.right=C,C.left=null):N>0&&(g.right=C.right,g.left=C,C.right=null),this._size++,this._root=g),this._root},b.prototype.remove=function(a){this._root=this._remove(a,this._root,this._comparator)},b.prototype._remove=function(a,l,g){var k;return l===null?null:g(a,(l=d(a,l,g)).key)===0?(l.left===null?k=l.right:(k=d(a,l.left,g)).right=l.right,this._size--,k):l},b.prototype.pop=function(){var a=this._root;if(a){for(;a.left;)a=a.left;return this._root=d(a.key,this._root,this._comparator),this._root=this._remove(a.key,this._root,this._comparator),{key:a.key,data:a.data}}return null},b.prototype.findStatic=function(a){for(var l=this._root,g=this._comparator;l;){var k=g(a,l.key);if(k===0)return l;l=k<0?l.left:l.right}return null},b.prototype.find=function(a){return this._root&&(this._root=d(a,this._root,this._comparator),this._comparator(a,this._root.key)!==0)?null:this._root},b.prototype.contains=function(a){for(var l=this._root,g=this._comparator;l;){var k=g(a,l.key);if(k===0)return!0;l=k<0?l.left:l.right}return!1},b.prototype.forEach=function(a,l){for(var g=this._root,k=[],C=!1;!C;)g!==null?(k.push(g),g=g.left):k.length!==0?(g=k.pop(),a.call(l,g),g=g.right):C=!0;return this},b.prototype.range=function(a,l,g,k){for(var C=[],N=this._comparator,z=this._root;C.length!==0||z;)if(z)C.push(z),z=z.left;else{if(N((z=C.pop()).key,l)>0)break;if(N(z.key,a)>=0&&g.call(k,z))return this;z=z.right}return this},b.prototype.keys=function(){var a=[];return this.forEach(function(l){var g=l.key;return a.push(g)}),a},b.prototype.values=function(){var a=[];return this.forEach(function(l){var g=l.data;return a.push(g)}),a},b.prototype.min=function(){return this._root?this.minNode(this._root).key:null},b.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},b.prototype.minNode=function(a){if(a===void 0&&(a=this._root),a)for(;a.left;)a=a.left;return a},b.prototype.maxNode=function(a){if(a===void 0&&(a=this._root),a)for(;a.right;)a=a.right;return a},b.prototype.at=function(a){for(var l=this._root,g=!1,k=0,C=[];!g;)if(l)C.push(l),l=l.left;else if(C.length>0){if(l=C.pop(),k===a)return l;k++,l=l.right}else g=!0;return null},b.prototype.next=function(a){var l=this._root,g=null;if(a.right){for(g=a.right;g.left;)g=g.left;return g}for(var k=this._comparator;l;){var C=k(a.key,l.key);if(C===0)break;C<0?(g=l,l=l.left):l=l.right}return g},b.prototype.prev=function(a){var l=this._root,g=null;if(a.left!==null){for(g=a.left;g.right;)g=g.right;return g}for(var k=this._comparator;l;){var C=k(a.key,l.key);if(C===0)break;C<0?l=l.left:(g=l,l=l.right)}return g},b.prototype.clear=function(){return this._root=null,this._size=0,this},b.prototype.toList=function(){return P(this._root)},b.prototype.load=function(a,l,g){l===void 0&&(l=[]),g===void 0&&(g=!1);var k=a.length,C=this._comparator;if(g&&m(a,l,0,k-1,C),this._root===null)this._root=E(a,l,0,k),this._size=k;else{var N=B(this.toList(),I(a,l),C);k=this._size+k,this._root=S({head:N},0,k)}return this},b.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(b.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),b.prototype.toString=function(a){a===void 0&&(a=function(g){return String(g.key)});var l=[];return U(this._root,"",!0,function(g){return l.push(g)},a),l.join("")},b.prototype.update=function(a,l,g){var k=this._comparator,C=T(a,this._root,k),N=C.left,z=C.right;k(a,l)<0?z=x(l,g,z,k):N=x(l,g,N,k),this._root=A(N,z,k)},b.prototype.split=function(a){return T(a,this._root,this._comparator)},b}();function E(b,a,l,g){var k=g-l;if(k>0){var C=l+Math.floor(k/2),N=b[C],z=a[C],K=new s(N,z);return K.left=E(b,a,l,C),K.right=E(b,a,C+1,g),K}return null}function I(b,a){for(var l=new s(null,null),g=l,k=0;k<b.length;k++)g=g.next=new s(b[k],a[k]);return g.next=null,l.next}function P(b){for(var a=b,l=[],g=!1,k=new s(null,null),C=k;!g;)a?(l.push(a),a=a.left):l.length>0?a=(a=C=C.next=l.pop()).right:g=!0;return C.next=null,k.next}function S(b,a,l){var g=l-a;if(g>0){var k=a+Math.floor(g/2),C=S(b,a,k),N=b.head;return N.left=C,b.head=b.head.next,N.right=S(b,k+1,l),N}return null}function B(b,a,l){for(var g=new s(null,null),k=g,C=b,N=a;C!==null&&N!==null;)l(C.key,N.key)<0?(k.next=C,C=C.next):(k.next=N,N=N.next),k=k.next;return C!==null?k.next=C:N!==null&&(k.next=N),g.next}function m(b,a,l,g,k){if(!(l>=g)){for(var C=b[l+g>>1],N=l-1,z=g+1;;){do N++;while(k(b[N],C)<0);do z--;while(k(b[z],C)>0);if(N>=z)break;var K=b[N];b[N]=b[z],b[z]=K,K=a[N],a[N]=a[z],a[z]=K}m(b,a,l,z,k),m(b,a,z+1,g,k)}}var w=function(b,a){return b.ll.x<=a.x&&a.x<=b.ur.x&&b.ll.y<=a.y&&a.y<=b.ur.y},O=function(b,a){if(a.ur.x<b.ll.x||b.ur.x<a.ll.x||a.ur.y<b.ll.y||b.ur.y<a.ll.y)return null;var l=b.ll.x<a.ll.x?a.ll.x:b.ll.x,g=b.ur.x<a.ur.x?b.ur.x:a.ur.x;return{ll:{x:l,y:b.ll.y<a.ll.y?a.ll.y:b.ll.y},ur:{x:g,y:b.ur.y<a.ur.y?b.ur.y:a.ur.y}}},F=Number.EPSILON;F===void 0&&(F=Math.pow(2,-52));var q=F*F,H=function(b,a){if(-F<b&&b<F&&-F<a&&a<F)return 0;var l=b-a;return l*l<q*b*a?0:b<a?-1:1},J=function(){function b(){u(this,b),this.reset()}return c(b,[{key:"reset",value:function(){this.xRounder=new Q,this.yRounder=new Q}},{key:"round",value:function(a,l){return{x:this.xRounder.round(a),y:this.yRounder.round(l)}}}]),b}(),Q=function(){function b(){u(this,b),this.tree=new R,this.round(0)}return c(b,[{key:"round",value:function(a){var l=this.tree.add(a),g=this.tree.prev(l);if(g!==null&&H(l.key,g.key)===0)return this.tree.remove(a),g.key;var k=this.tree.next(l);return k!==null&&H(l.key,k.key)===0?(this.tree.remove(a),k.key):a}}]),b}(),Z=new J,$=function(b,a){return b.x*a.y-b.y*a.x},ct=function(b,a){return b.x*a.x+b.y*a.y},tt=function(b,a,l){var g={x:a.x-b.x,y:a.y-b.y},k={x:l.x-b.x,y:l.y-b.y},C=$(g,k);return H(C,0)},ht=function(b){return Math.sqrt(ct(b,b))},_t=function(b,a,l){var g={x:a.x-b.x,y:a.y-b.y},k={x:l.x-b.x,y:l.y-b.y};return $(k,g)/ht(k)/ht(g)},pt=function(b,a,l){var g={x:a.x-b.x,y:a.y-b.y},k={x:l.x-b.x,y:l.y-b.y};return ct(k,g)/ht(k)/ht(g)},vt=function(b,a,l){return a.y===0?null:{x:b.x+a.x/a.y*(l-b.y),y:l}},Ot=function(b,a,l){return a.x===0?null:{x:l,y:b.y+a.y/a.x*(l-b.x)}},st=function(b,a,l,g){if(a.x===0)return Ot(l,g,b.x);if(g.x===0)return Ot(b,a,l.x);if(a.y===0)return vt(l,g,b.y);if(g.y===0)return vt(b,a,l.y);var k=$(a,g);if(k==0)return null;var C={x:l.x-b.x,y:l.y-b.y},N=$(C,a)/k,z=$(C,g)/k;return{x:(b.x+z*a.x+(l.x+N*g.x))/2,y:(b.y+z*a.y+(l.y+N*g.y))/2}},gt=function(){function b(a,l){u(this,b),a.events===void 0?a.events=[this]:a.events.push(this),this.point=a,this.isLeft=l}return c(b,null,[{key:"compare",value:function(a,l){var g=b.comparePoints(a.point,l.point);return g!==0?g:(a.point!==l.point&&a.link(l),a.isLeft!==l.isLeft?a.isLeft?1:-1:Xt.compare(a.segment,l.segment))}},{key:"comparePoints",value:function(a,l){return a.x<l.x?-1:a.x>l.x?1:a.y<l.y?-1:a.y>l.y?1:0}}]),c(b,[{key:"link",value:function(a){if(a.point===this.point)throw new Error("Tried to link already linked events");for(var l=a.point.events,g=0,k=l.length;g<k;g++){var C=l[g];this.point.events.push(C),C.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var a=this.point.events.length,l=0;l<a;l++){var g=this.point.events[l];if(g.segment.consumedBy===void 0)for(var k=l+1;k<a;k++){var C=this.point.events[k];C.consumedBy===void 0&&g.otherSE.point.events===C.otherSE.point.events&&g.segment.consume(C.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var a=[],l=0,g=this.point.events.length;l<g;l++){var k=this.point.events[l];k!==this&&!k.segment.ringOut&&k.segment.isInResult()&&a.push(k)}return a}},{key:"getLeftmostComparator",value:function(a){var l=this,g=new Map,k=function(C){var N=C.otherSE;g.set(C,{sine:_t(l.point,a.point,N.point),cosine:pt(l.point,a.point,N.point)})};return function(C,N){g.has(C)||k(C),g.has(N)||k(N);var z=g.get(C),K=z.sine,et=z.cosine,it=g.get(N),ut=it.sine,lt=it.cosine;return K>=0&&ut>=0?et<lt?1:et>lt?-1:0:K<0&&ut<0?et<lt?-1:et>lt?1:0:ut<K?-1:ut>K?1:0}}}]),b}(),Yt=0,Xt=function(){function b(a,l,g,k){u(this,b),this.id=++Yt,this.leftSE=a,a.segment=this,a.otherSE=l,this.rightSE=l,l.segment=this,l.otherSE=a,this.rings=g,this.windings=k}return c(b,null,[{key:"compare",value:function(a,l){var g=a.leftSE.point.x,k=l.leftSE.point.x,C=a.rightSE.point.x,N=l.rightSE.point.x;if(N<g)return 1;if(C<k)return-1;var z=a.leftSE.point.y,K=l.leftSE.point.y,et=a.rightSE.point.y,it=l.rightSE.point.y;if(g<k){if(K<z&&K<et)return 1;if(K>z&&K>et)return-1;var ut=a.comparePoint(l.leftSE.point);if(ut<0)return 1;if(ut>0)return-1;var lt=l.comparePoint(a.rightSE.point);return lt!==0?lt:-1}if(g>k){if(z<K&&z<it)return-1;if(z>K&&z>it)return 1;var mt=l.comparePoint(a.leftSE.point);if(mt!==0)return mt;var ot=a.comparePoint(l.rightSE.point);return ot<0?1:ot>0?-1:1}if(z<K)return-1;if(z>K)return 1;if(C<N){var yt=l.comparePoint(a.rightSE.point);if(yt!==0)return yt}if(C>N){var bt=a.comparePoint(l.rightSE.point);if(bt<0)return 1;if(bt>0)return-1}if(C!==N){var Mt=et-z,Ct=C-g,Pt=it-K,Et=N-k;if(Mt>Ct&&Pt<Et)return 1;if(Mt<Ct&&Pt>Et)return-1}return C>N?1:C<N||et<it?-1:et>it?1:a.id<l.id?-1:a.id>l.id?1:0}}]),c(b,[{key:"replaceRightSE",value:function(a){this.rightSE=a,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var a=this.leftSE.point.y,l=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:a<l?a:l},ur:{x:this.rightSE.point.x,y:a>l?a:l}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(a){return a.x===this.leftSE.point.x&&a.y===this.leftSE.point.y||a.x===this.rightSE.point.x&&a.y===this.rightSE.point.y}},{key:"comparePoint",value:function(a){if(this.isAnEndpoint(a))return 0;var l=this.leftSE.point,g=this.rightSE.point,k=this.vector();if(l.x===g.x)return a.x===l.x?0:a.x<l.x?1:-1;var C=(a.y-l.y)/k.y,N=l.x+C*k.x;if(a.x===N)return 0;var z=(a.x-l.x)/k.x,K=l.y+z*k.y;return a.y===K?0:a.y<K?-1:1}},{key:"getIntersection",value:function(a){var l=this.bbox(),g=a.bbox(),k=O(l,g);if(k===null)return null;var C=this.leftSE.point,N=this.rightSE.point,z=a.leftSE.point,K=a.rightSE.point,et=w(l,z)&&this.comparePoint(z)===0,it=w(g,C)&&a.comparePoint(C)===0,ut=w(l,K)&&this.comparePoint(K)===0,lt=w(g,N)&&a.comparePoint(N)===0;if(it&&et)return lt&&!ut?N:!lt&&ut?K:null;if(it)return ut&&C.x===K.x&&C.y===K.y?null:C;if(et)return lt&&N.x===z.x&&N.y===z.y?null:z;if(lt&&ut)return null;if(lt)return N;if(ut)return K;var mt=st(C,this.vector(),z,a.vector());return mt===null?null:w(k,mt)?Z.round(mt.x,mt.y):null}},{key:"split",value:function(a){var l=[],g=a.events!==void 0,k=new gt(a,!0),C=new gt(a,!1),N=this.rightSE;this.replaceRightSE(C),l.push(C),l.push(k);var z=new b(k,N,this.rings.slice(),this.windings.slice());return gt.comparePoints(z.leftSE.point,z.rightSE.point)>0&&z.swapEvents(),gt.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),g&&(k.checkForConsuming(),C.checkForConsuming()),l}},{key:"swapEvents",value:function(){var a=this.rightSE;this.rightSE=this.leftSE,this.leftSE=a,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var l=0,g=this.windings.length;l<g;l++)this.windings[l]*=-1}},{key:"consume",value:function(a){for(var l=this,g=a;l.consumedBy;)l=l.consumedBy;for(;g.consumedBy;)g=g.consumedBy;var k=b.compare(l,g);if(k!==0){if(k>0){var C=l;l=g,g=C}if(l.prev===g){var N=l;l=g,g=N}for(var z=0,K=g.rings.length;z<K;z++){var et=g.rings[z],it=g.windings[z],ut=l.rings.indexOf(et);ut===-1?(l.rings.push(et),l.windings.push(it)):l.windings[ut]+=it}g.rings=null,g.windings=null,g.consumedBy=l,g.leftSE.consumedBy=l.leftSE,g.rightSE.consumedBy=l.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(this.prev){var a=this.prev.consumedBy||this.prev;this._beforeState=a.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var a=this.beforeState();this._afterState={rings:a.rings.slice(0),windings:a.windings.slice(0),multiPolys:[]};for(var l=this._afterState.rings,g=this._afterState.windings,k=this._afterState.multiPolys,C=0,N=this.rings.length;C<N;C++){var z=this.rings[C],K=this.windings[C],et=l.indexOf(z);et===-1?(l.push(z),g.push(K)):g[et]+=K}for(var it=[],ut=[],lt=0,mt=l.length;lt<mt;lt++)if(g[lt]!==0){var ot=l[lt],yt=ot.poly;if(ut.indexOf(yt)===-1)if(ot.isExterior)it.push(yt);else{ut.indexOf(yt)===-1&&ut.push(yt);var bt=it.indexOf(ot.poly);bt!==-1&&it.splice(bt,1)}}for(var Mt=0,Ct=it.length;Mt<Ct;Mt++){var Pt=it[Mt].multiPoly;k.indexOf(Pt)===-1&&k.push(Pt)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var a=this.beforeState().multiPolys,l=this.afterState().multiPolys;switch(Dt.type){case"union":var g=a.length===0,k=l.length===0;this._isInResult=g!==k;break;case"intersection":var C,N;a.length<l.length?(C=a.length,N=l.length):(C=l.length,N=a.length),this._isInResult=N===Dt.numMultiPolys&&C<N;break;case"xor":var z=Math.abs(a.length-l.length);this._isInResult=z%2==1;break;case"difference":var K=function(et){return et.length===1&&et[0].isSubject};this._isInResult=K(a)!==K(l);break;default:throw new Error("Unrecognized operation type found ".concat(Dt.type))}return this._isInResult}}],[{key:"fromRing",value:function(a,l,g){var k,C,N,z=gt.comparePoints(a,l);if(z<0)k=a,C=l,N=1;else{if(!(z>0))throw new Error("Tried to create degenerate segment at [".concat(a.x,", ").concat(a.y,"]"));k=l,C=a,N=-1}return new b(new gt(k,!0),new gt(C,!1),[g],[N])}}]),b}(),$t=function(){function b(a,l,g){if(u(this,b),!Array.isArray(a)||a.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=l,this.isExterior=g,this.segments=[],typeof a[0][0]!="number"||typeof a[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var k=Z.round(a[0][0],a[0][1]);this.bbox={ll:{x:k.x,y:k.y},ur:{x:k.x,y:k.y}};for(var C=k,N=1,z=a.length;N<z;N++){if(typeof a[N][0]!="number"||typeof a[N][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var K=Z.round(a[N][0],a[N][1]);K.x===C.x&&K.y===C.y||(this.segments.push(Xt.fromRing(C,K,this)),K.x<this.bbox.ll.x&&(this.bbox.ll.x=K.x),K.y<this.bbox.ll.y&&(this.bbox.ll.y=K.y),K.x>this.bbox.ur.x&&(this.bbox.ur.x=K.x),K.y>this.bbox.ur.y&&(this.bbox.ur.y=K.y),C=K)}k.x===C.x&&k.y===C.y||this.segments.push(Xt.fromRing(C,k,this))}return c(b,[{key:"getSweepEvents",value:function(){for(var a=[],l=0,g=this.segments.length;l<g;l++){var k=this.segments[l];a.push(k.leftSE),a.push(k.rightSE)}return a}}]),b}(),It=function(){function b(a,l){if(u(this,b),!Array.isArray(a))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new $t(a[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var g=1,k=a.length;g<k;g++){var C=new $t(a[g],this,!1);C.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=C.bbox.ll.x),C.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=C.bbox.ll.y),C.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=C.bbox.ur.x),C.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=C.bbox.ur.y),this.interiorRings.push(C)}this.multiPoly=l}return c(b,[{key:"getSweepEvents",value:function(){for(var a=this.exteriorRing.getSweepEvents(),l=0,g=this.interiorRings.length;l<g;l++)for(var k=this.interiorRings[l].getSweepEvents(),C=0,N=k.length;C<N;C++)a.push(k[C]);return a}}]),b}(),ae=function(){function b(a,l){if(u(this,b),!Array.isArray(a))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof a[0][0][0]=="number"&&(a=[a])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var g=0,k=a.length;g<k;g++){var C=new It(a[g],this);C.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=C.bbox.ll.x),C.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=C.bbox.ll.y),C.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=C.bbox.ur.x),C.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=C.bbox.ur.y),this.polys.push(C)}this.isSubject=l}return c(b,[{key:"getSweepEvents",value:function(){for(var a=[],l=0,g=this.polys.length;l<g;l++)for(var k=this.polys[l].getSweepEvents(),C=0,N=k.length;C<N;C++)a.push(k[C]);return a}}]),b}(),jt=function(){function b(a){u(this,b),this.events=a;for(var l=0,g=a.length;l<g;l++)a[l].segment.ringOut=this;this.poly=null}return c(b,null,[{key:"factory",value:function(a){for(var l=[],g=0,k=a.length;g<k;g++){var C=a[g];if(C.isInResult()&&!C.ringOut){for(var N=null,z=C.leftSE,K=C.rightSE,et=[z],it=z.point,ut=[];N=z,z=K,et.push(z),z.point!==it;)for(;;){var lt=z.getAvailableLinkedEvents();if(lt.length===0){var mt=et[0].point,ot=et[et.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(mt.x,",")+" ".concat(mt.y,"]. Last matching segment found ends at")+" [".concat(ot.x,", ").concat(ot.y,"]."))}if(lt.length===1){K=lt[0].otherSE;break}for(var yt=null,bt=0,Mt=ut.length;bt<Mt;bt++)if(ut[bt].point===z.point){yt=bt;break}if(yt===null){ut.push({index:et.length,point:z.point});var Ct=z.getLeftmostComparator(N);K=lt.sort(Ct)[0].otherSE;break}var Pt=ut.splice(yt)[0],Et=et.splice(Pt.index);Et.unshift(Et[0].otherSE),l.push(new b(Et.reverse()))}l.push(new b(et))}}return l}}]),c(b,[{key:"getGeom",value:function(){for(var a=this.events[0].point,l=[a],g=1,k=this.events.length-1;g<k;g++){var C=this.events[g].point,N=this.events[g+1].point;tt(C,a,N)!==0&&(l.push(C),a=C)}if(l.length===1)return null;var z=l[0],K=l[1];tt(z,a,K)===0&&l.shift(),l.push(l[0]);for(var et=this.isExteriorRing()?1:-1,it=this.isExteriorRing()?0:l.length-1,ut=this.isExteriorRing()?l.length:-1,lt=[],mt=it;mt!=ut;mt+=et)lt.push([l[mt].x,l[mt].y]);return lt}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var a=this.enclosingRing();this._isExteriorRing=!a||!a.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var a=this.events[0],l=1,g=this.events.length;l<g;l++){var k=this.events[l];gt.compare(a,k)>0&&(a=k)}for(var C=a.segment.prevInResult(),N=C?C.prevInResult():null;;){if(!C)return null;if(!N)return C.ringOut;if(N.ringOut!==C.ringOut)return N.ringOut.enclosingRing()!==C.ringOut?C.ringOut:C.ringOut.enclosingRing();C=N.prevInResult(),N=C?C.prevInResult():null}}}]),b}(),Wt=function(){function b(a){u(this,b),this.exteriorRing=a,a.poly=this,this.interiorRings=[]}return c(b,[{key:"addInterior",value:function(a){this.interiorRings.push(a),a.poly=this}},{key:"getGeom",value:function(){var a=[this.exteriorRing.getGeom()];if(a[0]===null)return null;for(var l=0,g=this.interiorRings.length;l<g;l++){var k=this.interiorRings[l].getGeom();k!==null&&a.push(k)}return a}}]),b}(),Ft=function(){function b(a){u(this,b),this.rings=a,this.polys=this._composePolys(a)}return c(b,[{key:"getGeom",value:function(){for(var a=[],l=0,g=this.polys.length;l<g;l++){var k=this.polys[l].getGeom();k!==null&&a.push(k)}return a}},{key:"_composePolys",value:function(a){for(var l=[],g=0,k=a.length;g<k;g++){var C=a[g];if(!C.poly)if(C.isExteriorRing())l.push(new Wt(C));else{var N=C.enclosingRing();N.poly||l.push(new Wt(N)),N.poly.addInterior(C)}}return l}}]),b}(),fe=function(){function b(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xt.compare;u(this,b),this.queue=a,this.tree=new R(l),this.segments=[]}return c(b,[{key:"process",value:function(a){var l=a.segment,g=[];if(a.consumedBy)return a.isLeft?this.queue.remove(a.otherSE):this.tree.remove(l),g;var k=a.isLeft?this.tree.insert(l):this.tree.find(l);if(!k)throw new Error("Unable to find segment #".concat(l.id," ")+"[".concat(l.leftSE.point.x,", ").concat(l.leftSE.point.y,"] -> ")+"[".concat(l.rightSE.point.x,", ").concat(l.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var C=k,N=k,z=void 0,K=void 0;z===void 0;)(C=this.tree.prev(C))===null?z=null:C.key.consumedBy===void 0&&(z=C.key);for(;K===void 0;)(N=this.tree.next(N))===null?K=null:N.key.consumedBy===void 0&&(K=N.key);if(a.isLeft){var et=null;if(z){var it=z.getIntersection(l);if(it!==null&&(l.isAnEndpoint(it)||(et=it),!z.isAnEndpoint(it)))for(var ut=this._splitSafely(z,it),lt=0,mt=ut.length;lt<mt;lt++)g.push(ut[lt])}var ot=null;if(K){var yt=K.getIntersection(l);if(yt!==null&&(l.isAnEndpoint(yt)||(ot=yt),!K.isAnEndpoint(yt)))for(var bt=this._splitSafely(K,yt),Mt=0,Ct=bt.length;Mt<Ct;Mt++)g.push(bt[Mt])}if(et!==null||ot!==null){var Pt=null;Pt=et===null?ot:ot===null||gt.comparePoints(et,ot)<=0?et:ot,this.queue.remove(l.rightSE),g.push(l.rightSE);for(var Et=l.split(Pt),Nt=0,At=Et.length;Nt<At;Nt++)g.push(Et[Nt])}g.length>0?(this.tree.remove(l),g.push(a)):(this.segments.push(l),l.prev=z)}else{if(z&&K){var Bt=z.getIntersection(K);if(Bt!==null){if(!z.isAnEndpoint(Bt))for(var Tt=this._splitSafely(z,Bt),zt=0,Kt=Tt.length;zt<Kt;zt++)g.push(Tt[zt]);if(!K.isAnEndpoint(Bt))for(var St=this._splitSafely(K,Bt),xt=0,Ut=St.length;xt<Ut;xt++)g.push(St[xt])}}this.tree.remove(l)}return g}},{key:"_splitSafely",value:function(a,l){this.tree.remove(a);var g=a.rightSE;this.queue.remove(g);var k=a.split(l);return k.push(g),a.consumedBy===void 0&&this.tree.insert(a),k}}]),b}(),oe=typeof process!="undefined"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,se=typeof process!="undefined"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Dt=new(function(){function b(){u(this,b)}return c(b,[{key:"run",value:function(a,l,g){Dt.type=a,Z.reset();for(var k=[new ae(l,!0)],C=0,N=g.length;C<N;C++)k.push(new ae(g[C],!1));if(Dt.numMultiPolys=k.length,Dt.type==="difference")for(var z=k[0],K=1;K<k.length;)O(k[K].bbox,z.bbox)!==null?K++:k.splice(K,1);if(Dt.type==="intersection"){for(var et=0,it=k.length;et<it;et++)for(var ut=k[et],lt=et+1,mt=k.length;lt<mt;lt++)if(O(ut.bbox,k[lt].bbox)===null)return[]}for(var ot=new R(gt.compare),yt=0,bt=k.length;yt<bt;yt++)for(var Mt=k[yt].getSweepEvents(),Ct=0,Pt=Mt.length;Ct<Pt;Ct++)if(ot.insert(Mt[Ct]),ot.size>oe)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var Et=new fe(ot),Nt=ot.size,At=ot.pop();At;){var Bt=At.key;if(ot.size===Nt){var Tt=Bt.segment;throw new Error("Unable to pop() ".concat(Bt.isLeft?"left":"right"," SweepEvent ")+"[".concat(Bt.point.x,", ").concat(Bt.point.y,"] from segment #").concat(Tt.id," ")+"[".concat(Tt.leftSE.point.x,", ").concat(Tt.leftSE.point.y,"] -> ")+"[".concat(Tt.rightSE.point.x,", ").concat(Tt.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(ot.size>oe)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(Et.segments.length>se)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var zt=Et.process(Bt),Kt=0,St=zt.length;Kt<St;Kt++){var xt=zt[Kt];xt.consumedBy===void 0&&ot.insert(xt)}Nt=ot.size,At=ot.pop()}Z.reset();var Ut=jt.factory(Et.segments);return new Ft(Ut).getGeom()}}]),b}()),ge=function(b){for(var a=arguments.length,l=new Array(a>1?a-1:0),g=1;g<a;g++)l[g-1]=arguments[g];return Dt.run("union",b,l)},Qt=function(b){for(var a=arguments.length,l=new Array(a>1?a-1:0),g=1;g<a;g++)l[g-1]=arguments[g];return Dt.run("intersection",b,l)},me=function(b){for(var a=arguments.length,l=new Array(a>1?a-1:0),g=1;g<a;g++)l[g-1]=arguments[g];return Dt.run("xor",b,l)},le=function(b){for(var a=arguments.length,l=new Array(a>1?a-1:0),g=1;g<a;g++)l[g-1]=arguments[g];return Dt.run("difference",b,l)};return{union:ge,intersection:Qt,xor:me,difference:le}}()},2582:function(h){h.exports=function(){function u(m,w,O,F,q){(function H(J,Q,Z,$,ct){for(;$>Z;){if($-Z>600){var tt=$-Z+1,ht=Q-Z+1,_t=Math.log(tt),pt=.5*Math.exp(2*_t/3),vt=.5*Math.sqrt(_t*pt*(tt-pt)/tt)*(ht-tt/2<0?-1:1);H(J,Q,Math.max(Z,Math.floor(Q-ht*pt/tt+vt)),Math.min($,Math.floor(Q+(tt-ht)*pt/tt+vt)),ct)}var Ot=J[Q],st=Z,gt=$;for(o(J,Z,Q),ct(J[$],Ot)>0&&o(J,Z,$);st<gt;){for(o(J,st,gt),st++,gt--;ct(J[st],Ot)<0;)st++;for(;ct(J[gt],Ot)>0;)gt--}ct(J[Z],Ot)===0?o(J,Z,gt):o(J,++gt,$),gt<=Q&&(Z=gt+1),Q<=gt&&($=gt-1)}})(m,w,O||0,F||m.length-1,q||c)}function o(m,w,O){var F=m[w];m[w]=m[O],m[O]=F}function c(m,w){return m<w?-1:m>w?1:0}var s=function(m){m===void 0&&(m=9),this._maxEntries=Math.max(4,m),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function f(m,w,O){if(!O)return w.indexOf(m);for(var F=0;F<w.length;F++)if(O(m,w[F]))return F;return-1}function d(m,w){x(m,0,m.children.length,w,m)}function x(m,w,O,F,q){q||(q=S(null)),q.minX=1/0,q.minY=1/0,q.maxX=-1/0,q.maxY=-1/0;for(var H=w;H<O;H++){var J=m.children[H];T(q,m.leaf?F(J):J)}return q}function T(m,w){return m.minX=Math.min(m.minX,w.minX),m.minY=Math.min(m.minY,w.minY),m.maxX=Math.max(m.maxX,w.maxX),m.maxY=Math.max(m.maxY,w.maxY),m}function A(m,w){return m.minX-w.minX}function U(m,w){return m.minY-w.minY}function R(m){return(m.maxX-m.minX)*(m.maxY-m.minY)}function E(m){return m.maxX-m.minX+(m.maxY-m.minY)}function I(m,w){return m.minX<=w.minX&&m.minY<=w.minY&&w.maxX<=m.maxX&&w.maxY<=m.maxY}function P(m,w){return w.minX<=m.maxX&&w.minY<=m.maxY&&w.maxX>=m.minX&&w.maxY>=m.minY}function S(m){return{children:m,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function B(m,w,O,F,q){for(var H=[w,O];H.length;)if(!((O=H.pop())-(w=H.pop())<=F)){var J=w+Math.ceil((O-w)/F/2)*F;u(m,J,w,O,q),H.push(w,J,J,O)}}return s.prototype.all=function(){return this._all(this.data,[])},s.prototype.search=function(m){var w=this.data,O=[];if(!P(m,w))return O;for(var F=this.toBBox,q=[];w;){for(var H=0;H<w.children.length;H++){var J=w.children[H],Q=w.leaf?F(J):J;P(m,Q)&&(w.leaf?O.push(J):I(m,Q)?this._all(J,O):q.push(J))}w=q.pop()}return O},s.prototype.collides=function(m){var w=this.data;if(!P(m,w))return!1;for(var O=[];w;){for(var F=0;F<w.children.length;F++){var q=w.children[F],H=w.leaf?this.toBBox(q):q;if(P(m,H)){if(w.leaf||I(m,H))return!0;O.push(q)}}w=O.pop()}return!1},s.prototype.load=function(m){if(!m||!m.length)return this;if(m.length<this._minEntries){for(var w=0;w<m.length;w++)this.insert(m[w]);return this}var O=this._build(m.slice(),0,m.length-1,0);if(this.data.children.length)if(this.data.height===O.height)this._splitRoot(this.data,O);else{if(this.data.height<O.height){var F=this.data;this.data=O,O=F}this._insert(O,this.data.height-O.height-1,!0)}else this.data=O;return this},s.prototype.insert=function(m){return m&&this._insert(m,this.data.height-1),this},s.prototype.clear=function(){return this.data=S([]),this},s.prototype.remove=function(m,w){if(!m)return this;for(var O,F,q,H=this.data,J=this.toBBox(m),Q=[],Z=[];H||Q.length;){if(H||(H=Q.pop(),F=Q[Q.length-1],O=Z.pop(),q=!0),H.leaf){var $=f(m,H.children,w);if($!==-1)return H.children.splice($,1),Q.push(H),this._condense(Q),this}q||H.leaf||!I(H,J)?F?(O++,H=F.children[O],q=!1):H=null:(Q.push(H),Z.push(O),O=0,F=H,H=H.children[0])}return this},s.prototype.toBBox=function(m){return m},s.prototype.compareMinX=function(m,w){return m.minX-w.minX},s.prototype.compareMinY=function(m,w){return m.minY-w.minY},s.prototype.toJSON=function(){return this.data},s.prototype.fromJSON=function(m){return this.data=m,this},s.prototype._all=function(m,w){for(var O=[];m;)m.leaf?w.push.apply(w,m.children):O.push.apply(O,m.children),m=O.pop();return w},s.prototype._build=function(m,w,O,F){var q,H=O-w+1,J=this._maxEntries;if(H<=J)return d(q=S(m.slice(w,O+1)),this.toBBox),q;F||(F=Math.ceil(Math.log(H)/Math.log(J)),J=Math.ceil(H/Math.pow(J,F-1))),(q=S([])).leaf=!1,q.height=F;var Q=Math.ceil(H/J),Z=Q*Math.ceil(Math.sqrt(J));B(m,w,O,Z,this.compareMinX);for(var $=w;$<=O;$+=Z){var ct=Math.min($+Z-1,O);B(m,$,ct,Q,this.compareMinY);for(var tt=$;tt<=ct;tt+=Q){var ht=Math.min(tt+Q-1,ct);q.children.push(this._build(m,tt,ht,F-1))}}return d(q,this.toBBox),q},s.prototype._chooseSubtree=function(m,w,O,F){for(;F.push(w),!w.leaf&&F.length-1!==O;){for(var q=1/0,H=1/0,J=void 0,Q=0;Q<w.children.length;Q++){var Z=w.children[Q],$=R(Z),ct=(tt=m,ht=Z,(Math.max(ht.maxX,tt.maxX)-Math.min(ht.minX,tt.minX))*(Math.max(ht.maxY,tt.maxY)-Math.min(ht.minY,tt.minY))-$);ct<H?(H=ct,q=$<q?$:q,J=Z):ct===H&&$<q&&(q=$,J=Z)}w=J||w.children[0]}var tt,ht;return w},s.prototype._insert=function(m,w,O){var F=O?m:this.toBBox(m),q=[],H=this._chooseSubtree(F,this.data,w,q);for(H.children.push(m),T(H,F);w>=0&&q[w].children.length>this._maxEntries;)this._split(q,w),w--;this._adjustParentBBoxes(F,q,w)},s.prototype._split=function(m,w){var O=m[w],F=O.children.length,q=this._minEntries;this._chooseSplitAxis(O,q,F);var H=this._chooseSplitIndex(O,q,F),J=S(O.children.splice(H,O.children.length-H));J.height=O.height,J.leaf=O.leaf,d(O,this.toBBox),d(J,this.toBBox),w?m[w-1].children.push(J):this._splitRoot(O,J)},s.prototype._splitRoot=function(m,w){this.data=S([m,w]),this.data.height=m.height+1,this.data.leaf=!1,d(this.data,this.toBBox)},s.prototype._chooseSplitIndex=function(m,w,O){for(var F,q,H,J,Q,Z,$,ct=1/0,tt=1/0,ht=w;ht<=O-w;ht++){var _t=x(m,0,ht,this.toBBox),pt=x(m,ht,O,this.toBBox),vt=(q=_t,H=pt,J=void 0,Q=void 0,Z=void 0,$=void 0,J=Math.max(q.minX,H.minX),Q=Math.max(q.minY,H.minY),Z=Math.min(q.maxX,H.maxX),$=Math.min(q.maxY,H.maxY),Math.max(0,Z-J)*Math.max(0,$-Q)),Ot=R(_t)+R(pt);vt<ct?(ct=vt,F=ht,tt=Ot<tt?Ot:tt):vt===ct&&Ot<tt&&(tt=Ot,F=ht)}return F||O-w},s.prototype._chooseSplitAxis=function(m,w,O){var F=m.leaf?this.compareMinX:A,q=m.leaf?this.compareMinY:U;this._allDistMargin(m,w,O,F)<this._allDistMargin(m,w,O,q)&&m.children.sort(F)},s.prototype._allDistMargin=function(m,w,O,F){m.children.sort(F);for(var q=this.toBBox,H=x(m,0,w,q),J=x(m,O-w,O,q),Q=E(H)+E(J),Z=w;Z<O-w;Z++){var $=m.children[Z];T(H,m.leaf?q($):$),Q+=E(H)}for(var ct=O-w-1;ct>=w;ct--){var tt=m.children[ct];T(J,m.leaf?q(tt):tt),Q+=E(J)}return Q},s.prototype._adjustParentBBoxes=function(m,w,O){for(var F=O;F>=0;F--)T(w[F],m)},s.prototype._condense=function(m){for(var w=m.length-1,O=void 0;w>=0;w--)m[w].children.length===0?w>0?(O=m[w-1].children).splice(O.indexOf(m[w]),1):this.clear():d(m[w],this.toBBox)},s}()}},W={};function X(h){var u=W[h];if(u!==void 0)return u.exports;var o=W[h]={id:h,loaded:!1,exports:{}};return rt[h].call(o.exports,o,o.exports,X),o.loaded=!0,o.exports}X.n=h=>{var u=h&&h.__esModule?()=>h.default:()=>h;return X.d(u,{a:u}),u},X.d=(h,u)=>{for(var o in u)X.o(u,o)&&!X.o(h,o)&&Object.defineProperty(h,o,{enumerable:!0,get:u[o]})},X.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),X.o=(h,u)=>Object.prototype.hasOwnProperty.call(h,u),X.nmd=h=>(h.paths=[],h.children||(h.children=[]),h),X(5975)})();var re="";(function(){L.Marker.Measurement=L[L.Layer?"Layer":"Class"].extend({options:{pane:"markerPane"},initialize:function(s,f,d,x,T){L.setOptions(this,T),this._latlng=s,this._measurement=f,this._title=d,this._rotation=x},addTo:function(s){return s.addLayer(this),this},onAdd:function(s){this._map=s;var f=this.getPane?this.getPane():s.getPanes().markerPane,d=this._element=L.DomUtil.create("div","leaflet-zoom-animated leaflet-measure-path-measurement",f),x=L.DomUtil.create("div","",d);x.title=this._title,x.innerHTML=this._measurement,s.on("zoomanim",this._animateZoom,this),this._setPosition()},onRemove:function(s){s.off("zoomanim",this._animateZoom,this);var f=this.getPane?this.getPane():s.getPanes().markerPane;f.removeChild(this._element),this._map=null},_setPosition:function(){L.DomUtil.setPosition(this._element,this._map.latLngToLayerPoint(this._latlng)),this._element.style.transform+=" rotate("+this._rotation+"rad)"},_animateZoom:function(s){var f=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();L.DomUtil.setPosition(this._element,f),this._element.style.transform+=" rotate("+this._rotation+"rad)"}}),L.marker.measurement=function(s,f,d,x,T){return new L.Marker.Measurement(s,f,d,x,T)};var rt=function(s){var f,d;return this._measurementOptions.imperial?(d=s/.3048,d>3e3?(s=s/1609.344,f="mi"):(s=d,f="ft")):s>1e3?(s=s/1e3,f="km"):f="m",s<100?s.toFixed(1)+" "+f:Math.round(s)+" "+f},W=function(s){var f;return this._measurementOptions.imperial?s>404.685642?(s=s/4046.85642,f="ac"):(s=s/.09290304,f="ft\xB2"):s>1e6?(s=s/1e6,f="km\xB2"):f="m\xB2",s<100?s.toFixed(1)+" "+f:Math.round(s)+" "+f},X=6378137,h=function(f){var d=function(m){return m*Math.PI/180},x,T,A,U,R,E,I=0,P=f.length;if(P>2){for(var S=0;S<P;S++)S===P-2?(U=P-2,R=P-1,E=0):S===P-1?(U=P-1,R=0,E=1):(U=S,R=S+1,E=S+2),x=f[U],T=f[R],A=f[E],I+=(d(A.lng)-d(x.lng))*Math.sin(d(T.lat));I=I*X*X/2}return Math.abs(I)},u=function(){var s=this.options.measurementOptions&&this.options.measurementOptions.showOnHover;this.options.showMeasurements&&!s&&this.showMeasurements(),this.options.showMeasurements&&s&&(this.on("mouseover",function(){this.showMeasurements()}),this.on("mouseout",function(){this.hideMeasurements()}))},o=function(f){var d=f/X;return 2*Math.PI*X*X*(1-Math.cos(d))},c=function(s,f,d){return d?function(){return f.apply(this,arguments),s.apply(this,arguments)}:function(){var x=s.apply(this,arguments),T=Array.prototype.slice.call(arguments);return T.push(x),f.apply(this,T)}};L.Polyline.include({showMeasurements:function(s){return!this._map||this._measurementLayer?this:(this._measurementOptions=L.extend({showOnHover:s&&s.showOnHover||!1,minPixelDistance:30,showDistances:!0,showArea:!0,showTotalDistance:!0,lang:{totalLength:"Total length",totalArea:"Total area",segmentLength:"Segment length"}},s||{}),this._measurementLayer=L.layerGroup().addTo(this._map),this.updateMeasurements(),this._map.on("zoomend",this.updateMeasurements,this),this)},hideMeasurements:function(){return this._map?(this._map.off("zoomend",this.updateMeasurements,this),this._measurementLayer?(this._map.removeLayer(this._measurementLayer),this._measurementLayer=null,this):this):this},onAdd:c(L.Polyline.prototype.onAdd,function(s){var f=this.options.measurementOptions&&this.options.measurementOptions.showOnHover;return this.options.showMeasurements&&!f&&this.showMeasurements(this.options.measurementOptions),s}),onRemove:c(L.Polyline.prototype.onRemove,function(s){return this.hideMeasurements(),s},!0),setLatLngs:c(L.Polyline.prototype.setLatLngs,function(s){return this.updateMeasurements(),s}),spliceLatLngs:c(L.Polyline.prototype.spliceLatLngs,function(s){return this.updateMeasurements(),s}),formatDistance:rt,formatArea:W,updateMeasurements:function(){if(!this._measurementLayer)return this;var s=this.getLatLngs(),f=this instanceof L.Polygon,d=this._measurementOptions,x=0,T,A,U,R,E,I,P;if(s&&s.length&&L.Util.isArray(s[0])&&(s=s[0]),this._measurementLayer.clearLayers(),this._measurementOptions.showDistances&&s.length>1){T=this._measurementOptions.formatDistance||L.bind(this.formatDistance,this);for(var S=1,B=s.length;f&&S<=B||S<B;S++)A=s[S-1],U=s[S%B],P=A.distanceTo(U),x+=P,R=this._map.latLngToLayerPoint(A),E=this._map.latLngToLayerPoint(U),I=R.distanceTo(E),I>=d.minPixelDistance&&L.marker.measurement(this._map.layerPointToLatLng([(R.x+E.x)/2,(R.y+E.y)/2]),T(P),d.lang.segmentLength,this._getRotation(A,U),d).addTo(this._measurementLayer);!f&&this._measurementOptions.showTotalDistance&&L.marker.measurement(U,T(x),d.lang.totalLength,0,d).addTo(this._measurementLayer)}if(f&&d.showArea&&s.length>2){T=d.formatArea||L.bind(this.formatArea,this);var m=h(s);L.marker.measurement(this.getBounds().getCenter(),T(m),d.lang.totalArea,0,d).addTo(this._measurementLayer)}return this},_getRotation:function(s,f){var d=this._map.project(s),x=this._map.project(f);return Math.atan((x.y-d.y)/(x.x-d.x))}}),L.Polyline.addInitHook(function(){u.call(this)}),L.Circle.include({showMeasurements:function(s){return!this._map||this._measurementLayer?this:(this._measurementOptions=L.extend({showOnHover:!1,showArea:!0,lang:{totalArea:"Total area"}},s||{}),this._measurementLayer=L.layerGroup().addTo(this._map),this.updateMeasurements(),this._map.on("zoomend",this.updateMeasurements,this),this)},hideMeasurements:function(){return this._map?(this._map.on("zoomend",this.updateMeasurements,this),this._measurementLayer?(this._map.removeLayer(this._measurementLayer),this._measurementLayer=null,this):this):this},onAdd:c(L.Circle.prototype.onAdd,function(s){var f=this.options.measurementOptions&&this.options.measurementOptions.showOnHover;return this.options.showMeasurements&&!f&&this.showMeasurements(this.options.measurementOptions),s}),onRemove:c(L.Circle.prototype.onRemove,function(s){return this.hideMeasurements(),s},!0),setLatLng:c(L.Circle.prototype.setLatLng,function(s){return this.updateMeasurements(),s}),setRadius:c(L.Circle.prototype.setRadius,function(s){return this.updateMeasurements(),s}),formatArea:W,updateMeasurements:function(){if(!!this._measurementLayer){var s=this.getLatLng(),f=this._measurementOptions,d=f.formatArea||L.bind(this.formatArea,this);if(this._measurementLayer.clearLayers(),f.showArea){d=f.formatArea||L.bind(this.formatArea,this);var x=o(this.getRadius());L.marker.measurement(s,d(x),f.lang.totalArea,0,f).addTo(this._measurementLayer)}}}}),L.Circle.addInitHook(function(){u.call(this)})})();var Un="";function De(rt,W={}){typeof rt=="string"&&(rt=document.querySelector(rt));const X={lat:33.51361277047545,lng:107.89657445624471};return L.map(rt,{center:X,zoom:7,zoomControl:!1,minZoom:3,maxZoom:17,zoomOffset:1,crs:L.CRS.EPSG4326,attributionControl:!1,...W})}const tn={Marker:"Marker",CircleMarker:"CircleMarker",Circle:"Circle",Line:"Line",Rectangle:"Rectangle",Polygon:"Polygon",Text:"Text"};class en{constructor(W){this.map=W,this.map.pm.setLang("zh")}enableDraw(W,X={}){this.map.pm.enableDraw(W,{snappable:!0,snapDistance:20,...X})}disableDraw(){this.map.pm.disableDraw()}clear(){this.map.pm.getGeomanDrawLayers().map(X=>X.remove())}}class nn{constructor(W){this.map=W,this.layerGroup=L.layerGroup(),this.layerGroup.addTo(this.map)}createCricle({showMeasurements:W=!0,onEnd:X}){this.map.on("click",h=>{this.map.doubleClickZoom.disable();const{latlng:u}=h;this.map.on("mousemove",o=>{this._circleMousemove(o,u,W,X)})})}_circleMousemove(W,X,h,u){this.circle&&this.circle.remove();const{latlng:o}=W,c=X.distanceTo(o);this.circle=L.circle(X,{radius:c,showMeasurements:h}),this.layerGroup.addLayer(this.circle),this._toolTip(o),this.current=this.circle,this.map.on("contextmenu",s=>{s.type==="contextmenu"&&u&&u(this.circle),this.contextmenu()})}contextmenu(){this.map.off("click mousemove contextmenu"),this.markerTip&&this.markerTip.remove(),this.polyline=null,this.polygon=null,this.rectangle=null,this.circle=null}_toolTip(W){this.markerTip&&this.markerTip.remove(),W&&(this.markerTip=L.marker(W,{opacity:0}).addTo(this.layerGroup),this.markerTip.bindTooltip("\u53F3\u51FB\u7ED3\u675F",{className:"draw-leaflet-tip",offset:[0,20]}).openTooltip())}createLine({showMeasurements:W=!0,onEnd:X}){this.contextmenu();const h=[];this.map.on("click",u=>{this.map.doubleClickZoom.disable();const{latlng:o}=u,{lat:c,lng:s}=o;h.push([c,s]),this.map.on("mousemove",f=>{this._lineMousemove(f,h,W,X)})})}_lineMousemove(W,X,h,u){const{latlng:o}=W,c=X.length,{lat:s,lng:f}=o;c<=1?X.push([s,f]):(X[c-1]=[s,f],this._toolTip(o),this.polyline?this.polyline.setLatLngs(X):(this.polyline=L.polyline(X,{showMeasurements:h}),this.layerGroup.addLayer(this.polyline)),this.current=this.polyline),this.map.on("contextmenu",d=>{d.type==="contextmenu"&&u&&u(this.polyline),this.contextmenu()})}createRectangle({showMeasurements:W=!0,onEnd:X}){this.contextmenu();const h=[];this.map.on("click",u=>{this.map.doubleClickZoom.disable();const{latlng:o}=u,{lat:c,lng:s}=o;h.push([c,s]),this.map.on("mousemove",f=>{this._rectangleMousemove(f,h,W,X)})})}_rectangleMousemove(W,X,h,u){const{latlng:o}=W,c=X.length;this.rectangle&&this.rectangle.remove();const{lat:s,lng:f}=o;c<=1?X.push([s,f]):(X[c-1]=[s,f],this._toolTip(o),this.rectangle=L.rectangle(X,{showMeasurements:h}),this.layerGroup.addLayer(this.rectangle),this.current=this.rectangle),this.map.on("contextmenu",d=>{d.type==="contextmenu"&&u&&u(this.rectangle),this.contextmenu()})}createPolygon({showMeasurements:W=!0,onEnd:X}){this.contextmenu();const h=[];this.map.on("click",u=>{this.map.doubleClickZoom.disable();const{latlng:o}=u,{lat:c,lng:s}=o;h.push([c,s]),this.map.on("mousemove",f=>{this._polygonMousemove(f,h,W,X)})})}_polygonMousemove(W,X,h,u){const{latlng:o}=W,c=X.length,{lat:s,lng:f}=o;c<=1?X.push([s,f]):(X[c-1]=[s,f],this._toolTip(o),this.polygon?this.polygon.setLatLngs(X):(this.polygon=L.polygon(X,{showMeasurements:h}),this.layerGroup.addLayer(this.polygon)),this.current=this.polygon),this.map.on("contextmenu",d=>{d.type==="contextmenu"&&u&&u(this.polygon),this.contextmenu()})}disable(){this.current&&this.current.remove(),this.contextmenu()}clear(){this.layerGroup.clearLayers(),this.markerTip&&this.markerTip.remove(),this.contextmenu()}}var Be=Object.freeze(Object.defineProperty({__proto__:null,createMap:De,DRAW_TYPE:tn,Draw:en,DrawMeasure:nn},Symbol.toStringTag,{value:"Module"})),rn=function(){var rt=this,W=rt.$createElement,X=rt._self._c||W;return X("div",{ref:"mapElem",staticClass:"mapWrapper"})},an=[],Vn="";function on(rt,W,X,h,u,o,c,s){var f=typeof rt=="function"?rt.options:rt;W&&(f.render=W,f.staticRenderFns=X,f._compiled=!0),h&&(f.functional=!0),o&&(f._scopeId="data-v-"+o);var d;if(c?(d=function(A){A=A||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!A&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(A=__VUE_SSR_CONTEXT__),u&&u.call(this,A),A&&A._registeredComponents&&A._registeredComponents.add(c)},f._ssrRegister=d):u&&(d=s?function(){u.call(this,(f.functional?this.parent:this).$root.$options.shadowRoot)}:u),d)if(f.functional){f._injectStyles=d;var x=f.render;f.render=function(U,R){return d.call(R),x(U,R)}}else{var T=f.beforeCreate;f.beforeCreate=T?[].concat(T,d):[d]}return{exports:rt,options:f}}const sn={name:"tb-leaflet",props:{showBaseLayer:{type:Boolean,default:!0},config:{type:Object,default:()=>({})}},data(){return{}},components:{},mounted(){const{showBaseLayer:rt,config:W}=this,X=L.tileLayer("http://t2.tianditu.gov.cn/img_c/wmts?layer=img&style=default&tilematrixset=c&Service=WMTS&Request=GetTile&Version=1.0.0&Format=tiles&TileMatrix={z}&TileCol={x}&TileRow={y}&tk=64a7440068a2bbc276c11927b54458f4",{zoomOffset:1}).setZIndex(0),h=De(this.$refs.mapElem,{layers:rt?[X]:[],...W});this.$emit("onReady",h)},methods:{}},Re={};var ln=on(sn,rn,an,!1,hn,"c593c0d0",null,null);function hn(rt){for(let W in Re)this[W]=Re[W]}var ie=function(){return ln.exports}();ie.install=rt=>rt.component("tb-leaflet",ie);const un=(rt=10,W={})=>({total:0,current:1,pageSize:rt,hideOnSinglePage:!0,showTotal:(X,h)=>h[0]+"-"+h[1]+" \u5171"+X+"\u6761",...W});function cn({extraHeight:rt,id:W}){typeof rt=="undefined"&&(rt=88);let X=null;W?X=document.getElementById(W)?document.getElementById(W).getElementsByClassName("ant-table-thead")[0]:null:X=document.getElementsByClassName("ant-table-thead")[0];let h=0;return X&&(h=X.getBoundingClientRect().bottom),`calc(100vh - ${h+rt}px)`}function pn(rt){return new Promise((W,X)=>{const h=new FileReader;h.readAsDataURL(rt),h.onload=()=>W(h.result),h.onerror=u=>X(u)})}function dn(rt){const W=rt.lastIndexOf("/");return rt.substring(W+1)}function fn(rt){const W=document.createElement("a");W.href=rt,W.download=rt,W.click()}var Te=Object.freeze(Object.defineProperty({__proto__:null,getDefaultPagination:un,getTableScrollHeight:cn,getBase64:pn,getFileName:dn,downloadFile:fn},Symbol.toStringTag,{value:"Module"}));const gn=[ie],mn={install(rt){gn.map(W=>{rt.component(W.name,W)}),rt.prototype.$tu=Te,rt.prototype.$tmu=Be}};Gt.TbLeaflet=ie,Gt.default=mn,Gt.tbMapUtils=Be,Gt.utils=Te,Object.defineProperties(Gt,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
